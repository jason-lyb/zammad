import{f as y,ap as h,c as M,m as C,D as F,y as N,I as S,q as i,u as a}from"./vue-oicRkvo0.js";import{M as v,N as w,c as B}from"./apollo-Cj5TVUDk.js";import{_ as $}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as L}from"./useForm-CUKec4n5.js";import{u as O}from"./merge.api-B2JVH7J2.js";import{aR as V}from"./overviewAttributes.api-C09LSZ8O.js";import{_ as q}from"./CommonFlyout.vue_vue_type_script_setup_true_lang-Cr1ukr3s.js";import{c as R}from"./useFlyout-KZXqW5RR.js";import{g as x}from"./desktop-l0eJ1dZN.js";import{u as z,_ as A}from"./useTargetTicketOptions-Dw9uFPEv.js";import"./vendor-C11O1Xx8.js";import"./commonjsHelpers-BosuxZz1.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./routes-CgLO9M4y.js";import"./vite-FJshFMF2.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./CommonOverlayContainer.vue_vue_type_script_setup_true_lang-CxyKmNUC.js";import"./LayoutSidebar.vue_vue_type_script_setup_true_lang-BO1pkKrb.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./getTicketNumber-CTSsSeKd.js";const D={class:"space-y-6"},s="ticket-merge",_t=y({__name:"TicketMergeFlyout",props:{ticket:{},currentTaskbarTabId:{}},setup(c){const{deleteTaskbarTab:n}=x(),o=c,{form:r,updateFieldValues:m,onChangedField:p}=L(),{formListTargetTicketOptions:u,targetTicketId:d,handleTicketClick:l}=z(p,m),k=[{name:"targetTicketId",type:"ticket",label:__("Target ticket"),exceptTicketInternalId:o.ticket.internalId,options:u,clearable:!0,required:!0}],f=new v(O(),{errorShowNotification:!1}),T=h(),{notify:g}=B(),_=async t=>{const{targetTicketId:e}=t;return await f.send({sourceTicketId:o.ticket.id,targetTicketId:e}),g({type:w.Success,message:__("Ticket merged successfully")}),()=>{R(s),o.currentTaskbarTabId&&n(o.currentTaskbarTabId),T.push(`/ticket/${V(e)}`)}},b=M(()=>({actionButton:{variant:"submit",type:"submit"},actionLabel:__("Merge"),form:r.value}));return(t,e)=>(C(),F(q,{"header-title":t.__("Merge Tickets"),"header-icon":"merge",size:"large","no-close-on-action":"","footer-action-options":b.value,name:s},{default:N(()=>[S("div",D,[i($,{ref_key:"form",ref:r,schema:k,"should-autofocus":"",onSubmit:e[0]||(e[0]=I=>_(I))},null,512),i(A,{"customer-id":t.ticket.customer.id,"internal-ticket-id":t.ticket.internalId,"selected-ticket-id":a(d),onClickTicket:a(l)},null,8,["customer-id","internal-ticket-id","selected-ticket-id","onClickTicket"])])]),_:1},8,["header-title","footer-action-options"]))}});export{_t as default};
//# sourceMappingURL=TicketMergeFlyout-DexMxunL.js.map
