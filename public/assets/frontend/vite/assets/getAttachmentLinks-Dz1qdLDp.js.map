{"version":3,"file":"getAttachmentLinks-Dz1qdLDp.js","sources":["../../../../../app/frontend/shared/composables/getAttachmentLinks.ts"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { canDownloadFile, canPreviewFile } from '#shared/utils/files.ts'\n\ninterface Attachment {\n  type?: Maybe<string>\n  internalId: number\n}\n\nexport const getAttachmentLinks = (attachment: Attachment, apiPath: string) => {\n  const buildBaseUrl = () => {\n    const { internalId } = attachment\n    return `${apiPath}/attachments/${internalId}`\n  }\n  const buildPreviewUrl = (baseUrl: string, type?: string | null) => {\n    if (canPreviewFile(type)) {\n      return `${baseUrl}?preview=1`\n    }\n\n    return ''\n  }\n\n  const buildInlineUrl = (baseUrl: string) => `${baseUrl}?disposition=inline`\n\n  const canDownloadAttachment = (attachment: { type?: Maybe<string> }) => {\n    return canDownloadFile(attachment.type)\n  }\n\n  const buildDownloadUrl = (baseUrl: string, canDownload: boolean) => {\n    const dispositionParams = canDownload ? '?disposition=attachment' : ''\n    return `${baseUrl}${dispositionParams}`\n  }\n\n  const baseUrl = buildBaseUrl()\n  const previewUrl = buildPreviewUrl(baseUrl, attachment.type)\n  const canDownload = canDownloadAttachment(attachment)\n  const downloadUrl = buildDownloadUrl(baseUrl, canDownload)\n  const inlineUrl = buildInlineUrl(baseUrl)\n\n  return {\n    baseUrl,\n    inlineUrl,\n    previewUrl,\n    canDownload,\n    downloadUrl,\n  }\n}\n"],"names":["getAttachmentLinks","attachment","apiPath","buildBaseUrl","internalId","buildPreviewUrl","baseUrl","type","canPreviewFile","buildInlineUrl","canDownloadAttachment","canDownloadFile","buildDownloadUrl","canDownload","previewUrl","downloadUrl","inlineUrl"],"mappings":"kEASa,MAAAA,EAAqB,CAACC,EAAwBC,IAAoB,CAC7E,MAAMC,EAAe,IAAM,CACnB,KAAA,CAAE,WAAAC,CAAe,EAAAH,EAChB,MAAA,GAAGC,CAAO,gBAAgBE,CAAU,EAAA,EAEvCC,EAAkB,CAACC,EAAiBC,IACpCC,EAAeD,CAAI,EACd,GAAGD,CAAO,aAGZ,GAGHG,EAAkBH,GAAoB,GAAGA,CAAO,sBAEhDI,EAAyBT,GACtBU,EAAgBV,EAAW,IAAI,EAGlCW,EAAmB,CAACN,EAAiBO,IAElC,GAAGP,CAAO,GADSO,EAAc,0BAA4B,EAC/B,GAGjCP,EAAUH,IACVW,EAAaT,EAAgBC,EAASL,EAAW,IAAI,EACrDY,EAAcH,EAAsBT,CAAU,EAC9Cc,EAAcH,EAAiBN,EAASO,CAAW,EACnDG,EAAYP,EAAeH,CAAO,EAEjC,MAAA,CACL,QAAAA,EACA,UAAAU,EACA,WAAAF,EACA,YAAAD,EACA,YAAAE,CAAA,CAEJ"}