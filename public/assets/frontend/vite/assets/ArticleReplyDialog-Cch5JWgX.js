import{f as B,c as i,k as T,l as $,a1 as P,m as y,D as _,y as a,q as b,Q as s,M as l,L as w,W as V,I as c,E as G,H as S}from"./vue-oicRkvo0.js";import{a2 as K}from"./overviewAttributes.api-C09LSZ8O.js";import{_ as g,p as m}from"./mobile-Bk4bKGxF.js";import{_ as x}from"./CommonDialog.vue_vue_type_script_setup_true_lang-CID2Z6MI.js";import{a as E,b as L}from"./lodash-pFOI14f-.js";import"./vendor-C11O1Xx8.js";import"./commonjsHelpers-BosuxZz1.js";import"./routes-CgLO9M4y.js";import"./vite-FJshFMF2.js";import"./apollo-Cj5TVUDk.js";import"./formkit-5nol1GBe.js";import"./pwa-THoW_3xc.js";import"./add.api-CxwFhgGn.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";const M={class:"w-full p-4"},te=B({__name:"ArticleReplyDialog",props:{name:{},ticket:{},articleFormGroupNode:{},newTicketArticlePresent:{type:Boolean},needSpaceForSaveBanner:{type:Boolean},form:{}},emits:["show-article-form","hide-article-form","discard","done"],setup(k,{emit:D}){var v;const r=k,o=D,C=i(()=>r.newTicketArticlePresent?__("Edit reply"):__("Add reply")),n=i(()=>{var e;return(e=r.articleFormGroupNode)==null?void 0:e.context}),d=E({...(v=n.value)==null?void 0:v._value,__init:!0}),p=i(()=>{var e,t;return r.newTicketArticlePresent?!L(d,(t=n.value)==null?void 0:t._value):!!((e=n.value)!=null&&e.state.dirty)}),{waitForConfirmation:u}=K(),F=async()=>{var e;p.value&&!await u(__("Are you sure? You have changes that will get lost."),{buttonLabel:__("Discard changes"),buttonVariant:"danger"})||(r.newTicketArticlePresent&&((e=r.articleFormGroupNode)==null||e.input(d)),m(r.name))},A=async()=>{var t;await u(__("Are you sure? The prepared article will be removed."),{buttonLabel:__("Discard article"),buttonVariant:"danger"})&&((t=r.articleFormGroupNode)==null||t.reset(),o("discard"),m(r.name))};T(()=>{o("show-article-form")}),$(()=>{o("hide-article-form")});const f=()=>{o("done"),m(r.name)};return(e,t)=>{const N=P("FormKit");return y(),_(x,{class:"w-full",name:e.name,label:C.value},{"before-label":a(()=>[b(g,{"transparent-background":"",onClick:F},{default:a(()=>[s(l(e.$t("Cancel")),1)]),_:1})]),"after-label":a(()=>[b(g,{variant:"primary",disabled:!p.value,"transparent-background":"",onPointerdown:t[0]||(t[0]=w(()=>{},["stop"])),onClick:t[1]||(t[1]=h=>f()),onKeypress:t[2]||(t[2]=V(w(h=>f(),["prevent"]),["space"]))},{default:a(()=>[s(l(e.$t("Done")),1)]),_:1},8,["disabled"])]),default:a(()=>[c("div",M,[t[3]||(t[3]=c("div",{"data-ticket-article-reply-form":""},null,-1)),e.newTicketArticlePresent?(y(),_(N,{key:0,variant:"danger","wrapper-class":"mt-4 flex grow justify-center items-center","input-class":"py-2 px-4 w-full h-14 rounded-xl select-none",name:"discardArticle",type:"button",onClick:A},{default:a(()=>[s(l(e.$t("Discard your unsaved changes")),1)]),_:1})):G("",!0),c("div",{class:S(["transition-all",{"pb-16":e.needSpaceForSaveBanner}])},null,2)])]),_:1},8,["name","label"])}}});export{te as default};
//# sourceMappingURL=ArticleReplyDialog-Cch5JWgX.js.map
