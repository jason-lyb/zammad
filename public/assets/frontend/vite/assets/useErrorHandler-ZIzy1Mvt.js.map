{"version":3,"file":"useErrorHandler-ZIzy1Mvt.js","sources":["../../../../../app/frontend/shared/errors/useErrorHandler.ts"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { useRouter } from 'vue-router'\n\nimport { redirectToError } from '#shared/router/error.ts'\nimport type { GraphQLHandlerError } from '#shared/types/error.ts'\nimport { ErrorStatusCodes, GraphQLErrorTypes } from '#shared/types/error.ts'\n\ninterface ErrorMessages {\n  notFound?: string\n  forbidden?: string\n}\n\nexport const useErrorHandler = () => {\n  const router = useRouter()\n\n  const createQueryErrorHandler = (messages: ErrorMessages) => {\n    return (errorHandler: GraphQLHandlerError) => {\n      let title: string\n      let message: string | undefined\n      let messagePlaceholder: string[] = []\n      let statusCode: number\n\n      if (errorHandler.type === GraphQLErrorTypes.RecordNotFound) {\n        title = __('Not Found')\n        message = messages.notFound\n        statusCode = ErrorStatusCodes.NotFound\n      } else if (errorHandler.type === GraphQLErrorTypes.Forbidden) {\n        title = __('Forbidden')\n        message = messages.forbidden\n        statusCode = ErrorStatusCodes.Forbidden\n      } else if (errorHandler.type !== GraphQLErrorTypes.NotAuthorized) {\n        title = __('Internal Error')\n        message = errorHandler.message\n          ? __('Something went wrong. Received message: %s')\n          : __('Something went wrong.')\n        messagePlaceholder = errorHandler.message ? [errorHandler.message] : []\n        statusCode = ErrorStatusCodes.InternalError\n      } else {\n        return true\n      }\n      redirectToError(router, {\n        title,\n        message,\n        messagePlaceholder,\n        statusCode,\n      })\n      // don't show the notification\n      return false\n    }\n  }\n\n  return {\n    createQueryErrorHandler,\n  }\n}\n"],"names":["useErrorHandler","router","useRouter","messages","errorHandler","title","message","messagePlaceholder","statusCode","GraphQLErrorTypes","ErrorStatusCodes","redirectToError"],"mappings":"iJAaO,MAAMA,EAAkB,IAAM,CACnC,MAAMC,EAASC,IAsCR,MAAA,CACL,wBArC+BC,GACvBC,GAAsC,CACxC,IAAAC,EACAC,EACAC,EAA+B,CAAA,EAC/BC,EAEA,GAAAJ,EAAa,OAASK,EAAkB,eAC1CJ,EAAQ,GAAG,WAAW,EACtBC,EAAUH,EAAS,SACnBK,EAAaE,EAAiB,iBACrBN,EAAa,OAASK,EAAkB,UACjDJ,EAAQ,GAAG,WAAW,EACtBC,EAAUH,EAAS,UACnBK,EAAaE,EAAiB,kBACrBN,EAAa,OAASK,EAAkB,cACjDJ,EAAQ,GAAG,gBAAgB,EAC3BC,EAAUF,EAAa,QACnB,GAAG,4CAA4C,EAC/C,GAAG,uBAAuB,EAC9BG,EAAqBH,EAAa,QAAU,CAACA,EAAa,OAAO,EAAI,GACrEI,EAAaE,EAAiB,kBAEvB,OAAA,GAET,OAAAC,EAAgBV,EAAQ,CACtB,MAAAI,EACA,QAAAC,EACA,mBAAAC,EACA,WAAAC,CAAA,CACD,EAEM,EAAA,CAKT,CAEJ"}