{"version":3,"file":"LoginAfterAuth-CkS8ccHP.js","sources":["../../../../../app/frontend/apps/mobile/pages/authentication/views/LoginAfterAuth.vue"],"sourcesContent":["<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { ref, nextTick, watch } from 'vue'\nimport { onBeforeRouteLeave, useRouter } from 'vue-router'\n\nimport { useAfterAuthPlugins } from '../after-auth/composable/useAfterAuthPlugins.ts'\nimport LoginFooter from '../components/LoginFooter.vue'\nimport LoginHeader from '../components/LoginHeader.vue'\n\nimport type { RouteLocationRaw } from 'vue-router'\n\nconst { currentPlugin, data } = useAfterAuthPlugins()\n\nconst finished = ref(false)\n\nonBeforeRouteLeave(() => {\n  if (!finished.value) return false\n})\n\nwatch(\n  () => currentPlugin.value?.name,\n  (name) => {\n    if (name) {\n      finished.value = false\n    }\n  },\n)\n\nconst router = useRouter()\n\n// TODO 2023-05-17 Sheremet V.A. - call a query to get a possible next after auth handler\nconst redirect = async (route: RouteLocationRaw) => {\n  finished.value = true\n  await nextTick()\n  return router.replace(route)\n}\n</script>\n\n<template>\n  <div class=\"flex h-full min-h-screen flex-col items-center px-6 pt-6 pb-4\">\n    <main data-test-id=\"loginAfterAuth\" class=\"m-auto w-full max-w-md\">\n      <div class=\"flex grow flex-col justify-center\">\n        <div v-if=\"currentPlugin\" class=\"my-5 grow\">\n          <LoginHeader :title=\"currentPlugin.title\" />\n          <component\n            :is=\"currentPlugin.component\"\n            :data=\"data\"\n            @redirect=\"redirect\"\n          />\n        </div>\n      </div>\n    </main>\n    <LoginFooter />\n  </div>\n</template>\n"],"names":["currentPlugin","data","useAfterAuthPlugins","finished","ref","onBeforeRouteLeave","watch","_a","name","router","useRouter","redirect","route","nextTick"],"mappings":"k8BAYA,KAAM,CAAE,cAAAA,EAAe,KAAAC,CAAK,EAAIC,EAAoB,EAE9CC,EAAWC,EAAI,EAAK,EAE1BC,EAAmB,IAAM,CACnB,GAAA,CAACF,EAAS,MAAc,MAAA,EAAA,CAC7B,EAEDG,EACE,IAAM,OAAA,OAAAC,EAAAP,EAAc,QAAd,YAAAO,EAAqB,MAC1BC,GAAS,CACJA,IACFL,EAAS,MAAQ,GAErB,CAAA,EAGF,MAAMM,EAASC,IAGTC,EAAW,MAAOC,IACtBT,EAAS,MAAQ,GACjB,MAAMU,EAAS,EACRJ,EAAO,QAAQG,CAAK"}