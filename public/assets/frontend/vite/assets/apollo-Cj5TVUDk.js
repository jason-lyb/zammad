import{r as b,h as yt,i as Ke,g as ge,a as mt,s as B,o as _t,c as V,w as _,b as W,d as wt,u as Xe,n as $,e as re}from"./vue-oicRkvo0.js";import{v as kt,A as Pe,i as Ct,t as rt,d as ot,l as R,c as Ot,a as Rt,b as Et,r as St,I as Pt,e as oe,g as je,p as Mt,m as Tt,o as Nt,s as jt,f as xt,B as It,_ as zt,h as Ft,j as At,k as Lt}from"./vendor-C11O1Xx8.js";import{c as Qt,i as Oe,a as Dt}from"./lodash-pFOI14f-.js";var ye=(e=>(e.Warn="warn",e.Success="success",e.Error="error",e.Info="info",e))(ye||{});const xe=()=>kt(),A=b([]),$t=3e3,Ye=e=>{A.value=A.value.filter(t=>t.id!==e)},qt=()=>{A.value=[]},Ie=()=>({notify:n=>{let{id:r}=n;const{unique:o=!0}=n;r||(r=xe());const s={id:r,timeout:0,...n};return o&&(A.value=A.value.filter(u=>{const i=u.id===r;return i&&window.clearTimeout(u.timeout),!i})),A.value.push(s),s.persistent||(s.timeout=window.setTimeout(()=>{Ye(s.id)},s.durationMS||$t)),s.id},notifications:A,removeNotification:Ye,clearAllNotifications:qt,hasErrors:()=>A.value.some(n=>n.type===ye.Error)}),nr=Object.freeze(Object.defineProperty({__proto__:null,useNotifications:Ie},Symbol.toStringTag,{value:"Module"})),Ht=b(!1),Ut=()=>({loaded:Ht});var it=Symbol("default-apollo-client"),Bt=Symbol("apollo-clients");function Re(e,t){return e?e.default:t??void 0}function Ee(e,t){return e==null?void 0:e[t]}function me(e){let t;const n=Me;if(!yt())t=o=>o?Ee(n,o):Re(n,n.default);else{const o=Ke(Bt,null),s=Ke(it,null);t=u=>{if(u){const d=Ee(o,u);return d||Ee(n,u)}const i=Re(o,s);return i||Re(n,n.default)}}function r(o=e){const s=t(o);if(!s)throw new Error(`Apollo client with id ${o??"default"} not found. Use an app.runWithContext() or provideApolloClient() if you are outside of a component setup.`);return s}return{resolveClient:r,get client(){return r()}}}var Me={};function Vt(e){return Me={default:e},function(t){const n=t();return Me={},n}}function ne(e){return W(e)?e:typeof e=="function"?V(e):b(e)}function st(e){return W(e)?e:typeof e=="function"?V(e):e&&wt(e)}function G(){const e=[];function t(s){return e.push(s),{off:()=>n(s)}}function n(s){const u=e.indexOf(s);u!==-1&&e.splice(u,1)}function r(...s){for(const u of e)u(...s)}function o(){return e.length}return{on:t,off:n,trigger:r,getCount:o}}var M=typeof window>"u",U={queries:b(0),mutations:b(0),subscriptions:b(0),components:new Map};function Wt(){const e=ge();if(!e)return{};let t;return U.components.has(e)?t=U.components.get(e):(U.components.set(e,t={queries:b(0),mutations:b(0),subscriptions:b(0)}),re(()=>{U.components.delete(e)})),{tracking:t}}function ze(e,t){if(M)return;const{tracking:n}=Wt();_(e,(r,o)=>{if(o!=null&&r!==o){const s=r?1:-1;n&&(n[t].value+=s),U[t].value+=s}},{immediate:!0}),re(()=>{e.value&&(n&&n[t].value--,U[t].value--)})}function Gt(e){ze(e,"queries")}function Jt(e){ze(e,"mutations")}function Kt(e){ze(e,"subscriptions")}function Fe(e){return e instanceof Error?Ct(e)?e:new Pe({networkError:e,errorMessage:e.message}):new Pe({networkError:Object.assign(new Error,{originalError:e}),errorMessage:String(e)})}function Xt(e){return new Pe({graphQLErrors:e,errorMessage:`GraphQL response contains errors: ${e.map(t=>t.message).join(" | ")}`})}function rr(e,t,n){return lt(e,t,n)}function lt(e,t,n={},r=!1){var o;const s=ge(),u=mt(),i=b(),d=ne(e),h=ne(t),m=st(n),y=B(),w=G(),f=B(null),C=G(),g=b(!1);s&&Gt(g);const E=b();let N,J=!1,L,j;const Q=()=>{J=!0,N&&N()},K=l=>{j=l,L&&L(l)},z=()=>{N=void 0,L=void 0,J=!1,j=void 0};u&&((o=_t)==null||o(()=>{var l;if(!(!q.value||M&&((l=i.value)==null?void 0:l.prefetch)===!1))return new Promise((c,p)=>{N=()=>{z(),c()},L=k=>{z(),p(k)},J?N():j&&L(j)}).finally(Z)}));const{resolveClient:X}=me();function F(){var l;return X((l=i.value)==null?void 0:l.clientId)}const a=B();let x,S=!1,P=!1,_e=!0;function D(){var l,c,p,k,H;if(S||!q.value||M&&((l=i.value)==null?void 0:l.prefetch)===!1||!ke){Q();return}M&&(Ve(d.value),Ge(h.value),Be(Xe(m))),S=!0,f.value=null,g.value=!0;const fe=F();if(a.value=fe.watchQuery({query:ke,variables:ce??{},...i.value,...M&&((c=i.value)==null?void 0:c.fetchPolicy)!=="no-cache"?{fetchPolicy:"network-only"}:{}}),v(),!M&&(_e||!((p=i.value)!=null&&p.keepPreviousResult))&&(((k=i.value)==null?void 0:k.fetchPolicy)!=="no-cache"||i.value.notifyOnNetworkStatusChange)){const O=a.value.getCurrentResult(!1);!O.loading||O.partial||(H=i.value)!=null&&H.notifyOnNetworkStatusChange?(Y(O),P=!O.loading):O.error&&(De(O.error),P=!0)}if(!M)for(const O of te)Je(O);_e=!1}function v(){x&&!x.closed||a.value&&(P=!1,x=a.value.subscribe({next:Y,error:De}))}function I(){var l,c,p,k;const H=X((l=i.value)==null?void 0:l.clientId);return((c=i.value)==null?void 0:c.errorPolicy)||((k=(p=H.defaultOptions)==null?void 0:p.watchQuery)==null?void 0:k.errorPolicy)}function Y(l){var c;if(P){P=!1;return}f.value=null,se(l);const p=I();p&&p==="all"&&!l.error&&((c=l.errors)!=null&&c.length)&&$e(Xt(l.errors)),Q()}function se(l){var c,p;y.value=l.data&&Object.keys(l.data).length===0?l.error&&!((c=i.value)!=null&&c.returnPartialData)&&((p=i.value)==null?void 0:p.errorPolicy)==="none"?void 0:y.value:l.data,g.value=l.loading,E.value=l.networkStatus,$(()=>{w.trigger(l,{client:F()})})}function De(l){if(P){P=!1;return}const c=Fe(l),p=I();p&&p!=="none"&&se(a.value.getCurrentResult()),$e(c),K(c),dt()}function $e(l){f.value=l,g.value=!1,E.value=8,$(()=>{C.trigger(l,{client:F()})})}function dt(){if(!a.value)return;const l=a.value.getLastError(),c=a.value.getLastResult();a.value.resetLastResults(),v(),Object.assign(a.value,{lastError:l,lastResult:c})}let we=[];function Z(){Q(),S&&(S=!1,g.value=!1,we.forEach(l=>l()),we=[],a.value&&(a.value.stopPolling(),a.value=null),x&&(x.unsubscribe(),x=void 0))}let le=!1;function ue(){!S||le||(le=!0,$(()=>{S&&(Z(),D()),le=!1}))}let ee,qe=!1;function He(){var l,c;i.value?((l=i.value)!=null&&l.throttle?ee=rt(i.value.throttle,ue):(c=i.value)!=null&&c.debounce?ee=ot(i.value.debounce,ue):ee=ue,qe=!0):ee=ue}function ae(){!S||le||(qe||He(),ee())}let ke=d.value;const Ue=b(r),vt=V(()=>!i.value||i.value.enabled==null||i.value.enabled),q=V(()=>vt.value&&!Ue.value&&!!d.value);_(()=>Xe(m),Be,{deep:!0,immediate:!0});function Be(l){i.value&&(i.value.throttle!==l.throttle||i.value.debounce!==l.debounce)&&He(),i.value=l,ae()}_(d,Ve);function Ve(l){ke=l,ae()}let ce,We;_(()=>{if(q.value)return h.value},Ge,{deep:!0,immediate:!0});function Ge(l){const c=JSON.stringify([l,q.value]);c!==We&&(ce=l,ae()),We=c}function pt(l=void 0){if(a.value)return l&&(ce=l),f.value=null,g.value=!0,a.value.refetch(l).then(c=>{var p;const k=(p=a.value)==null?void 0:p.getCurrentResult();return k&&se(k),c})}function ht(l){a.value&&a.value.updateQuery(l)}function bt(l){if(a.value)return f.value=null,g.value=!0,a.value.fetchMore(l).then(c=>{var p;const k=(p=a.value)==null?void 0:p.getCurrentResult();return k&&se(k),c})}const te=[];function gt(l){if(M)return;const c=ne(l);_(c,(p,k,H)=>{const fe=te.findIndex(Ce=>Ce.options===k);fe!==-1&&te.splice(fe,1);const O={options:p,unsubscribeFns:[]};te.push(O),Je(O),H(()=>{O.unsubscribeFns.forEach(Ce=>Ce()),O.unsubscribeFns=[]})},{immediate:!0})}function Je(l){if(!S)return;if(!a.value)throw new Error("Query is not defined");const c=a.value.subscribeToMore(l.options);we.push(c),l.unsubscribeFns.push(c)}return _(q,l=>{l?$(()=>{D()}):Z()}),q.value&&D(),s?re(()=>{Z(),te.length=0}):console.warn("[Vue apollo] useQuery() is called outside of an active effect scope and the query will not be automatically stopped."),{result:y,loading:g,networkStatus:E,error:f,start:D,stop:Z,restart:ae,forceDisabled:Ue,document:d,variables:h,options:m,query:a,refetch:pt,fetchMore:bt,subscribeToMore:gt,updateQuery:ht,onResult:w.on,onError:C.on}}function or(e,t,n){const r=lt(e,t,n,!0);function o(s,u,i){return s&&(r.document.value=s),u&&(r.variables.value=u),i&&Object.assign(W(r.options)?r.options.value:r.options,i),r.forceDisabled.value?(r.forceDisabled.value=!1,M&&r.start(),new Promise((h,m)=>{const{off:y}=r.onResult(f=>{f.loading||(h(f.data),y(),w())}),{off:w}=r.onError(f=>{m(f),y(),w()})})):!1}return{...r,load:o}}function ir(e,t={}){const n=ge(),r=b(!1);n&&Jt(r);const o=B(null),s=b(!1),u=G(),i=G(),{resolveClient:d}=me();async function h(m,y={}){let w;typeof e=="function"?w=e():W(e)?w=e.value:w=e;let f;typeof t=="function"?f=t():W(t)?f=t.value:f=t;const C=d(f.clientId);o.value=null,r.value=!0,s.value=!0;try{const g=await C.mutate({mutation:w,...f,...y,variables:m??f.variables?{...f.variables,...m}:void 0});return r.value=!1,await $(),u.trigger(g,{client:C}),g}catch(g){const E=Fe(g);if(o.value=E,r.value=!1,i.trigger(E,{client:C}),f.throws==="always"||f.throws!=="never"&&!i.getCount())throw E}return null}return n&&re(()=>{r.value=!1}),{mutate:h,loading:r,error:o,called:s,onDone:u.on,onError:i.on}}function sr(e,t=void 0,n={}){const r=ge(),o=ne(e),s=ne(t),u=st(n),i=B(),d=G(),h=B(null),m=G(),y=b(!1);r&&Kt(y);const{resolveClient:w}=me(),f=b(null);let C=null,g=!1;function E(){var v;return w((v=a.value)==null?void 0:v.clientId)}function N(){if(g||!D.value||M)return;g=!0,y.value=!0;const v=E();f.value=v.subscribe({query:x,variables:S,...a.value}),C=f.value.subscribe({next:J,error:L})}function J(v){i.value=v.data,y.value=!1,d.trigger(v,{client:E()})}function L(v){const I=Fe(v);h.value=I,y.value=!1,m.trigger(I,{client:E()})}function j(){g&&(g=!1,y.value=!1,f.value&&(f.value=null),C&&(C.unsubscribe(),C=null))}let Q=!1;function K(){!g||Q||(Q=!0,$(()=>{g&&(j(),N()),Q=!1}))}let z;function X(){var v,I;(v=a.value)!=null&&v.throttle?z=rt(a.value.throttle,K):(I=a.value)!=null&&I.debounce?z=ot(a.value.debounce,K):z=K}function F(){z||X(),z()}const a=b();_(()=>W(u)?u.value:u,v=>{a.value&&(a.value.throttle!==v.throttle||a.value.debounce!==v.debounce)&&X(),a.value=v,F()},{deep:!0,immediate:!0});let x;_(o,v=>{x=v,F()},{immediate:!0});let S,P;_(s,(v,I)=>{const Y=JSON.stringify(v);Y!==P&&(S=v,F()),P=Y},{deep:!0,immediate:!0});const D=V(()=>!a.value||a.value.enabled==null||a.value.enabled);return _(D,v=>{v?N():j()},{immediate:!0}),r?re(j):console.warn("[Vue apollo] useSubscription() is called outside of an active effect scope and the subscription will not be automatically stopped."),{result:i,loading:y,error:h,start:N,stop:j,restart:F,document:o,variables:s,options:u,subscription:f,onResult:d.on,onError:m.on}}var T=(e=>(e.UnknownError="Exceptions::UnknownError",e.NetworkError="Exceptions::NetworkError",e.Forbidden="Exceptions::Forbidden",e.RecordNotFound="ActiveRecord::RecordNotFound",e.NotAuthorized="Exceptions::NotAuthorized",e))(T||{}),Yt=(e=>(e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.InternalError=500]="InternalError",e))(Yt||{});class Ae{constructor(t,n){this.baseHandlerOptions={errorShowNotification:!0,errorNotificationMessage:"",errorNotificationType:ye.Error},this.operationResult=t,this.handlerOptions=this.mergedHandlerOptions(n),this.handlerId=xe(),this.initialize()}initialize(){this.operationResult.onError(t=>{this.handleError(t)})}loading(){return this.operationResult.loading}operationError(){return this.operationResult.error}onError(t){this.operationResult.onError(t)}handleError(t){const n=this.handlerOptions;let r=n.errorShowNotification;const{graphQLErrors:o,networkError:s}=t;let u;if(o.length>0){const{message:i,extensions:d}=o[0];let h=(d==null?void 0:d.type)||T.UnknownError;Object.values(T).includes(h)||(h=T.UnknownError),u={type:h,message:i}}else s?u={type:T.NetworkError}:u={type:T.UnknownError};if(u.type===T.NotAuthorized&&(r=!1),n.errorCallback){const i=n.errorCallback(u);typeof i=="boolean"&&(r=i)}r&&Ie().notify({id:this.handlerId,message:this.errorNotificationMessage(u.type,u.message),type:n.errorNotificationType})}mergedHandlerOptions(t){return Object.assign(this.baseHandlerOptions,t)}errorNotificationMessage(t,n){const r=__("An error occured during the operation."),o=t===T.UnknownError||!n?r:n;return this.handlerOptions.errorNotificationMessage||o}}class lr extends Ae{constructor(){super(...arguments),this.lastCancel=null}cancel(){var t;(t=this.lastCancel)==null||t.call(this)}async query(t={}){const{options:n,document:{value:r}}=this.operationResult;this.cancel();const{client:o}=me(),s=typeof AbortController<"u"?new AbortController:null;this.lastCancel=()=>s==null?void 0:s.abort();const{fetchPolicy:u,...i}="value"in n?n.value:n,d=t.fetchPolicy||(u!=="cache-and-network"?u:void 0);try{return await o.query({...i,...t,fetchPolicy:d,query:r,context:{...i.context,...t.context,fetchOptions:{signal:s==null?void 0:s.signal}}})}catch(h){return{data:null,error:h}}finally{this.lastCancel=null}}options(){return this.operationResult.options}result(){return this.operationResult.result}watchQuery(){return this.operationResult.query}subscribeToMore(t){return this.operationResult.subscribeToMore(t)}fetchMore(t){return new Promise((n,r)=>{const o=this.operationResult.fetchMore(t);if(!o){n(null);return}o.then(s=>{n(s.data)}).catch(()=>{r(this.operationError().value)})})}refetch(t){return new Promise((n,r)=>{const o=this.operationResult.refetch(t);if(!o){n({data:null});return}o.then(s=>{n({data:s.data})}).catch(()=>{r(this.operationError().value)})})}load(t,n){const r=this.operationResult;if(typeof r.load!="function")return;const o=r.load(void 0,t,n);o instanceof Promise&&o.catch(()=>{})}isFirstRun(){return this.operationResult.forceDisabled.value}start(){this.operationResult.start()}stop(){this.operationResult.stop()}abort(){this.operationResult.stop(),this.operationResult.start()}watchOnceOnResult(t){let n=null;n=_(this.result(),r=>{!n||!r||(t(r),n())},{immediate:!0})}watchOnResult(t){return _(this.result(),n=>{n&&t(n)},{immediate:!0})}onResult(t,n){if(n){this.watchOnceOnResult(()=>{$(()=>{this.operationResult.onResult(t)})});return}this.operationResult.onResult(t)}}class Zt extends Error{constructor(t,n){super(),this.userErrorId=n||xe(),this.errors=t,this.generalErrors=t.filter(r=>!r.field).map(r=>r.message),this.fieldErrors=t.filter(r=>r.field),Object.setPrototypeOf(this,new.target.prototype)}getFirstErrorMessage(){return this.errors[0].message}getFirstErrorException(){return this.errors[0].exception}getFieldErrorList(){return this.fieldErrors.reduce((t,n)=>(t[n.field]=n.message,t),{})}}class ur extends Ae{async send(t){return new Promise((n,r)=>{this.operationResult.mutate(t).then(o=>{if(!o)return r(this.operationError().value);if(o.data){const{errors:s}=Object.values(o.data)[0];if(s){const u=new Zt(s,this.handlerId);return r(u)}}return n(o.data||null)})})}called(){return this.operationResult.called}}class ar extends Ae{constructor(){super(...arguments),this.subscribed=!1}options(){return this.operationResult.options}start(){this.operationResult.start()}stop(){this.operationResult.stop()}result(){return this.operationResult.result}onResult(t){this.operationResult.onResult(t)}async onSubscribed(){return new Promise((t,n)=>{let r,o;const s=()=>{o(),r()};o=_(this.result(),u=>(this.subscribed=!0,s(),t(u||null))),r=_(this.operationError(),u=>(s(),n(u)))})}watchOnResult(t){return _(this.result(),n=>{n&&t(n)},{immediate:!0})}}R.setDefaultLevel(R.levels.INFO);window.setLogLevel=(e,t=!0)=>R.setLevel(e,t);Rt.logger=R;Et.enabled=!0;const pe=Ot(),en=()=>(pe.connection.reopen(),new Promise((e,t)=>{const n=Date.now(),r=()=>{pe.connection.isOpen()?e():Date.now()-n>1e4?t(new Error("failed to reconnect")):setTimeout(r,100)};r()})),he=b(!0),Te=b(!1),{loaded:tn}=Ut(),Ze=()=>!tn.value||pe.connection.isOpen(),nn=1e3,rn=2e3;let de=null,ve=null;const on=()=>{de&&window.clearTimeout(de),de=null},et=()=>{ve&&window.clearInterval(ve),ve=null},ut=()=>{et(),ve=window.setInterval(()=>{if(Ze()){he.value=!0;return}et(),on(),de=window.setTimeout(()=>{he.value=Ze(),ut()},rn)},nn)};ut();let Se;const Le=b(!0),sn=V(()=>(Te.value||he.value)&&Le.value),tt=Ie();_(()=>sn.value,e=>{if(e){if(!Se)return;R.debug("Application connection just came up."),tt.removeNotification(Se)}else R.debug("Application connection just went down."),Se=tt.notify({id:"connection-lost",message:__("The connection to the server was lost."),type:ye.Error,persistent:!0})});const ln=()=>{Le.value=!0},un=()=>{Le.value=!1},cr=()=>{Te.value=!0,en().then(()=>{he.value=!0}).finally(()=>{Te.value=!1})};function Qe(e,t,n){var r,o;return e.typePolicies||(e.typePolicies={}),(r=e.typePolicies).Query||(r.Query={}),(o=e.typePolicies.Query).fields||(o.fields={}),e.typePolicies.Query.fields[t]=St(n),e}function an(e){return Qe(e,"ticketArticles",["ticket","first"])}const cn=Object.freeze(Object.defineProperty({__proto__:null,default:an},Symbol.toStringTag,{value:"Module"}));function ie(e,t,n){var r,o;return e.typePolicies||(e.typePolicies={}),(r=e.typePolicies).Query||(r.Query={}),(o=e.typePolicies.Query).fields||(o.fields={}),e.typePolicies.Query.fields[t]={keyArgs:n,merge(s,u){return u}},e}function fn(e){return ie(e,"checklistTemplates")}const dn=Object.freeze(Object.defineProperty({__proto__:null,default:fn},Symbol.toStringTag,{value:"Module"}));function vn(e){return Qe(e,"mentions",["first"])}const pn=Object.freeze(Object.defineProperty({__proto__:null,default:vn},Symbol.toStringTag,{value:"Module"}));function hn(e){return ie(e,"onlineNotifications",["onlineNotifications"])}const bn=Object.freeze(Object.defineProperty({__proto__:null,default:hn},Symbol.toStringTag,{value:"Module"}));function gn(e){return ie(e,"publicLinks")}const yn=Object.freeze(Object.defineProperty({__proto__:null,default:gn},Symbol.toStringTag,{value:"Module"}));function at(e,t,n){var r;const o={};return n.forEach(s=>{o[s]={merge:(u,i)=>i}}),e.typePolicies||(e.typePolicies={}),(r=e.typePolicies)[t]||(r[t]={}),e.typePolicies[t].fields=o,e}function mn(e){return at(e,"Checklist",["items"])}const _n=Object.freeze(Object.defineProperty({__proto__:null,default:mn},Symbol.toStringTag,{value:"Module"}));function wn(e){return at(e,"Overview",["viewColumns","orderColumns"])}const kn=Object.freeze(Object.defineProperty({__proto__:null,default:wn},Symbol.toStringTag,{value:"Module"}));function Cn(e){return ie(e,"ticketOverviews")}const On=Object.freeze(Object.defineProperty({__proto__:null,default:Cn},Symbol.toStringTag,{value:"Module"}));function Rn(e){return Qe(e,"ticketsByOverview",["overviewId","orderBy","orderDirection"])}const En=Object.freeze(Object.defineProperty({__proto__:null,default:Rn},Symbol.toStringTag,{value:"Module"}));function Sn(e){return ie(e,"userCurrentTicketOverviews")}const Pn=Object.freeze(Object.defineProperty({__proto__:null,default:Sn},Symbol.toStringTag,{value:"Module"}));let Ne={};const Mn=Object.assign({"./cache/initializer/articles.ts":cn,"./cache/initializer/checklistTemplates.ts":dn,"./cache/initializer/mentions.ts":pn,"./cache/initializer/onlineNotifications.ts":bn,"./cache/initializer/publicLinks.ts":yn,"./cache/initializer/ticketChecklistItems.ts":_n,"./cache/initializer/ticketOverviews.ts":kn,"./cache/initializer/ticketOverviewsQuery.ts":On,"./cache/initializer/ticketsByOverviewQuery.ts":En,"./cache/initializer/userCurrentTicketOverviews.ts":Pn}),Tn=(e={})=>{const t=Object.assign(Mn,e);Object.values(t).forEach(n=>{const r=n.default;Ne=r(Ne)})},Nn=(e={})=>(Tn(e),new Pt(Ne)),jn=new oe((e,t)=>t(e).map(n=>(ln(),n))),nt=document.querySelector('meta[name="csrf-token"]'),xn=nt?nt.getAttribute("content"):null;let ct=null;const In=e=>{ct=e},zn=()=>ct||xn,Fn=new oe((e,t)=>t(e).map(n=>{const r=e.getContext();if(r.response){const o=r.response.headers.get("CSRF-Token");o&&In(o)}return n})),An=new oe((e,t)=>{if(R.getLevel()<R.levels.DEBUG)return t(e);const n=e.getContext(),r=je(e.query),o=r.kind==="OperationDefinition"?Qt(r.operation):null,s={printedDocument:Mt(e.query),document:e.query};return Oe(e.variables)||(s.variables=e.variables),Oe(n.headers)||(s.requestHeaders=n.headers),e.setContext({start:new Date}),R.debug(`[GraphQL - Request] - ${o} - ${e.operationName}:`,s),t(e).map(u=>{var w;const i=e.getContext(),d=new Date,h={};(w=i==null?void 0:i.response)!=null&&w.headers&&i.response.headers.forEach((f,C)=>{h[C]=f});const m=d.getTime()-i.start.getTime(),y={data:u};return Oe(h)||(y.responseHeaders=h),R.debug(`[GraphQL - Response] - ${o} - ${e.operationName} (took ${m}ms):`,Dt(y)),u})});function Ln(e){const t={logLevel:"error"},r=e.getContext().error||{};return Object.assign(t,r)}const Qn=Tt(),Dn=Nt(({graphQLErrors:e,networkError:t,operation:n,forward:r})=>{const o=Ln(n),s=[];if((t==null?void 0:t.name)==="AbortError")return r(n);e&&e.forEach(({message:u,extensions:i,path:d})=>{const{type:h,backtrace:m}={type:(i==null?void 0:i.type)||T.NetworkError,backtrace:i==null?void 0:i.backtrace};s.push(`[GraphQL error - ${h}]: ${u}, Path: ${d}`,m),n.operationName!=="session"&&h===T.NotAuthorized&&(Qn.emit("sessionInvalid"),R.warn("Session invalid, trigger logout and show login page."))}),t&&(s.push(`[Network error]: ${t}`),un()),o.logLevel!=="silent"&&R[o.logLevel](...s)}),$n=jt((e,{headers:t})=>({headers:{...t,"X-CSRF-Token":zn()}}));function qn(e){const t={active:!0},r=e.getContext().batch||{};return Object.assign(t,r)}function Hn(e){const t={active:!1},r=e.getContext().websocket||{};return Object.assign(t,r)}const ft={uri:"/graphql",credentials:"same-origin"},Un=xt(ft),Bn=new It({...ft,batchMax:5,batchInterval:20}),Vn=e=>{const t=je(e.query);return t.kind==="OperationDefinition"&&t.operation==="mutation"?!1:qn(e).active},Wn=oe.split(Vn,Bn,Un),Gn=e=>{const t=je(e.query),n=Hn(e);return!(t.kind==="OperationDefinition"&&t.operation==="subscription")&&!n.active},Jn=new zt({cable:pe}),Kn=oe.split(Gn,Wn,Jn),Xn=Ft([Fn,Dn,$n,An,jn,At(),Kn]);let be;const Yn=(e={})=>{const t=Nn(e);return be=new Lt({connectToDevTools:!1,link:Xn,cache:t,queryDeduplication:!0,defaultOptions:{watchQuery:{fetchPolicy:"cache-and-network",nextFetchPolicy(n){return n}}}}),be},fr=()=>be,dr=async()=>{await be.clearStore()};function vr(e,t,n){var r,o;return e.typePolicies||(e.typePolicies={}),(r=e.typePolicies).Query||(r.Query={}),(o=e.typePolicies.Query).fields||(o.fields={}),e.typePolicies.Query.fields[t]={read(s,{args:u,toReference:i}){if(!u)return;let{id:d}=u;if("id"in u||(d=u[t][`${t}Id`]),!!d)return i({__typename:n,id:d})}},e}const pr=(e,t={})=>{const n=Yn(t);e.provide(it,n),Vt(n)};export{Yt as E,T as G,ur as M,ye as N,lr as Q,ar as S,Zt as U,sr as a,Ut as b,Ie as c,or as d,ir as e,fr as f,xe as g,vr as h,Qe as i,pr as j,Qn as k,dr as l,zn as m,nr as n,ie as r,cr as t,rr as u};
//# sourceMappingURL=apollo-Cj5TVUDk.js.map
