import{_ as w}from"./overviewAttributes.api-C09LSZ8O.js";import{_ as V}from"./ObjectAttributes.vue_vue_type_script_setup_true_lang-B0DrxGTz.js";import{u as E}from"./useOnlineNotificationSeen-MT6qWa0p.js";import{u as O}from"./useUserDetail-C29_PwWz.js";import{u as B}from"./useErrorHandler-ZIzy1Mvt.js";import{_ as I}from"./CommonButtonGroup.vue_vue_type_script_setup_true_lang-BTHDtl8G.js";import{_ as L}from"./CommonLoader.vue_vue_type_script_setup_true_lang-BtrvaoyW.js";import{u as N,_ as S,a as j}from"./useUserTicketsCount-DMVUQWZC.js";import{_ as q}from"./CommonTicketStateList.vue_vue_type_script_setup_true_lang-BroMKQU9.js";import{u as H}from"./useHeader-B3UlgUtw.js";import{u as A}from"./useOrganizationTicketsCount-CWW16y9d.js";import{f as Q,t as M,c as s,r as R,a1 as F,u as t,m as i,p as Y,I as u,q as c,M as k,D as l,y as v,Q as G,E as m}from"./vue-oicRkvo0.js";import"./routes-CgLO9M4y.js";import"./vite-FJshFMF2.js";import"./vendor-C11O1Xx8.js";import"./commonjsHelpers-BosuxZz1.js";import"./apollo-Cj5TVUDk.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./useDisplayObjectAttributes-sspS-pHp.js";import"./seen.api-DLK-LLmy.js";import"./user.api-BwewaCks.js";import"./mobile-Bk4bKGxF.js";import"./pwa-THoW_3xc.js";import"./add.api-CxwFhgGn.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./CommonShowMoreButton.vue_vue_type_script_setup_true_lang-0Icksle5.js";import"./types-Cu-Nkl7K.js";const J={key:0,class:"px-4"},K={class:"flex flex-col items-center justify-center py-6"},P={class:"mt-2 line-clamp-3 text-center text-xl font-bold"},$e=Q({__name:"UserDetailView",props:{internalId:{}},setup(g){const b=g,{createQueryErrorHandler:y}=B(),z=y({notFound:__("User with specified ID was not found. Try checking the URL for errors."),forbidden:__("You have insufficient rights to view this user.")}),{user:e,userQuery:h,loading:p,objectAttributes:x,secondaryOrganizations:d,loadAllSecondaryOrganizations:D}=O(M(b,"internalId"),z);E(e);const{openEditUserDialog:U}=N();H({title:__("User"),backUrl:"/",actionTitle:__("Edit"),actionHidden:s(()=>e.value==null||!e.value.policy.update),refetch:s(()=>e.value!=null&&h.loading().value),onAction(){!e.value||!e.value.policy.update||U(e.value)}});const r=R("user"),f=s(()=>{var a;return(a=e.value)!=null&&a.organization?[{label:__("Their tickets"),value:"user",controls:"tab-user"},{label:__("Organization tickets"),value:"organization",controls:"tab-organization"}]:[]}),{getTicketData:$}=A(),{getTicketData:C}=j(),o=s(()=>{if(!e.value)return null;if(r.value==="user")return C(e.value);const{organization:a}=e.value;return a?$(a):null});return(a,n)=>{const T=F("CommonLink");return t(e)?(i(),Y("div",J,[u("div",K,[u("div",null,[c(w,{entity:t(e),size:"xl"},null,8,["entity"])]),u("div",P,k(t(e).fullname),1),t(e).organization?(i(),l(T,{key:0,link:`/organizations/${t(e).organization.internalId}`,class:"text-blue text-center text-base"},{default:v(()=>[G(k(t(e).organization.name),1)]),_:1},8,["link"])):m("",!0)]),c(V,{attributes:t(x),object:t(e),"skip-attributes":["firstname","lastname"]},null,8,["attributes","object"]),c(S,{organizations:t(d).array,"total-count":t(d).totalCount,"disable-show-more":t(p),label:a.__("Secondary organizations"),onShowMore:n[0]||(n[0]=_=>t(D)())},null,8,["organizations","total-count","disable-show-more","label"]),o.value?(i(),l(q,{key:0,id:`tab-${r.value}`,"create-link":o.value.createLink,"create-label":o.value.createLabel,counts:o.value.count,"tickets-link-query":o.value.query,role:"tabpanel","aria-live":"polite"},{"before-fields":v(()=>[f.value.length?(i(),l(I,{key:0,modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=_=>r.value=_),as:"tabs",class:"py-2",options:f.value},null,8,["modelValue","options"])):m("",!0)]),_:1},8,["id","create-link","create-label","counts","tickets-link-query"])):m("",!0)])):(i(),l(L,{key:1,loading:t(p)},null,8,["loading"]))}}});export{$e as default};
//# sourceMappingURL=UserDetailView-JJwUU-gz.js.map
