import{f as c,c as s,M as p,m as _,D as j,a1 as h,p as b,Q as f,J as A,y as $,H as E,u as S}from"./vue-oicRkvo0.js";import{aM as M,aN as B,aC as g,an as L,aL as C}from"./overviewAttributes.api-C09LSZ8O.js";import{q as y,i as D}from"./routes-CgLO9M4y.js";import{k as v}from"./lodash-pFOI14f-.js";const z=c({__name:"AttributeBoolean",props:{attribute:{},value:{type:Boolean},mode:{},config:{}},setup(e){const t=e,a=s(()=>{var o;const{true:i,false:r}=((o=t.attribute.dataOption)==null?void 0:o.options)||{};return t.value?i||__("yes"):r||__("no")}),n=s(()=>{const{translate:i=!0}=t.attribute.dataOption||{};return i});return(i,r)=>p(n.value?i.$t(a.value):a.value)}}),H={dataTypes:["boolean","active"],component:z},w=c({__name:"AttributeDate",props:{attribute:{},value:{},mode:{},config:{}},setup(e){return(t,a)=>(_(),j(M,{"date-time":t.value,type:t.attribute.dataType==="date"?"absolute":"configured","absolute-format":t.attribute.dataType},null,8,["date-time","type","absolute-format"]))}}),V={dataTypes:["date","datetime"],component:w},N=c({__name:"AttributeInput",props:{attribute:{},value:{},mode:{},config:{}},setup(e){const t=e,a=s(()=>typeof t.value=="object"&&t.value?t.value.value:t.value),n=s(()=>typeof t.value=="object"&&t.value?t.value.label:t.value),i=s(()=>{const{linktemplate:r,type:o}=t.attribute.dataOption||{};if(r)return null;const u=String(a.value);return o==="tel"?`tel:${B(u)}`:o==="url"?u:o==="email"?`mailto:${u}`:""});return(r,o)=>{var l,m;const u=h("CommonLink");return i.value?(_(),j(u,{key:1,class:E((m=(l=r.config)==null?void 0:l.classes)==null?void 0:m.link),external:r.attribute.dataOption.type!=="url","open-in-new-tab":"",link:i.value},{default:$(()=>[f(p(n.value),1)]),_:1},8,["class","external","link"])):(_(),b(A,{key:0},[f(p(n.value),1)],64))}}}),U={dataTypes:["input","integer","autocompletion_ajax_external_data_source","autocompletion_ajax","autocompletion_ajax_customer_organization","user_autocompletion"],component:N},F={name:y.Group,display:e=>(e.name||"").replace(/::/g," â€º ")},I={name:y.Organization,display:e=>e.name||""},P={name:"TicketPriority",display:e=>e.name||""},R={name:"TicketState",display:e=>e.name||""},q={name:y.User,display:e=>e.fullname||""},G=Object.assign({"./group/entity.ts":F,"./organization/entity.ts":I,"./ticket-priority/entity.ts":P,"./ticket-state/entity.ts":R,"./user/entity.ts":q}),J=Object.values(G),T=v(J,"name"),Q=e=>{if(!T[e])throw new Error(`Entity "${e}" not found`);return T[e]},k=(e,t,a,n)=>{var i;if((i=n.dataOption)!=null&&i.relation){const r=n.dataOption.relation,o=n.dataOption.belongs_to||g(r),u=Q(r),l=t[o];if(u&&l)return"edges"in l?L(l).map(m=>u.display(m)).join(", "):u.display(l)}return e in a?a[e].value:e in t?t[e]:t[g(e)]},K=e=>Array.isArray(e)?e.length===0:e&&typeof e=="object"?Object.keys(e).length===0:e==null||e==="",O=(e,t)=>{const a=t[e];return(a==null?void 0:a.renderedLink)||null},d=(e,t)=>{var a;return t?(a=e.dataOption)!=null&&a.translate?D.t(t):t:""},W=c({__name:"AttributeMultiSelect",props:{attribute:{},value:{},mode:{},config:{}},setup(e){const t=e,a=s(()=>t.attribute.dataType==="multi_tree_select"?t.value.map(n=>n.split("::").map(i=>d(t.attribute,i)).join("::")).join(", "):t.value.map(n=>{var r;const i=((r=t.attribute.dataOption.historical_options)==null?void 0:r[n])??n;return d(t.attribute,i)}).join(", "));return(n,i)=>p(a.value)}}),X={dataTypes:["multiselect","multi_tree_select"],component:W},Y=["innerHTML"],Z=c({__name:"AttributeRichtext",props:{attribute:{},value:{},mode:{},config:{}},setup(e){return(t,a)=>(_(),b("div",{innerHTML:t.value},null,8,Y))}}),tt={dataTypes:["richtext"],component:Z},et=c({__name:"AttributeSingleSelect",props:{attribute:{},value:{},mode:{},config:{}},setup(e){const t=e,a=s(()=>{var i;if(t.attribute.dataType==="tree_select")return t.value.split("::").map(r=>d(t.attribute,r)).join("::");const n=((i=t.attribute.dataOption.historical_options)==null?void 0:i[t.value])??t.value;return d(t.attribute,n)});return(n,i)=>p(a.value)}}),nt={dataTypes:["tree_select","select"],component:et},at=["innerHTML"],it=c({__name:"AttributeTextarea",props:{attribute:{},value:{},mode:{},config:{}},setup(e){return(t,a)=>t.mode==="view"?(_(),b("div",{key:0,innerHTML:S(C)(t.value)},null,8,at)):(_(),b(A,{key:1},[f(p(t.value),1)],64))}}),rt={dataTypes:["textarea"],component:it},ot=c({__name:"AttributeTimeUnit",props:{attribute:{},value:{},mode:{},config:{}},setup(e){return(t,a)=>{var n;return p((n=t.value)==null?void 0:n.toFixed(2))}}}),st={dataTypes:["time_unit"],component:ot},ut=Object.assign({"./attributes/AttributeBoolean/index.ts":H,"./attributes/AttributeDate/index.ts":V,"./attributes/AttributeInput/index.ts":U,"./attributes/AttributeMultiSelect/index.ts":X,"./attributes/AttributeRichtext/index.ts":tt,"./attributes/AttributeSingleSelect/index.ts":nt,"./attributes/AttributeTextarea/index.ts":rt,"./attributes/AttributeTimeUnit/index.ts":st}),x=Object.values(ut).reduce((e,t)=>(t.dataTypes.forEach(a=>{e[a]=t.component}),e),{}),mt=e=>{const t=s(()=>v(e.object.objectAttributeValues||{},"attribute.name"));return{field:s(()=>{const{attribute:n,object:i}=e;return{attribute:n,component:x[n.dataType],value:k(n.name,i,t.value,n),link:O(n.name,t.value)}})}},bt=e=>{const t=s(()=>v(e.object.objectAttributeValues||{},"attribute.name"));return{fields:s(()=>e.attributes.filter(n=>!n.isStatic).map(n=>({attribute:n,component:x[n.dataType],value:k(n.name,e.object,t.value,n),link:O(n.name,t.value)})).filter(({attribute:n,value:i,component:r})=>{var o;return!r||K(i)?!1:!((o=e.skipAttributes)!=null&&o.includes(n.name))}))}};export{bt as a,K as i,mt as u};
//# sourceMappingURL=useDisplayObjectAttributes-sspS-pHp.js.map
