import{r as x,c as p,f as K,a7 as ee,al as te,l as re,k as oe,m as S,D as ae,q as se,y as ne,U as le,V as ue,p as P,I as V,z as j,H as q,u as $,E as D,C as H,T as ie,G as ce,n as U,aj as pe,ax as ve,af as fe,s as L,aP as de,w as X}from"./vue-oicRkvo0.js";import{au as me,u as he,s as we,av as ge,X as be}from"./overviewAttributes.api-C09LSZ8O.js";import{b as Te,t as F,c as M,a as Oe,X as T}from"./routes-CgLO9M4y.js";import{n as Ee,q as Ae}from"./vendor-C11O1Xx8.js";import{e as Se,M as $e}from"./apollo-Cj5TVUDk.js";const ye=()=>({durations:{normal:me().durations.normal},isTestMode:!1}),G=x(new Set),ke=()=>({isOpened:p(()=>{for(const n of G.value)if(n.isOpen.value)return!0;return!1}),instances:G}),Pe=["id","aria-labelledby"],xe={class:"w-full overflow-y-auto"},Re=["id","aria-labelledby"],Ce={class:"w-full overflow-y-auto"},g=2,De=16,Fe=30,Me=6,_e=16,Ue=K({inheritAttrs:!1,__name:"CommonPopover",props:{owner:{},orientation:{default:"autoVertical"},placement:{default:"start"},hideArrow:{type:Boolean},id:{},noAutoFocus:{type:Boolean},persistent:{type:Boolean}},emits:["open","close"],setup(s,{expose:n,emit:O}){const r=s,E=O,v=ee("popover"),l=x(!1),t=x(),u=te(),A=p(()=>!t.value||!u.height?!1:t.value.y>u.height.value/2),a=p(()=>!t.value||!u.width?!1:t.value.x<u.width.value/2),c=Te(),d=p(()=>{var e;if(r.orientation==="autoVertical")return A.value?"top":"bottom";if(r.orientation==="autoHorizontal")return a.value?"right":"left";if(((e=c.localeData)==null?void 0:e.dir)===M.Rtl){if(r.orientation==="left")return"right";if(r.orientation==="right")return"left"}return r.orientation}),f=p(()=>d.value==="top"||d.value==="bottom"),i=p(()=>{var e,o;return r.placement==="arrowStart"||r.placement==="arrowEnd"?((e=c.localeData)==null?void 0:e.dir)===M.Rtl?r.placement==="arrowStart"?"arrowEnd":"arrowStart":r.placement:f.value?((o=c.localeData)==null?void 0:o.dir)===M.Rtl?r.placement==="start"?"end":r.placement==="end"||r.hideArrow?"start":"arrowStart":r.placement:A.value?r.hideArrow?"end":"arrowEnd":r.hideArrow?"start":"arrowStart"}),z=p(()=>{if(!t.value)return{top:0,left:0,maxHeight:0};const e=A.value?t.value.top:u.height.value-t.value.bottom,o={maxHeight:`${f.value?e-24:e+34}px`},w=r.hideArrow?De:Fe,m=t.value.width/2-w;f.value?i.value==="start"?o.left=`${t.value.left-g}px`:i.value==="arrowStart"?o.left=`${t.value.left+m+g}px`:i.value==="arrowEnd"?o.right=`${u.width.value-t.value.left+m-t.value.width-g}px`:i.value==="end"&&(o.right=`${u.width.value-t.value.left-t.value.width-g}px`):f.value||(i.value==="start"?o.top=`${t.value.top-g}px`:i.value==="arrowStart"?o.top=`${t.value.bottom-t.value.height/2-w+g}px`:i.value==="arrowEnd"?o.bottom=`${u.height.value-t.value.bottom+t.value.height/2-w-g}px`:i.value==="end"&&(o.bottom=`${u.height.value-t.value.bottom-g}px`));const h=r.hideArrow?Me:_e;switch(d.value){case"top":o.bottom=`${u.height.value-t.value.top+h}px`;break;case"bottom":o.top=`${t.value.top+t.value.height+h}px`;break;case"left":o.right=`${u.width.value-t.value.left+h}px`;break;case"right":o.left=`${t.value.right+h}px`;break}return o}),N=p(()=>{const e={"-translate-x-1/2":f.value,"-translate-y-1/2":!f.value};switch(d.value){case"bottom":Object.assign(e,{"-top-[11px]":!0,"border-l-0 border-b-0":!0});break;case"top":Object.assign(e,{"-bottom-[11px]":!0,"border-r-0 border-t-0":!0});break;case"left":Object.assign(e,{"-right-[11px]":!0,"border-t-0 border-l-0":!0});break;case"right":Object.assign(e,{"-left-[11px]":!0,"border-b-0 border-r-0":!0});break}return f.value?i.value==="start"||i.value==="arrowStart"?e["left-7"]=!0:(i.value==="end"||i.value==="arrowEnd")&&(e["right-2"]=!0):f.value||(i.value==="start"||i.value==="arrowStart"?e["top-7"]=!0:(i.value==="end"||i.value==="arrowEnd")&&(e["bottom-2"]=!0)),e}),{moveNextFocusToTrap:Q}=he(v),{instances:R}=ke(),B=()=>{const e=r.owner;e&&"ariaExpanded"in e&&(e.ariaExpanded=l.value?"true":"false")};let b;const y=(e=!1)=>{l.value&&(l.value=!1,E("close"),b==null||b(),U(()=>{var o,w,m,h;!e&&r.owner&&("$el"in r.owner?(w=(o=r.owner.$el)==null?void 0:o.focus)==null||w.call(o):(h=(m=r.owner)==null?void 0:m.focus)==null||h.call(m)),B(),F.set("common-popover.closed")}))},I=()=>{l.value||(t.value=pe(r.owner),R.value.forEach(e=>{e.isOpen.value&&e.closePopover()}),l.value=!0,E("open"),b=ve("Escape",e=>{l.value&&(we(e),y())}),fe(v,()=>y(!0),{ignore:[r.owner]}),requestAnimationFrame(()=>{U(()=>{r.noAutoFocus||Q(),B(),F.set("common-popover.opened")})}))},Y=(e=!1)=>{l.value?y(e):I()},C={isOpen:p(()=>l.value),openPopover:I,closePopover:y,togglePopover:Y};R.value.add(C),re(()=>{R.value.delete(C),b==null||b()}),n(C);const{durations:Z}=ye(),k=ge();return oe(()=>{F.set(r.id?`common-popover.mounted-${r.id}`:"common-popover.mounted")}),(e,o)=>(S(),ae(ce,{to:"body"},[se(ie,{name:"fade",duration:$(Z).normal},{default:ne(()=>{var w,m,h,W;return[e.persistent?le((S(),P("div",H({key:0,id:e.id,ref:"popover",role:"region",class:["popover fixed z-50 flex",[$(k).base]],style:z.value,"aria-labelledby":e.owner&&"$el"in e.owner?(w=e.owner.$el)==null?void 0:w.id:(m=e.owner)==null?void 0:m.id},e.$attrs),[V("div",xe,[j(e.$slots,"default")]),e.hideArrow?D("",!0):(S(),P("div",{key:0,class:q(["absolute -z-10 -rotate-45 transform",[N.value,$(k).arrow]])},null,2))],16,Pe)),[[ue,l.value]]):l.value?(S(),P("div",H({key:1,id:e.id,ref:"popover",role:"region",class:["popover fixed z-50 flex",[$(k).base]],style:z.value,"aria-labelledby":e.owner&&"$el"in e.owner?(h=e.owner.$el)==null?void 0:h.id:(W=e.owner)==null?void 0:W.id},e.$attrs),[V("div",Ce,[j(e.$slots,"default")]),e.hideArrow?D("",!0):(S(),P("div",{key:0,class:q(["absolute -z-10 -rotate-45 transform",[N.value,$(k).arrow]])},null,2))],16,Re)):D("",!0)]}),_:3},8,["duration"])]))}}),Le=s=>{const n=L(),O=L(),r=p(()=>{var t;return(t=n.value)==null?void 0:t.isOpen});return{popover:n,popoverTarget:O,open:()=>{var t;(t=n.value)==null||t.openPopover()},close:()=>{var t;(t=n.value)==null||t.closePopover()},toggle:(t=!1)=>{var u;(u=n.value)==null||u.togglePopover(t)},isOpen:r}},ze=Ee`
    mutation userCurrentAppearance($theme: EnumAppearanceTheme!) {
  userCurrentAppearance(theme: $theme) {
    success
    errors {
      ...errors
    }
  }
}
    ${be}`;function Ne(s={}){return Se(ze,s)}const Be=()=>document.querySelector(":root"),J=()=>window.matchMedia("(prefers-color-scheme: dark)").matches?T.Dark:T.Light,Ie=s=>["dark","light"].includes(s)?s:J(),_=s=>{const n=Be();n.dataset.theme=s,n.style.colorScheme=s},Xe=Ae("theme",()=>{const s=Oe(),n=x(!1),O=new $e(Ne(),{errorNotificationMessage:__("The appearance could not be updated.")}),r=a=>{const c=Ie(a);_(c)},E=async a=>{var d,f;const c=(f=(d=s.user)==null?void 0:d.preferences)==null?void 0:f.theme;return s.setUserPreference("theme",a),O.send({theme:a}).catch(()=>{s.setUserPreference("theme",c)})},v=p(()=>{var a,c;return((c=(a=s.user)==null?void 0:a.preferences)==null?void 0:c.theme)||T.Auto}),l=de(),t=p(()=>v.value===T.Auto?l.value==="no-preference"?!1:l.value===T.Dark:v.value===T.Dark),u=async a=>{var c,d;try{if(a===((d=(c=s.user)==null?void 0:c.preferences)==null?void 0:d.theme)||n.value)return;n.value=!0,await E(a)}finally{n.value=!1}},A=()=>{if(v.value!=="auto")return _(v.value);const a=J();_(a)};return X(l,a=>{const c=v.value||a;r(c)}),X(()=>v.value,a=>{a&&r(a)}),{savingTheme:n,preferredColorScheme:l,currentTheme:v,isDarkMode:t,updateTheme:u,syncTheme:A}});export{Ue as _,ye as a,Xe as b,Le as u};
//# sourceMappingURL=theme-Bv2ClBzZ.js.map
