{"version":3,"file":"useEscalationState-Dv4jDro1.js","sources":["../../../../../app/frontend/shared/composables/useEscalationState.ts"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { computed, type ToRef, toValue } from 'vue'\n\nimport { useReactiveNow } from './useReactiveNow.ts'\n\nexport enum EscalationState {\n  Escalated = 'escalated',\n  Warning = 'warning',\n  None = 'none',\n}\n\nexport const useEscalationState = (\n  escalationAt: Readonly<ToRef<string | undefined | null>>,\n) => {\n  const reactiveNow = useReactiveNow()\n\n  return computed(() => {\n    const escalationString = toValue(escalationAt)\n\n    if (!escalationString) return EscalationState.None\n\n    const date = new Date(escalationString)\n    if (Number.isNaN(date.getTime())) return EscalationState.None\n\n    const diffSeconds = (reactiveNow.value.getTime() - date.getTime()) / 1000\n\n    // Escalation is in the past.\n    if (diffSeconds > -1) return EscalationState.Escalated\n\n    // Escalation is in the future.\n    return EscalationState.Warning\n  })\n}\n"],"names":["EscalationState","useEscalationState","escalationAt","reactiveNow","useReactiveNow","computed","escalationString","toValue","date"],"mappings":"sFAMY,IAAAA,GAAAA,IACVA,EAAA,UAAY,YACZA,EAAA,QAAU,UACVA,EAAA,KAAO,OAHGA,IAAAA,GAAA,CAAA,CAAA,EAMC,MAAAC,EACXC,GACG,CACH,MAAMC,EAAcC,IAEpB,OAAOC,EAAS,IAAM,CACd,MAAAC,EAAmBC,EAAQL,CAAY,EAEzC,GAAA,CAACI,EAAyB,MAAA,OAExB,MAAAE,EAAO,IAAI,KAAKF,CAAgB,EACtC,OAAI,OAAO,MAAME,EAAK,QAAS,CAAA,EAAU,QAEpBL,EAAY,MAAM,UAAYK,EAAK,QAAa,GAAA,IAGnD,GAAW,YAGtB,SAAA,CACR,CACH"}