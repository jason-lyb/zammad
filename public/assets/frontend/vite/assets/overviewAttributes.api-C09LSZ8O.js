const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FieldEditorInput-u_JTcf6d.js","assets/vue-oicRkvo0.js","assets/vendor-C11O1Xx8.js","assets/commonjsHelpers-BosuxZz1.js","assets/apollo-Cj5TVUDk.js","assets/lodash-pFOI14f-.js","assets/routes-CgLO9M4y.js","assets/vite-FJshFMF2.js","assets/theme-Bv2ClBzZ.js","assets/useColorPallet-BR2oNgrf.js","assets/utils-C-eON4SW.js","assets/formkit-5nol1GBe.js","assets/FieldEditorInput-CUo6CTIS.css"])))=>i.map(i=>d[i]);
import{f as j,c as p,r as R,a1 as ie,m as b,p as x,q as de,z as le,D as E,E as P,H as T,u as m,y as re,F as ge,a8 as bt,Q as Fe,M as ae,U as Ie,I as L,ay as ma,t as J,w as ee,a4 as va,a6 as ga,aw as ht,X as yt,l as ba,az as Yt,R as ce,aA as ha,K as Zt,k as _t,C as ye,aB as ya,as as _a,n as qe,aq as wa,W as ve,L as me,J as Ce,Y as Ca,a7 as Me,an as ka,x as Oe,av as lt,ac as Ta,ad as xa,b as Jt,d as We,i as Xt,aC as Aa,aD as $a,aE as Sa,aF as en,s as Fa,A as Ia,ap as Oa,ar as Ea,aG as za}from"./vue-oicRkvo0.js";import{e as G,i as c,a as _e,b as He,S as Pa,F as La,t as Re,q as X,j as ct,G as Ma,c as ja,O as Da,H as $e,I as et}from"./routes-CgLO9M4y.js";import{t as Ra,e as Ge,l as Ua,M as Ue,U as Ba,u as tn,Q as nn,g as Va,E as an,c as wt,a as rn,S as sn,N as on}from"./apollo-Cj5TVUDk.js";import{l as te,u as Na,n as W,y as qa,q as Ke,z as Wa,p as Ha}from"./vendor-C11O1Xx8.js";import{i as ln,k as Ga,a as Ct,f as Ka,g as Qa,h as Ya}from"./lodash-pFOI14f-.js";import{g as Za,c as Ee,a as Te,w as Ja,l as Xa,i as ei,b as Ot,p as ti,s as ni,o as ai,h as ii,m as ri,d as si,f as oi,j as cn,k as Et,n as kt,q as un,r as li,t as dn,u as ue,v as ci,x as ui,y as pn,z as fn,A as di,B as pi,C as fi,D as mi,E as vi,F as gi,G as bi,H as hi,I as yi,J as _i}from"./formkit-5nol1GBe.js";import{_ as wi}from"./vite-FJshFMF2.js";let mn;const wc=e=>{mn=e},se=()=>mn;let vn={base:"common-alert",danger:"common-alert-danger",info:"common-alert-info",success:"common-alert-success",warning:"common-alert-warning"};const Cc=e=>{vn=e},Ci=()=>vn,ki=["id"],Ti={key:0},xi=j({__name:"CommonAlert",props:{variant:{default:"info"},dismissible:{type:Boolean,default:!1},id:{}},setup(e){const t=e,n=p(()=>{switch(t.variant){case"success":return"common-alert-success";case"warning":return"common-alert-warning";case"danger":return"common-alert-danger";case"info":default:return"common-alert-info"}}),a=Ci(),i=R(!1);return(r,s)=>{const o=ie("CommonIcon");return i.value?P("",!0):(b(),x("div",{key:0,id:t.id,class:T(["gap-1.5 rounded-lg border-transparent p-2",[m(a).base,m(a)[t.variant]]]),role:"alert"},[de(o,{class:"mx-auto mt-0.5 md:mx-0",name:n.value,size:"tiny",decorative:""},null,8,["name"]),le(r.$slots,"default"),t.dismissible?(b(),x("div",Ti,[t.dismissible?(b(),E(o,{key:0,size:"tiny",decorative:"",name:"common-alert-dismiss",class:"mx-auto cursor-pointer md:mx-0",onClick:s[0]||(s[0]=u=>i.value=!0)})):P("",!0)])):P("",!0)],10,ki))}}});let gn={base:"common-badge",danger:"common-badge-danger",info:"common-badge-info",success:"common-badge-success",warning:"common-badge-warning",neutral:"common-badge-neutral",tertiary:"common-badge-tertiary",custom:"common-badge-custom"};const kc=e=>{gn=e},Ai=()=>gn,$i=j({__name:"CommonBadge",props:{variant:{default:"info"},size:{default:"small"},tag:{default:"span"},rounded:{type:Boolean}},setup(e){const t=e,n=p(()=>{switch(t.size){case"large":return"text-base";case"medium":return"text-sm";case"xs":return"text-[10px]";case"small":default:return"text-xs"}}),a=p(()=>{switch(t.size){case"large":return["px-4","py-2.5"];case"medium":return["px-3","py-2"];case"xs":return["px-1.5","py-0.5"];case"small":default:return["px-2","py-1"]}}),i=p(()=>{if(t.rounded)return"rounded-full";switch(t.size){case"large":return"rounded-xl";case"medium":return"rounded-lg";case"small":default:return"rounded-md"}}),r=Ai();return(s,o)=>(b(),E(ge(s.tag),{class:T(["cursor-default",[m(r).base,m(r)[t.variant],...a.value,n.value,i.value]])},{default:re(()=>[le(s.$slots,"default")]),_:3},8,["class"]))}}),Si={key:0},Fi=["datetime"],Ii=j({__name:"CommonDateTime",props:{dateTime:{},type:{default:"configured"},absoluteFormat:{default:"datetime"}},setup(e){const t=e,n=G(),a=p(()=>t.type!=="configured"?t.type:n.config.pretty_date_format==="relative"?"relative":"absolute"),i=p(()=>t.absoluteFormat==="date"?c.date(t.dateTime):c.dateTime(t.dateTime));return(r,s)=>{const o=bt("tooltip");return a.value==="absolute"?(b(),x("time",Si,[le(r.$slots,"prefix"),Fe(" "+ae(i.value),1)])):Ie((b(),x("time",{key:1,datetime:r.dateTime},[le(r.$slots,"prefix"),Fe(" "+ae(m(c).relativeDateTime(r.dateTime)),1)],8,Fi)),[[o,m(c).dateTime(r.dateTime)]])}}}),bn=e=>{const t={pulse:"animate-pulse",spin:"animate-spin",ping:"animate-ping",bounce:"animate-bounce"},n={xs:12,tiny:16,small:20,base:24,medium:32,large:48,xl:96},a=p(()=>{let r=`icon-${e.name}`;const s=e.animation||e.name==="spinner"&&"spin";return s&&(r+=` ${t[s]}`),r}),i=p(()=>e.fixedSize?e.fixedSize:{width:n[e.size],height:n[e.size]});return{iconClass:a,finalSize:i}},Oi=e=>{const{iconClass:t,finalSize:n}=bn({size:"medium",...e});return(0,String.raw)`
    <svg
      xmlns="http://www.w3.org/2000/svg"
      class="icon ${t.value} ${e.class||""} fill-current"
      width="${n.value.width}"
      height="${n.value.height}"
      ${!e.decorative&&`aria-label=${c.t(e.label||e.name)||""}`}
      ${e.decorative&&'aria-hidden="true"'||""}
    >
      <use href="#icon-${e.name}" />
    </svg>
  `},Ei=e=>{const t=[];for(const[n,a]of e){const i=n.match(/assets\/([\w-/]+)\.svg$/);if(!i)throw new Error(`Icon name not found for ${n}`);const r=i[1].replace(/\//,"-");t.push([r,a.default])}return t};let je=[],De={},hn={};const Tc=(e,t)=>{je=Ei(e),De={},hn=t;for(const[n]of je){const a=Oi({name:n,size:"base"});De[n]=a}return{icons:De,symbols:je}},yn=()=>({icons:De,symbols:je,aliases:hn}),zi=["width","height","aria-label","aria-hidden"],Pi=["href"],Li=j({__name:"CommonIcon",props:{size:{default:"medium"},fixedSize:{},name:{},label:{},decorative:{type:Boolean,default:!1},animation:{}},emits:["click"],setup(e,{emit:t}){const n=e,a=t,i=d=>{a("click",d)},{iconClass:r,finalSize:s}=bn(n),{icons:o,aliases:u}=yn(),l=p(()=>{const f=u[n.name]||n.name;return o[f]||te.warn(`Icon ${f} not found`),f});return(d,f)=>(b(),x("svg",{xmlns:"http://www.w3.org/2000/svg",class:T(["icon fill-current",m(r)]),width:m(s).width,height:m(s).height,"aria-label":d.decorative?void 0:d.$t(d.label||l.value),"aria-hidden":d.decorative,onClick:i},[L("use",{href:`#icon-${l.value}`},null,8,Pi)],10,zi))}}),Mi=j({__name:"CommonLabel",props:{size:{default:"medium"},iconColor:{},prefixIcon:{},suffixIcon:{},tag:{default:"span"}},setup(e){const t=e,n={xs:"text-[10px] leading-[10px]",small:"text-xs leading-snug",medium:"text-sm leading-snug",large:"text-base leading-snug",xl:"text-xl leading-snug"},a={xs:"xs",small:"xs",medium:"tiny",large:"small",xl:"base"};return(i,r)=>{const s=ie("CommonIcon");return b(),E(ge(i.tag),{class:T(["inline-flex items-center justify-start gap-1 text-gray-100 dark:text-neutral-400",n[t.size]])},{default:re(()=>[i.prefixIcon?(b(),E(s,{key:0,class:T(["shrink-0",i.iconColor]),size:a[t.size],name:i.prefixIcon,decorative:""},null,8,["size","name","class"])):P("",!0),le(i.$slots,"default"),i.suffixIcon?(b(),E(s,{key:1,class:T(["shrink-0",i.iconColor]),size:a[t.size],name:i.suffixIcon,decorative:""},null,8,["size","name","class"])):P("",!0)]),_:3},8,["class"])}}});let _n={base:"common-link"};const xc=e=>{_n=e},ji=()=>_n,ze=(e,t={})=>{const{preventDefault:n=!0,propagation:a=!0,immediatePropagation:i=!1}=t;n&&e.preventDefault(),a&&e.stopPropagation(),i&&e.stopImmediatePropagation()},Di=["href","target","rel"],Ri=j({__name:"CommonLink",props:{link:{},external:{type:Boolean,default:!1},internal:{type:Boolean,default:!1},restApi:{type:Boolean},disabled:{type:Boolean,default:!1},rel:{},target:{},openInNewTab:{type:Boolean,default:!1},replace:{type:Boolean,default:!1},activeClass:{default:"router-link-active"},exactActiveClass:{default:"router-link-exact-active"},size:{default:"large"}},emits:["click"],setup(e,{expose:t,emit:n}){const a=e,i=n,r=p(()=>{if(a.target)return a.target;if(a.openInNewTab)return"_blank"}),s=p(()=>{const{base:C}=ji();return a.disabled?`${C} pointer-events-none`:C}),o={xs:"text-[10px] leading-[10px]",small:"text-xs leading-snug",medium:"text-sm leading-snug",large:"text-base leading-snug",xl:"text-xl leading-snug"},{href:u,route:l,navigate:d,isActive:f,isExactActive:v}=ma({to:J(a,"link"),replace:J(a,"replace")}),w=p(()=>a.external||a.restApi?!1:a.internal?!0:l.value.fullPath.startsWith("/#")?!1:l.value.matched.length>0&&l.value.name!=="Error"),A=G(),g=p(()=>w.value?u.value:a.restApi?`${A.config.api_path}${a.link}`:a.link),h=C=>{if(a.disabled){ze(C,{immediatePropagation:!0});return}i("click",C),w.value&&d(C),!w.value&&a.link==="#"&&ze(C,{propagation:!1})};return t({isActive:f,isExactActive:v}),(C,O)=>(b(),x("a",{href:g.value,target:r.value,rel:C.rel,class:T([s.value,o[a.size],{[C.activeClass]:m(f),[C.exactActiveClass]:m(v)}]),onClick:h},[le(C.$slots,"default",{isActive:m(v),isExactActive:m(v)})],10,Di))}});function Ac(e){e.component("CommonAlert",xi),e.component("CommonIcon",Li),e.component("CommonLink",Ri),e.component("CommonDateTime",Ii),e.component("CommonLabel",Mi),e.component("CommonBadge",$i)}const Ui=e=>{const t=G(),{config:n}=Na(t);Object.defineProperty(e.config.globalProperties,"$c",{enumerable:!0,get:()=>m(n)})};function $c(e){e.config.globalProperties.i18n=c,e.config.globalProperties.$t=c.t.bind(c),e.use(Ui),e.config.globalProperties.__=window.__}let wn={durations:{normal:{enter:0,leave:0}}};const Sc=e=>{wn=e},Fc=()=>wn;function Ic(){const e=_e(),t=He(),n=G();ee(()=>n.loaded,()=>{ee(()=>e.id,()=>{Ra()}),ee(()=>e.user,(a,i)=>{var r,s,o;(!a||(r=i==null?void 0:i.preferences)!=null&&r.locale&&t.localeData&&((s=a.preferences)==null?void 0:s.locale)!==t.localeData.locale)&&t.setLocale((o=a==null?void 0:a.preferences)==null?void 0:o.locale)})})}const Bi=W`
    fragment errors on UserError {
  message
  field
  exception
}
    `,Vi=W`
    mutation login($input: LoginInput!) {
  login(input: $input) {
    session {
      ...session
    }
    errors {
      ...errors
    }
    twoFactorRequired {
      availableTwoFactorAuthenticationMethods
      defaultTwoFactorAuthenticationMethod
      recoveryCodesAvailable
    }
  }
}
    ${Pa}
${Bi}`;function Ni(e={}){return Ge(Vi,e)}const qi=W`
    mutation logout {
  logout {
    success
    externalLogoutUrl
  }
}
    `;function Wi(e={}){return Ge(qi,e)}const ut=new Set,Tt=qa();Tt.use(e=>{ut.add({store:e.store,requiresAuth:e.options.requiresAuth??!0})});function Oc(e){e.use(Tt)}const Hi=e=>{ut.forEach(t=>{t.requiresAuth===e&&(t.store.$dispose(),delete Tt.state.value[t.store.$id],ut.delete(t))})},Qe=Ke("authentication",()=>{const e=va("authenticated",!1),t=R(!1),{fingerprint:n}=La(),a=async()=>{await Ua();const u=_e();u.resetCurrentSession(),e.value=!1,Hi(!0),await G().resetAndGetConfig(),u.initialized=!1},i=async()=>{await Promise.all([G().getConfig(),_e().getCurrentUser()])},r=async()=>{var d;const l=await new Ue(Wi({context:{batch:{active:!1}}})).send();if((d=l==null?void 0:l.logout)!=null&&d.success){if(l.logout.externalLogoutUrl){t.value=!0,e.value=!1,window.location.href=l.logout.externalLogoutUrl;return}await a(),Re.set("logout.success")}},s=async u=>{if(!u)return!1;const l=_e();return l.id=u,e.value=!0,await i(),l.initialized=!0,!0};return{authenticated:e,externalLogout:t,clearAuthentication:a,logout:r,login:async({login:u,password:l,rememberMe:d,twoFactorAuthentication:f,recoveryCode:v})=>{var h,C,O,H,K,B,S;const w={login:u,password:l,rememberMe:d};f?w.twoFactorAuthentication={twoFactorMethod:f.method,twoFactorPayload:f.payload}:v&&(w.twoFactorRecovery={recoveryCode:v});const g=await new Ue(Ni({variables:{input:w},context:{headers:{"X-Browser-Fingerprint":n.value},batch:{active:!1}}})).send();return(h=g==null?void 0:g.login)!=null&&h.errors||!g?Promise.reject((C=g==null?void 0:g.login)==null?void 0:C.errors):(await s(((H=(O=g.login)==null?void 0:O.session)==null?void 0:H.id)||null),{twoFactor:(K=g.login)==null?void 0:K.twoFactorRequired,afterAuth:(S=(B=g.login)==null?void 0:B.session)==null?void 0:S.afterAuth})},refreshAfterAuthentication:i,setAuthenticatedSessionId:s}},{requiresAuth:!1}),Ec=Object.freeze(Object.defineProperty({__proto__:null,useAuthenticationStore:Qe},Symbol.toStringTag,{value:"Module"}));class U{constructor(t,n){this.object=t,this.name=n.name,this.label=n.display,this.internal=n.isInternal,this.attributeType=n.dataType,this.attributeConfig=n.dataOption||{}}getFieldType(){return typeof this.fieldType=="function"?this.fieldType():this.fieldType}fieldAttributes(){const t={type:this.getFieldType(),label:this.label,name:this.name,required:"null"in this.attributeConfig&&!this.attributeConfig.null,internal:this.internal,...this.fieldTypeAttributes()};return this.attributeConfig.default&&(t.value=this.attributeConfig.default),this.attributeConfig.item_class&&this.attributeConfig.item_class.indexOf("formGroup--halfSize")!==-1&&(t.outerClass="form-group-single-column"),t}}class Gi extends U{constructor(){super(...arguments),this.fieldType="toggle"}fieldTypeAttributes(){return{props:{variants:{true:__("yes"),false:__("no")}}}}}const Ki={type:"active",resolver:Gi},zt=(e,t="or")=>e.reduce((n,a,i)=>{let r=n+a;return i<=e.length-2&&e.length>2&&(r+=", "),i===e.length-2&&(r+=`${e.length===2?" ":""}${t} `),r},""),Qi=(e,t)=>Number(e)>=Number(t)?[t,e]:[e,t],Ye=e=>e.replace(/[_.-](\w|$)/g,(t,n)=>n.toUpperCase()),zc=e=>e[0].toUpperCase()+e.slice(1),Pc=e=>e.replace(/([a-z])([A-Z])/g,(t,n,a)=>`${n}::${a}`),Lc=e=>e.replace(/[^0-9,+,#,*]+/g,"").replace(/(.)\+/,"$1"),Yi=(e,t,n,a,i)=>{var r,s;return e&&t?e[0]+t[0]:e||t||n?(r=e||t||n)==null?void 0:r.substring(0,2).toUpperCase():a||i?(s=a||i)==null?void 0:s.slice(-2).toUpperCase():"??"},Mc=(e,t,n=!1)=>e.replace(/#\{\s{0,2}(.+?)\s{0,2}\}/g,(a,i)=>{const r=i.replace(/<.+?>/g,"").split(/\./);let s=t;for(const u of r)if(typeof s=="object"&&u in s)s=s[u];else{s="";break}let o;return typeof s=="function"?o=s():s!=null&&s.toString?o||(o=s.toString()):o="",o===""&&(o="-"),n&&(o=encodeURIComponent(o)),o});class Zi extends U{constructor(){super(...arguments),this.fieldType="organization"}fieldTypeAttributes(){return{props:{clearable:this.attributeConfig.nulloption??!0,noOptionsLabelTranslation:!this.attributeConfig.translate,belongsToObjectField:Ye(this.attributeConfig.belongs_to||"")}}}}const Ji={type:"autocompletion_ajax_customer_organization",resolver:Zi};class Xi extends U{constructor(){super(...arguments),this.fieldType="customer"}fieldTypeAttributes(){return{props:{clearable:this.attributeConfig.nulloption??!0,noOptionsLabelTranslation:!this.attributeConfig.translate,belongsToObjectField:Ye(this.attributeConfig.belongs_to||"")}}}}const er={type:"user_autocompletion",resolver:Xi},tr=(e,t)=>`${t}-${e}`,Cn=(e,t)=>Za(tr(e,t)),jc=(e,t)=>{t instanceof Ba?e.setErrors(t.generalErrors,t.getFieldErrorList()):e.setErrors((t==null?void 0:t.message)||__("An unexpected error has occurred."))},nr=e=>typeof e=="string"&&e.startsWith("gid://zammad/"),kn=(e,t)=>`gid://zammad/${e}/${t}`,Tn=(e,t)=>nr(t)?t:kn(e,t),ar=e=>{const[t,n]=e.slice(13).split("/");return{relation:t,id:parseInt(n,10)}},ir=e=>ar(e).id;class rr extends U{constructor(){super(...arguments),this.fieldType="externalDataSource"}fieldTypeAttributes(){return{props:{clearable:!!this.attributeConfig.nulloption,noOptionsLabelTranslation:!this.attributeConfig.translate,object:this.object,searchTemplateRenderContext:(t,n)=>{var i;const a={};switch(this.object){case X.Ticket:if(n&&(a.customerId=(i=n.customer)==null?void 0:i.id),!a.customerId){const r=Cn(t,"customer_id"),s=r==null?void 0:r.value;s&&(a.customerId=Tn("User",s))}return a;case X.User:case X.Organization:case X.Group:default:return a}}}}}}const sr={type:"autocompletion_ajax_external_data_source",resolver:rr};class or extends U{constructor(){super(...arguments),this.fieldType=()=>{switch(this.attributeConfig.relation){case"Organization":return"organization";case"User":return"customer";case"Group":case"TicketState":case"TicketPriority":throw new Error(`Relation ${this.attributeConfig.relation} is not implemented yet`);default:throw new Error(`Unknown relation ${this.attributeConfig.relation}`)}}}fieldTypeAttributes(){return{props:{clearable:!!this.attributeConfig.nulloption,noOptionsLabelTranslation:!this.attributeConfig.translate,belongsToObjectField:Ye(this.attributeConfig.belongs_to||""),multiple:this.attributeConfig.multiple}}}}const lr={type:"autocompletion_ajax",resolver:or};class cr extends U{constructor(){super(...arguments),this.fieldType="toggle"}fieldTypeAttributes(){return{value:!1,props:{variants:this.attributeConfig.options},wrapperClass:"@lg/form-group:mt-6"}}}const ur={type:"boolean",resolver:cr};class dr extends U{constructor(){super(...arguments),this.fieldType="date"}fieldTypeAttributes(){return{props:{clearable:!!this.attributeConfig.null}}}}const pr={type:"date",resolver:dr};class fr extends U{constructor(){super(...arguments),this.fieldType="datetime"}fieldTypeAttributes(){return{props:{clearable:!!this.attributeConfig.null}}}}const mr={type:"datetime",resolver:fr};class vr extends U{constructor(){super(...arguments),this.fieldType=se()==="desktop"?"groupPermissions":"hidden"}fieldTypeAttributes(){return{}}}const gr={type:"group_permissions",resolver:vr};class br extends U{constructor(){super(...arguments),this.fieldType=()=>{switch(this.attributeConfig.type){case"password":return"password";case"tel":return"tel";case"email":return"email";case"url":return"url";default:return"text"}}}fieldTypeAttributes(){const t={maxlength:this.attributeConfig.maxlength},n=this.validation();return n&&(t.validation=n),{props:t}}validation(){switch(this.attributeConfig.type){case"email":return"email";case"url":return"url";default:return null}}}const hr={type:"input",resolver:br};class yr extends U{constructor(){super(...arguments),this.fieldType="number"}fieldTypeAttributes(){return{props:{min:this.attributeConfig.min,max:this.attributeConfig.max}}}}const _r={type:"integer",resolver:yr};class xt extends U{constructor(){super(...arguments),this.fieldType="select",this.multiFieldAttributeType="multiselect"}fieldTypeAttributes(){const t={},n={noOptionsLabelTranslation:!this.attributeConfig.translate,clearable:!!this.attributeConfig.nulloption,options:[],historicalOptions:this.attributeConfig.historical_options};return this.attributeConfig.relation?(t.relation={type:this.attributeConfig.relation},this.attributeConfig.filter&&(t.relation.filterIds=this.attributeConfig.filter),n.belongsToObjectField=Ye(this.attributeConfig.belongs_to||""),n.sorting="label"):this.attributeConfig.options&&(n.options=this.mappedOptions()),this.attributeType===this.multiFieldAttributeType&&(n.multiple=!0),{...t,props:n}}mappedOptions(){const t=this.attributeConfig.options;return Array.isArray(t)?t.map(({name:n,value:a})=>({label:n,value:a})):Object.keys(t).map(n=>({label:n,value:t[n]}))}}const wr={type:"select",resolver:xt};class Cr extends xt{}const kr={type:"multiselect",resolver:Cr};class xn extends xt{constructor(){super(...arguments),this.fieldType="treeselect",this.multiFieldAttributeType="multi_tree_select"}mappedOptions(){const t=n=>n.reduce((a,{children:i,name:r,value:s})=>{const o={label:r,value:s};return i&&(o.children=t(i)),a.push(o),a},[]);return t(this.attributeConfig.options)}}const Tr={type:"tree_select",resolver:xn};class xr extends xn{}const Ar={type:"multi_tree_select",resolver:xr};class $r extends U{constructor(){super(...arguments),this.fieldType="editor"}fieldTypeAttributes(){return{props:{}}}}const Sr={type:"richtext",resolver:$r};class Fr extends U{constructor(){super(...arguments),this.fieldType="tags"}fieldTypeAttributes(){return{props:{canCreate:!!G().config.tag_new}}}}const Ir={type:"tag",resolver:Fr};class Or extends U{constructor(){super(...arguments),this.fieldType="textarea"}fieldTypeAttributes(){return{props:{maxlength:this.attributeConfig.maxlength,rows:this.attributeConfig.rows}}}}const Er={type:"textarea",resolver:Or};class zr extends U{constructor(){super(...arguments),this.fieldType=se()==="desktop"?"toggleList":"hidden"}fieldTypeAttributes(){return{}}}const Pr={type:"user_permission",resolver:zr},Lr=Object.assign({"./fields/active.ts":Ki,"./fields/autocompletion-customer-organization.ts":Ji,"./fields/autocompletion-customer.ts":er,"./fields/autocompletion-external-data-source.ts":sr,"./fields/autocompletion.ts":lr,"./fields/boolean.ts":ur,"./fields/date.ts":pr,"./fields/datetime.ts":mr,"./fields/group-permissions.ts":gr,"./fields/input.ts":hr,"./fields/integer.ts":_r,"./fields/multiselect.ts":kr,"./fields/multitreeselect.ts":Ar,"./fields/richtext.ts":Sr,"./fields/select.ts":wr,"./fields/tag.ts":Ir,"./fields/textarea.ts":Er,"./fields/treeselect.ts":Tr,"./fields/user-permissions.ts":Pr}),dt={};Object.entries(Lr).forEach(([,e])=>{dt[e.type]=e.resolver});const Mr=(e,t)=>{if(!dt[t.dataType])throw new Error(`No field resolver for type ${t.dataType} (${t.name})`);return new dt[t.dataType](e,t)},Dc=(e,t)=>{t.required=e.required||"null"in e&&!e.null,"default"in e&&(t.value=e.default),"filter"in e&&t.relation&&(t.relation.filterIds=e.filter),"nulloption"in e&&t.props&&"clearable"in t.props&&(t.props.clearable=e.nulloption)},jr=(e,t)=>Mr(e,t).fieldAttributes(),Dr=W`
    query objectManagerFrontendAttributes($object: EnumObjectManagerObjects!) {
  objectManagerFrontendAttributes(object: $object) {
    attributes {
      name
      display
      dataType
      dataOption
      isInternal
      screens
    }
    screens {
      name
      attributes
    }
  }
}
    `;function Rr(e,t={}){return tn(Dr,e,t)}const pt=e=>{const t=Hr();if(!t.objectAttributesObjectLookup[e]){const n=new nn(Rr({object:e})),a=n.result(),i=n.loading(),r=p(()=>{var l,d;return[...Wr[e]||[],...((d=(l=a.value)==null?void 0:l.objectManagerFrontendAttributes)==null?void 0:d.attributes)||[]]}),s=p(()=>{var l,d;return((d=(l=a.value)==null?void 0:l.objectManagerFrontendAttributes)==null?void 0:d.screens.reduce((f,v)=>(f[v.name]=v.attributes,f),{}))||{}}),o=p(()=>{var d;const l=new Map;return(d=r.value)==null||d.forEach(f=>l.set(f.name,f)),l}),u=p(()=>{var d;const l=new Map;return(d=r.value)==null||d.forEach(f=>{f.isStatic||l.set(f.name,jr(e,f))}),l});t.setObjectAttributesForObject(e,{attributes:r,screens:s,attributesLookup:o,formFieldAttributesLookup:u,loading:i})}return{...ga(t.objectAttributesObjectLookup[e])}},Rc=()=>{pt(X.Ticket),pt(X.TicketArticle)},An=(e,t)=>{const n=pt(e),a=(r,s,o)=>s.value[r]?s.value[r].reduce((u,l)=>(u.push(o.value.get(l)),u),[]):[];return{screenAttributes:p(()=>a(t,n.screens,n.attributesLookup))}},Ur={name:X.Organization,attributes:[{name:"created_by_id",display:__("Created by"),dataOption:{relation:"User"},dataType:"autocomplete",isStatic:!0,isInternal:!0},{name:"created_at",display:__("Created at"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"updated_by_id",display:__("Updated by"),dataOption:{relation:"User"},dataType:"autocomplete",isStatic:!0,isInternal:!0},{name:"updated_at",display:__("Updated at"),dataType:"datetime",isStatic:!0,isInternal:!0}]},Uc=Ke("organizationObjectAttributes",()=>{const{screenAttributes:e}=An(X.Organization,"view");return{viewScreenAttributes:e}}),Br={name:X.Ticket,attributes:[{name:"number",display:"#",dataType:"input",isStatic:!0,isInternal:!0},{name:"time_unit",display:__("Accounted Time"),dataType:"time_unit",isStatic:!0,isInternal:!0},{name:"escalation_at",display:__("Escalation at"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"first_response_escalation_at",display:__("Escalation at (First Response Time)"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"update_escalation_at",display:__("Escalation at (Update Time)"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"close_escalation_at",display:__("Escalation at (Close Time)"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"last_contact_at",display:__("Last contact"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"last_contact_agent_at",display:__("Last contact (agent)"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"last_contact_customer_at",display:__("Last contact (customer)"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"first_response_at",display:__("First response"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"close_at",display:__("Closing time"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"last_close_at",display:__("Last closing time"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"created_by_id",display:__("Created by"),dataOption:{relation:"User",belongs_to:"createdBy"},dataType:"autocompletion_ajax",isStatic:!0,isInternal:!0},{name:"created_at",display:__("Created at"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"updated_by_id",display:__("Updated by"),dataOption:{relation:"User",belongs_to:"updatedBy"},dataType:"autocompletion_ajax",isStatic:!0,isInternal:!0},{name:"updated_at",display:__("Updated at"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"last_owner_update_at",display:__("Last owner update"),dataType:"datetime",isStatic:!0,isInternal:!0}]},Vr={name:X.User,attributes:[{name:"created_by_id",display:__("Created by"),dataOption:{relation:"User"},dataType:"autocomplete",isStatic:!0,isInternal:!0},{name:"created_at",display:__("Created at"),dataType:"datetime",isStatic:!0,isInternal:!0},{name:"updated_by_id",display:__("Updated by"),dataOption:{relation:"User"},dataType:"autocomplete",isStatic:!0,isInternal:!0},{name:"updated_at",display:__("Updated at"),dataType:"datetime",isStatic:!0,isInternal:!0}]},Bc=Ke("userObjectAttributes",()=>{const{screenAttributes:e}=An(X.User,"view");return{viewScreenAttributes:e}}),Nr=Object.assign({"../../organization/stores/objectAttributes.ts":Ur,"../../ticket/stores/objectAttributes.ts":Br,"../../user/stores/objectAttributes.ts":Vr}),qr=Object.values(Nr),Wr=qr.reduce((e,t)=>(e[t.name]=t.attributes,e),{}),Hr=Ke("objectAttributes",()=>{const e=R({});return{objectAttributesObjectLookup:e,setObjectAttributesForObject:(a,i)=>{e.value[a]=i},getObjectAttributesForObject:a=>{const i=e.value[a];return i||te.error(`Please load the form object attributes first, the object "${a}" does not exists in the store.`),i}}}),Gr='button, a[href]:not([href=""]), input, select, textarea, [tabindex]:not([tabindex="-1"])',Kr=e=>!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length),Qr=e=>{const t=e.getAttribute("tabindex");return t&&parseInt(t,10)<0},Ze=(e,t={})=>Array.from((e==null?void 0:e.querySelectorAll(Gr))||[]).filter(n=>Kr(n)&&(t.ignoreTabindex||!Qr(n))&&!n.hasAttribute("disabled")&&n.getAttribute("aria-disabled")!=="true"),Vc=e=>Ze(e)[0],Nc=e=>!!e,Yr=e=>{var t;return((t=e==null?void 0:e.edges)==null?void 0:t.map(n=>n.node))||[]},qc=e=>{const t=Yr(e);return{array:t,totalCount:(e==null?void 0:e.totalCount)??t.length}},Pt=(e,t)=>[...new Set([...e,...t])],Wc=()=>new Promise(e=>requestAnimationFrame(e)),Zr=e=>e?e.trim().replace(/(\r\n|\n\r)/g,`
`).replace(/\r/g,`
`).replace(/[ ]\n/g,`
`).replace(/\n{3,20}/g,`

`):"",Hc=e=>(e=Zr(e),e=Wa(e),e=e.replace(/(\n\r|\r\n|\r)/g,`
`),e=e.replace(/ {2}/g," &nbsp;"),e=`<div>${e.replace(/\n/g,"</div><div>")}</div>`,e.replace(/<div><\/div>/g,"<div><br></div>")),Gc=(e,t=100)=>!e||(e=e.replace(/<([^>]+)>/g,""),e.length<t)?e:`${e.substring(0,t)}…`,Kc=(e,t,n=200)=>{let a,i=null,r=t;return(...s)=>(a&&(i==null||i(),clearTimeout(a)),new Promise((o,u)=>{i=()=>o(r),a=window.setTimeout(()=>{e(...s).then(l=>{r=l,o(l)},u)},n)}))},Jr=async(e,t=60)=>{if(t===0)return null;const n=document.querySelector(e);return n||(await new Promise(a=>requestAnimationFrame(a)),Jr(e,t-1))},Xr=e=>e.replace(/\|\|(.+?)\|\|/gm,"<i>$1</i>").replace(/\|(.+?)\|/gm,"<b>$1</b>").replace(/_(.+?)_/gm,"<u>$1</u>").replace(/\/\/(.+?)\/\//gm,"<del>$1</del>").replace(/§(.+?)§/gm,"<kbd>$1</kbd>").replace(/\[(.+?)\]\((.+?)\)/gm,'<a href="$2" target="_blank">$1</a>'),Qc=e=>e.replace(/\|\|(.+?)\|\|/gm,"$1").replace(/\|(.+?)\|/gm,"$1").replace(/_(.+?)_/gm,"$1").replace(/\/\/(.+?)\/\//gm,"$1").replace(/§(.+?)§/gm,"$1").replace(/\[(.+?)\]\((.+?)\)/gm,"$1");let $n={container:"form-group",help:"form-group-help",dirtyMark:"form-group-mark-dirty",bottomMargin:"form-group-bottom-margin"};const Yc=e=>{$n=e},Zc=()=>$n;let Sn={loading:"form-loading"};const Jc=e=>{Sn=e},Xc=()=>Sn;var Y=(e=>(e.Blur="blur",e.Live="live",e.Dirty="dirty",e.Submit="submit",e))(Y||{}),es=(e=>(e.Initial="initial",e.InitialSettled="initialSettled",e.FieldChange="fieldChange",e))(es||{});const eu=(e,t=!1)=>{const n=o=>{const u=Ze(e.value),l=u[0],d=u[u.length-1];if(o.shiftKey){document.activeElement===l&&(d.focus(),o.preventDefault());return}document.activeElement===d&&(l.focus(),o.preventDefault())},a=R(!t),i=()=>{a.value=!0},r=()=>{a.value=!1};return ht(o=>{!a.value||!(o.key==="Tab"||o.keyCode===9)||n(o)},{target:e}),{activateTabTrap:i,deactivateTabTrap:r,moveNextFocusToTrap:()=>{if(!e.value)return;const o=document.createElement("div");o.tabIndex=0,requestAnimationFrame(()=>{var u;(u=e.value)==null||u.prepend(o),o.focus(),o.remove()})}}};let Fn={base:"",arrow:""};const tu=e=>{Fn=e},nu=()=>Fn,ts=Ee("arrow",()=>({$el:"div",attrs:{class:"$classes.arrow"},children:[{$cmp:"CommonIcon",props:{size:"base",class:"shrink-0",name:"$arrowIconName",decorative:!0}}]})),ns=Ee("block",()=>({$el:"div",attrs:{onClick:"$handlers.bindEmit('block-click')"}}));let In={container:"field-link-container",base:"field-link-base",link:"field-link-link"};const au=e=>{In=e},as=()=>In,is=j({__name:"FormFieldLink",props:{id:{},link:{},linkIcon:{default:"form-field-link"},linkLabel:{default:__("Link")},onLinkClick:{}},setup(e){const t=as();return(n,a)=>{const i=ie("CommonIcon"),r=ie("CommonLink");return b(),x("div",{class:T(m(t).container)},[L("div",{class:T([m(t).base,"flex h-full items-center focus:outline-hidden"])},[n.link?(b(),E(r,{key:0,link:n.link,class:T([m(t).link,"flex items-center justify-center"]),"aria-label":n.$t(n.linkLabel),"open-in-new-tab":"",onClick:n.onLinkClick},{default:re(()=>[de(i,{name:n.linkIcon,size:"small",decorative:""},null,8,["name"])]),_:1},8,["link","class","aria-label","onClick"])):P("",!0)],2)],2)}}}),rs=Ee("link",()=>({$cmp:yt(is),if:"$link",props:{id:"$id",link:"$link",linkIcon:"$linkIcon",linkLabel:"$linkLabel",onLinkClick:"$onLinkClick"}})),ss=e=>{e.on("created",()=>{if(!e.context)return;const t=e.context.handlers.blur;e.context.handlers.blur=n=>{var a;e.emit("blur",(a=e.context)==null?void 0:a.value),e.context&&t(n)}})},os=e=>{const t=He(),{props:n}=e;e.addProps(["localeDir","arrowIconName"]),n.localeDir=J(()=>{var a;return((a=t.localeData)==null?void 0:a.dir)??"ltr"}),n.arrowIconName=J(()=>{var a;return`chevron-${((a=t.localeData)==null?void 0:a.dir)==="rtl"?"left":"right"}`})},ls=e=>{e.addProps(["hidden"]),e.on("created",()=>{const{props:t}=e;t.hidden&&(t.outerClass="hidden"),e.on("prop:hidden",({payload:n})=>{n?t.outerClass=`${t.outerClass} hidden`:t.outerClass&&(t.outerClass=t.outerClass.replace("hidden",""))})})},Lt=["label","placeholder","help"],cs=["placeholder"],us=(e,t)=>{const n={...t};return cs.forEach(a=>{a in t&&(!e.store[a]||e.store[a].value!==t[a])&&e.store.set(Te({key:a,type:"ui",value:t[a]})),e.store[a]&&e.store[a].value&&(n.placeholder=p(()=>c.t(e.store.placeholder.value)))}),n},ds=e=>{e.hook.prop(({prop:t,value:n},a)=>{const i=t;return i==="attrs"&&!ln(n)&&(n=us(e,n)),Lt.includes(i)&&((!e.store[i]||e.store[i].value!==n)&&e.store.set(Te({key:i,type:"ui",value:n})),i==="label"?n=p(()=>c.t(e.store[i].value,...e.props.labelPlaceholder||[])):n=p(()=>c.t(e.store[i].value))),a({prop:t,value:n})}),e.on("created",()=>{Lt.forEach(t=>{t in e.props&&(e.props[t]=e.props[t])})})},ps=["formId","labelSrOnly","labelPlaceholder","internal"],tt={features:[ds,ls,ss,os],props:ps},pe=(e,t={},n={})=>{const{addDefaultProps:a=!0,addDefaultFeatures:i=!0,addArrow:r=!1}=n,s=e;if(s.props=Array.isArray(s.props)?s.props:[],s.features||(s.features=[]),n.schema){const d=[Ja(Xa("$label"),ei(Ot("prefix","label"),ti(),n.schema(),ni(),Ot("suffix")))];r&&d.push(ts()),d.push(rs()),s.schema=ai(ns(...d),ii("$help"),ri(si("$message.value")))}const o=Array.isArray(t.props)?t.props:[];if(a){const l=Array.isArray(tt.props)?tt.props:[];s.props=Pt(s.props,l.concat(o))}const u=t.features||[];i&&(s.features=Pt(tt.features.concat(u),s.features))};let fs=0;const ms=e=>e?typeof e=="function"&&e.length===2||typeof e=="object"&&!Array.isArray(e)&&!("$el"in e)&&!("$cmp"in e)&&!("if"in e):!1,Je=(e,t,n={},a={})=>{n.props=t;const i={type:"input",...n};let r;if(ms(e)){const s=`CustomSchemaComponent${fs++}`;r=Ee("input",()=>({$cmp:s,props:{context:"$node.context"}})),i.library={[s]:yt(e)}}else r=Ee("input",()=>oi(e));return pe(i,{},{...a,schema:r}),i.schemaMemoKey||(i.schemaMemoKey=`${Math.random()}`),i},On=e=>{const{props:t}=e;if(e.addProps(["link","linkIcon","linkLabel","onLinkClick"]),se()!=="mobile")return;const n=a=>{a?t.inputClass=`${t.inputClass||""} ltr:pr-2 rtl:pl-2`:t.inputClass&&(t.inputClass=t.inputClass.replace("ltr:pr-2 rtl:pl-2",""))};e.on("created",()=>{n(!!t.link),e.on("prop:link",({payload:a})=>{n(!!a)})})},fe=(e="direct",t=300)=>n=>{const{props:a}=n;n.addProps(["triggerFormUpdater","formUpdaterTrigger","pendingValueUpdate"]),n.on("created",()=>{a.formUpdaterTrigger||(a.formUpdaterTrigger=e),a.triggerFormUpdater&&a.formUpdaterTrigger==="delayed"&&(!a.delay||a.delay<t)&&(a.delay=t);const{context:i}=n;i&&n.hook.input((r,s)=>(i.pendingValueUpdate&&(i.pendingValueUpdate=!1),s(r)))})},Xe=e=>{const t=p(()=>e.value._value),n=p(()=>e.value.fns.hasValue(t.value)),a=p(()=>e.value.multiple?t.value:[t.value]),i=o=>n.value?a.value.includes(o):!1,r=(o=!0)=>{if(!n.value)return;const u=e.value.clearValue!==void 0?e.value.clearValue:null;e.value.node.input(u,o)};return{localValue:p({get:()=>t.value,set:o=>{e.value.node.input(o)}}),currentValue:t,hasValue:n,valueContainer:a,isCurrentValue:i,clearValue:r}},iu=(e,t)=>{const n=R(),{currentValue:a,hasValue:i,valueContainer:r,clearValue:s}=Xe(t),o=R([]),u=p(()=>[...e.value||[],...o.value]),l=p(()=>{var y;return(y=u.value)==null?void 0:y.some(_=>_.status)}),d=p(()=>{if(!u.value)return[];const{noOptionsLabelTranslation:y}=t.value;return u.value.map(_=>{const F=y&&!_.labelPlaceholder?_.label||"":c.t(_.label,..._.labelPlaceholder||[]),I=_,V=y&&!I.headingPlaceholder?I.heading||"":c.t(I.heading,...I.headingPlaceholder||[]);return{..._,label:F,heading:V}})}),f=p(()=>Ga(d.value,"value")),v=p(()=>{const{sorting:y}=t.value;return y?y!=="label"&&y!=="value"?(console.warn(`Unsupported sorting option "${y}"`),d.value):[...d.value].sort((_,F)=>{const I=_[y]||_.value,V=F[y]||_.value;return String(I).localeCompare(String(V))}):d.value}),w=y=>{if(typeof y=="object"&&y!==null)return y;const _=y.toString();return f.value[_]},A=y=>{const _=w(y);return _==null?void 0:_.icon},g=y=>{if(typeof y!="object")return y;const _=w(y);return _==null?void 0:_.value},h=y=>{const _=w(y);return _==null?void 0:_.label},C=y=>{const _=w(y);return _==null?void 0:_.status},O=y=>f.value[y]&&f.value[y].parents||[],H=y=>O(y).map(_=>`${h(_)} › `).join("")+(h(y)||c.t("%s (unknown)",y.toString())),K=y=>t.value.complexValue?{value:y.value,label:y.label}:y.value,B=y=>{if(!t.value.multiple){t.value.node.input(K(y));return}const _=Ct(a.value)||[],F=_.indexOf(y.value);F!==-1?_.splice(F,1):_.push(K(y)),_.sort((I,V)=>v.value.findIndex(M=>M.value===I)-v.value.findIndex(M=>M.value===V)),t.value.node.input(_)},S=y=>{var I;const _=(I=n.value)==null?void 0:I.parentElement;if(!_)return[];const F=Array.from(_.querySelectorAll('[tabindex="0"]'));return F?y?F.filter(V=>{var M;return((M=V.attributes.getNamedItem("role"))==null?void 0:M.value)==="option"}):F:[]},D=y=>{if(!i.value||t.value.pendingValueUpdate)return;const _=y??!0;if(t.value.multiple){const I=a.value.filter(V=>{const M=f.value[V];return _&&typeof M<"u"&&(M==null?void 0:M.disabled)!==!0||!_&&(M==null?void 0:M.disabled)!==!0});I.length!==a.value.length&&t.value.node.input(I,!1);return}const F=f.value[a.value];(_&&typeof F>"u"||F!=null&&F.disabled)&&s(!1)};return{dialog:n,hasStatusProperty:l,translatedOptions:d,optionValueLookup:f,sortedOptions:v,getSelectedOption:w,getSelectedOptionValue:g,getSelectedOptionIcon:A,getSelectedOptionLabel:h,getSelectedOptionStatus:C,getSelectedOptionParents:O,getSelectedOptionFullPath:H,selectOption:B,getDialogFocusTargets:S,setupMissingOrDisabledOptionHandling:()=>{var _;const{historicalOptions:y}=t.value;if(t.value.rejectNonExistentValues===void 0){const F=t.value.node.at("$root");t.value.rejectNonExistentValues=F&&F.name!==t.value.node.name&&!((_=F.context)!=null&&_.initialEntityObject)}t.value.optionValueLookup=f,t.value.multiple&&ee(()=>i.value&&r.value.includes("")&&t.value.clearable&&!e.value.some(F=>F.value===""),()=>{const F={value:"",label:"-"};o.value.unshift(F)}),!t.value.rejectNonExistentValues&&i.value&&y&&(o.value=r.value.reduce((F,I)=>{const V=y[I.toString()];return V&&!e.value.some(M=>M.value===I)?F.push({value:I,label:V}):t.value.multiple&&!V&&I===""&&!e.value.some(M=>M.value===I)&&F.unshift({value:I,label:"-"}),F},[])),D(t.value.rejectNonExistentValues),ee(e,()=>D())},appendedOptions:o}},ru=(e,t)=>{const n=e.value.node.on("block-click",({payload:a})=>{if(e.value.disabled)return;const i=a.target;!i||i.classList.contains("formkit-link")||i.querySelector(".formkit-link")||i.closest(".formkit-link")||t(a)});ba(()=>{e.value.node.off(n)})},su=e=>{let t="",n=0;ht(a=>{if(!(a.location!==0||a.key.length!==1&&a.key!=="Backspace")){if(a.key===" "){if(t==="")return;ze(a)}window.clearTimeout(n),n=window.setTimeout(()=>{const i=Ze(Yt(e)).find(r=>{var l,d;const s=((l=r.textContent)==null?void 0:l.toLowerCase().trim())??"",o=t.toLowerCase();return s.startsWith(o)?!0:(((d=r.getAttribute("aria-label"))==null?void 0:d.toLowerCase().trim())??"").startsWith(o)});i==null||i.focus(),t=""},250),a.key==="Backspace"?t=t.slice(0,t.length-1):t+=a.key}},{target:e})},vs=new Set(["Home","End","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"]),gs=(e,t="vertical")=>t==="horizontal"?e==="ArrowRight":t==="vertical"?e==="ArrowDown":e==="ArrowDown"||e==="ArrowUp",bs=(e,t="vertical")=>t==="horizontal"?e==="ArrowLeft":t==="vertical"?e==="ArrowUp":e==="ArrowUp"||e==="ArrowLeft",hs=(e,t,n)=>{var i,r;const a=e.indexOf(document.activeElement);if(gs(t,n.direction)){const s=e[a+1]||e[0];return((i=n.onNext)==null?void 0:i.call(n,t,s))??!0?s:null}if(bs(t,n.direction)){const s=e[a-1]||e[e.length-1];return((r=n.onPrevious)==null?void 0:r.call(n,t,s))??!0?s:null}return t==="Home"?e[0]:t==="End"?e[e.length-1]:null},ys=(e,t={})=>{t.scrollIntoView??(t.scrollIntoView=!0),ht(n=>{var o;const{key:a}=n;if(!vs.has(a)||!(((o=t[`on${a}`])==null?void 0:o.call(t))??!0))return;let r=Ze(Yt(e),t);if(t.filterOption&&(r=r.filter(t.filterOption)),!r.length)return;const s=hs(r,a,t);s&&(ze(n),s.focus(),t.scrollIntoView&&s.scrollIntoView({block:"nearest"}))},{target:e})},_s=(e,t,n,a)=>{const i=se(),r=Ma(),s=p(()=>{const h=ce(e);if(h.outOfOffice&&h.outOfOfficeStartAt&&h.outOfOfficeEndAt){const C=ha(r.value,"YYYY-MM-DD"),O=h.outOfOfficeStartAt,H=h.outOfOfficeEndAt;return O<=C.value&&H>=C.value}return!1}),o=p(()=>ce(e).active===!1),u=p(()=>{var h;return((h=ce(a))==null?void 0:h.agentReadAccess)===!1}),l=p(()=>{var h;return(h=ce(n))==null?void 0:h.isIdle}),d=p(()=>{var h;return(h=ce(n))==null?void 0:h.editing}),f=p(()=>{var h;return((h=ce(n))==null?void 0:h.app)===ct.Desktop}),v=p(()=>{var h;return((h=ce(n))==null?void 0:h.app)===ct.Mobile}),w=p(()=>o.value?"avatar-indicator-inactive":u.value?"avatar-indicator-without-access":s.value?"avatar-indicator-out-of-office":d.value&&f.value?"avatar-indicator-editing-desktop":d.value&&v.value?"avatar-indicator-editing-mobile":f.value&&i!=="desktop"?"avatar-indicator-desktop":v.value&&i!=="mobile"?"avatar-indicator-mobile":l.value?"avatar-indicator-idle":null),A=p(()=>{if(o.value)return c.t("User is inactive");if(u.value)return c.t("User has no access");if(s.value&&ce(t))return c.t("Out of office active");if(s.value)return c.t("User is out of office");if(d.value&&f.value)return c.t("User is editing on desktop");if(d.value&&v.value)return c.t("User is editing on mobile");if(d.value)return c.t("User is editing");if(f.value&&i!=="desktop")return c.t("User is on desktop");if(v.value&&i!=="mobile")return c.t("User is on mobile");if(l.value)return c.t("User is idle")}),g=p(()=>o.value||s.value||u.value||l.value);return{isInactive:o,isLiveUserDesktop:f,isLiveUserEditing:d,isLiveUserIdle:l,isLiveUserMobile:v,isOutOfOffice:s,isWithoutAccess:u,indicatorIcon:w,indicatorLabel:A,indicatorIsIdle:g}};let En={backgroundColors:[]};const ou=e=>{En=e},ws=()=>En,zn=1,Cs=kn("User",zn);let Pn={base:"common-avatar-base",vipUser:"common-avatar-vip-user",vipOrganization:"common-avatar-vip-organization"};const lu=e=>{Pn=e},ks=()=>Pn,Ts=["aria-label","aria-hidden"],xs=j({__name:"CommonAvatar",props:{initials:{default:"??"},image:{},icon:{},size:{default:"medium"},vipIcon:{},ariaLabel:{},decorative:{type:Boolean}},setup(e){const t=e,n={xs:"xs",small:"small",medium:"base",normal:"medium",large:"large",xl:"xl"},a=p(()=>t.icon?n[t.size]:"medium"),i=p(()=>{if(!t.decorative)return t.ariaLabel||c.t("Avatar with initials %s",t.initials)}),r=ks();return(s,o)=>{const u=ie("CommonIcon");return b(),x("span",{class:T(["relative flex shrink-0 items-center justify-center rounded-full bg-cover bg-center select-none",[`size-${s.size}`,m(r).base]]),style:Zt({backgroundImage:s.image?`url(${s.image})`:void 0,backgroundRepeat:s.image?"no-repeat":void 0}),role:"img","aria-label":i.value,"aria-hidden":s.decorative?"true":void 0},[s.vipIcon?(b(),E(u,{key:0,class:T(["vip pointer-events-none absolute",s.vipIcon==="vip-organization"?m(r).vipOrganization:m(r).vipUser]),name:s.vipIcon,size:n[t.size],decorative:""},null,8,["class","name","size"])):P("",!0),s.icon?(b(),E(u,{key:1,name:s.icon,size:a.value},null,8,["name","size"])):le(s.$slots,"default",{key:2},()=>[Fe(ae(s.image?"":s.initials),1)],!0)],14,Ts)}}}),As=(e,t)=>{const n=e.__vccOpts||e;for(const[a,i]of t)n[a]=i;return n},Ln=As(xs,[["__scopeId","data-v-acc47cdb"]]),$s="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23CA2317'%20points='15.7,9.3%2020.4,7.8%2017.6,9.6%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23E84F83'%20points='18.6,12.8%2017.6,9.6%2020.4,7.8%2019.6,10.7%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23CA2317'%20points='21.8,6.9%2021.3,7.8%2019.6,10.7%2020.4,7.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23E54011'%20points='22,7.5%2020.7,8.9%2021.3,7.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23E54011'%20points='16,8.4%2019.9,8%2017.2,8.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23CA2317'%20points='16.1,10.6%2017.6,9.6%2018.6,12.8%2018.1,13.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23B7DFF2'%20points='13.9,14.4%2013.2,5.6%2018.1,13.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23E54011'%20points='11.9,16.6%2013.9,14.4%2018.1,13.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23FFCE33'%20points='2,21%2011.9,16.6%2013.9,14.4%2010.7,14%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23D6B12D'%20points='2.4,17.4%207.4,16.6%209,15.4%208.3,15%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23FFDE85'%20points='4.2,13.3%209,15.4%2010.7,14%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23009EC6'%20points='12.8,8.8%2012.2,8.9%2010.7,14%2012.3,13%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%235EAFCE'%20points='13.7,12.1%2012.3,13%2013.2,5.6%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23045972'%20points='8.5,9.5%2012.8,8.8%2013,7.1%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%235A8591'%20points='8,5.5%2011.8,7.7%2013,7.1%2013.1,6.8%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23009EC6'%20points='8.8,3%2012.2,6.6%2013.1,6.8%2013.2,5.6%20'/%3e%3cpolygon%20fill-rule='evenodd'%20clip-rule='evenodd'%20fill='%23F39804'%20points='10.7,14%2013.7,12.1%2013.9,14.4%20'/%3e%3c/svg%3e",Ss={class:"relative h-fit"},Fs={key:0,class:"absolute end-0 bottom-0 flex translate-y-1 items-center justify-center rounded-full bg-blue-200 p-[3px] outline-1 -outline-offset-1 outline-neutral-100 ltr:translate-x-2 rtl:-translate-x-2 dark:bg-gray-700 dark:outline-gray-900"},cu=j({__name:"CommonUserAvatar",props:{entity:{},size:{default:"medium"},personal:{type:Boolean},decorative:{type:Boolean},initialsOnly:{type:Boolean},live:{},access:{},noMuted:{type:Boolean},noIndicator:{type:Boolean}},setup(e){const t=e,n=p(()=>{const{lastname:S,firstname:D,email:oe,phone:y,mobile:_}=t.entity;return Yi(D,S,oe,y,_)}),{backgroundColors:a}=ws(),i=p(()=>{const{lastname:S,firstname:D,fullname:oe}=t.entity;return oe||[D,S].filter(Boolean).join(" ")}),r=p(()=>{const{id:S}=t.entity,D=ir(S);return D===zn?"bg-white":a[D%(a.length-1)]}),s=["facebook","twitter"],o=p(()=>{const{source:S}=t.entity;return S&&s.includes(S)?S:null}),u=se(),l=G(),d=p(()=>o.value||t.initialsOnly?null:t.entity.id===Cs?$s:t.entity.image?t.entity.image.startsWith("data:")?t.entity.image:`${String(l.config.api_path)}/users/image/${t.entity.image}`:null),f=p(()=>!t.personal&&t.entity.vip),{indicatorIcon:v,indicatorLabel:w,indicatorIsIdle:A}=_s(J(t,"entity"),J(t,"personal"),J(t,"live"),J(t,"access")),g=p(()=>!t.noMuted&&A.value),h=p(()=>{const S=[r.value];return g.value&&S.push("opacity-60"),S}),C=p(()=>{let S=c.t("Avatar");const D=i.value||t.entity.email;return D&&(S+=` (${D})`),f.value&&(S+=` (${c.t("VIP")})`),S}),O=p(()=>u===ct.Mobile||t.noIndicator?null:v.value),H=p(()=>g.value?"fill-stone-200 dark:fill-neutral-500":"text-black dark:text-white"),K={xs:"xs",small:"xs",medium:"xs",normal:"tiny",large:"small",xl:"medium"},B=p(()=>K[t.size]);return(S,D)=>{const oe=ie("CommonIcon"),y=bt("tooltip");return b(),x("div",Ss,[de(Ln,{initials:n.value,size:S.size,icon:o.value,class:T(h.value),image:d.value,"vip-icon":f.value?"vip-user":void 0,decorative:S.decorative,"aria-label":C.value},null,8,["initials","size","icon","class","image","vip-icon","decorative","aria-label"]),O.value?Ie((b(),x("div",Fs,[de(oe,{class:T(H.value),label:m(w),size:B.value,name:O.value},null,8,["class","label","size","name"])])),[[y,m(w)]]):P("",!0)])}}});let Mn={base:"common-organization-avatar-base",inactive:"common-organization-avatar-inactive"};const uu=e=>{Mn=e},Is=()=>Mn,du=j({__name:"CommonOrganizationAvatar",props:{entity:{},size:{}},setup(e){const t=e,n=p(()=>t.entity.active?"organization":"inactive-organization"),{base:a,inactive:i}=Is();return(r,s)=>(b(),E(Ln,{class:T([m(a),{[m(i)]:!r.entity.active}]),size:r.size,icon:n.value,"aria-label":`Avatar (${r.entity.name})`,"vip-icon":r.entity.vip?"vip-organization":void 0},null,8,["class","size","icon","aria-label","vip-icon"]))}}),pu=["clearable","futureOnly","maxDate","minDate","range"],fu=e=>{const t=p(()=>e.value.type==="datetime"),n=p(()=>t.value?"iso":"yyyy-MM-dd"),a=He(),i=p(()=>{var l;return((l=a.localeData)==null?void 0:l.dir)===ja.Rtl?"right":"left"}),r=p(()=>e.value.futureOnly?new Date:e.value.minDate),s=p(()=>{let l=c.getDateFormat();return t.value&&(l=c.getDateTimeFormat()),l=l.replace(/m/g,"{m}"),l=l.replace(/M/g,"m"),l=l.replace(/\{m\}/g,"M"),l=l.replace(/l/g,"h"),l=l.replace(/P/g,"aaa"),l}),o=p(()=>c.getTimeFormatType()==="24hour");return{ariaLabels:p(()=>({toggleOverlay:c.t("Toggle the overlay"),menu:c.t("Datepicker menu"),input:c.t("Datepicker input field"),openTimePicker:c.t("Open the time picker"),closeTimePicker:c.t("Close the time picker"),incrementValue:l=>{switch(l){case"hours":return c.t("Increment hours value");case"minutes":return c.t("Increment minutes value");case"seconds":default:return c.t("Increment seconds value")}},decrementValue:l=>{switch(l){case"hours":return c.t("Decrement hours value");case"minutes":return c.t("Decrement minutes value");case"seconds":default:return c.t("Decrement seconds value")}},openTpOverlay:l=>{switch(l){case"hours":return c.t("Open the hours overlay");case"minutes":return c.t("Open the minutes overlay");case"seconds":default:return c.t("Open the seconds overlay")}},amPmButton:c.t("Toggle AM/PM mode"),openYearsOverlay:c.t("Open the years overlay"),openMonthsOverlay:c.t("Open the months overlay"),nextMonth:c.t("Next month"),prevMonth:c.t("Previous month"),nextYear:c.t("Next year"),prevYear:c.t("Previous year"),clearInput:c.t("Clear the value"),calendarIcon:c.t("The calendar icon"),timePicker:c.t("The time picker"),monthPicker:l=>l?c.t("The month picker overlay"):c.t("The month picker"),yearPicker:l=>l?c.t("The year picker overlay"):c.t("The year picker"),timeOverlay:l=>{switch(l){case"hours":return c.t("The hours overlay");case"minutes":return c.t("The minutes overlay");case"seconds":default:return c.t("The seconds overlay")}}})),displayFormat:s,is24:o,localeStore:a,minDate:r,position:i,timePicker:t,valueFormat:n}},Os={ruleType:"date_range",rule:e=>{const{value:t}=e,n=t.at(0),a=t.at(1);return!n||!a?!1:n<=a},localeMessage:()=>__("The start date must precede or match end date.")},Es=Object.freeze(Object.defineProperty({__proto__:null,default:Os},Symbol.toStringTag,{value:"Module"})),zs=W`
    query autocompleteSearchObjectAttributeExternalDataSource($input: AutocompleteSearchObjectAttributeExternalDataSourceInput!) {
  autocompleteSearchObjectAttributeExternalDataSource(input: $input) {
    value
    label
    labelPlaceholder
    heading
    headingPlaceholder
  }
}
    `,mu=e=>({actionIcon:"search",gqlQuery:zs,additionalQueryParams:()=>{var u,l;const n={object:e.value.object,attributeName:e.value.node.name},{searchTemplateRenderContext:a,formId:i,object:r}=e.value,s={},o=(l=(u=e.value.node.at("$root"))==null?void 0:u.context)==null?void 0:l.initialEntityObject;if(o&&(s[`${r.toLowerCase()}Id`]=o.id),a){const d=a(i,o)||{};Object.assign(s,d)}return n.templateRenderContext=s,n},complexValue:!0,get clearValue(){return{}},initialOptionBuilder:(n,a)=>a}),Ps=W`
    fragment organizationAttributes on Organization {
  id
  internalId
  name
  shared
  domain
  domainAssignment
  active
  note
  vip
  ticketsCount {
    open
    closed
  }
  objectAttributeValues {
    ...objectAttributeValues
  }
}
    ${Da}`,vu=W`
    query autocompleteSearchOrganization($input: AutocompleteSearchOrganizationInput!) {
  autocompleteSearchOrganization(input: $input) {
    value
    label
    labelPlaceholder
    heading
    headingPlaceholder
    disabled
    icon
    organization {
      ...organizationAttributes
    }
  }
}
    ${Ps}`,Ls=e=>({label:e.name,value:e.internalId||(e.id?Tn("Organization",e.id):null),organization:e}),gu=()=>(e,t,n)=>{if(!n.belongsToObjectField||!e)return null;const a=e[n.belongsToObjectField];return a?Ls(a):null},Ms=W`
    query autocompleteSearchRecipient($input: AutocompleteSearchRecipientInput!) {
  autocompleteSearchRecipient(input: $input) {
    value
    label
    labelPlaceholder
    heading
    headingPlaceholder
    disabled
    icon
  }
}
    `,js=Ha(Ms),bu=e=>{const{props:t}=e;e.addProps(["contact","gqlQuery"]),t.allowUnknownValues=!0,t.contact==="phone"?(t.additionalQueryParams={contact:"phone"},t.filterInputPlaceholder=__("Search or enter phone number…"),t.filterInputValidation="matches:/^\\+?[1-9]\\d+$/"):(t.additionalQueryParams={contact:"email"},t.filterInputPlaceholder=__("Search or enter email address…"),t.filterInputValidation="email"),t.gqlQuery=js},hu=(e,t)=>{const n=p(()=>Object.keys(e.value.securityAllowed||{}).sort(l=>l===$e.Pgp?-1:l===$e.Smime?1:0)),a=p(()=>{var l;return((l=t.value)==null?void 0:l.method)??(n.value.find(d=>d===$e.Smime)||n.value[0])}),i=l=>{var d;return!!((d=t.value)!=null&&d.options.includes(l))},r=l=>{var d,f;return e.value.disabled||!((f=(d=e.value.securityAllowed)==null?void 0:d[a.value])!=null&&f.includes(l))},s=l=>{var d;return((d=e.value.securityDefaultOptions)==null?void 0:d[l])||[]},o=(l,d)=>d.filter(f=>{var v,w;return(w=(v=e.value.securityAllowed)==null?void 0:v[l])==null?void 0:w.includes(f)}).sort();return{securityMethods:n,previewMethod:a,isCurrentSecurityOption:i,isSecurityOptionDisabled:r,changeSecurityState:l=>{const d=o(l,s(l));t.value={method:l,options:d}}}},yu=e=>{const t={[$e.Pgp]:__("PGP"),[$e.Smime]:__("S/MIME")};return c.t(t[e]||e)},_u=e=>{const t=(n,a)=>{const i=a.optionValueLookup;if(Array.isArray(n))return n.filter(s=>typeof i[s]<"u"&&!i[s].disabled||s==="");if(typeof i[n]>"u"||i[n].disabled){if(typeof i[e.props._init]>"u"){const r=a.getPreselectValue;return a.clearable||r===void 0?void 0:r()}return e.props._init}return n};e.on("created",()=>{var a;const{context:n}=e;n&&((a=e.at("$root"))==null||a.settled.then(()=>{e.hook.input((i,r)=>!n.fns.hasValue(i)||!n.optionValueLookup?r(i):r(t(i,n)))}))})},wu=(e,t)=>{const{hasValue:n}=Xe(t),a=()=>{var r,s;return(s=(r=e.value)==null?void 0:r.find(o=>!o.disabled))==null?void 0:s.value};t.value.getPreselectValue=a;const i=()=>{!n.value&&!t.value.disabled&&!t.value.multiple&&!t.value.clearable&&e.value&&e.value.length>0&&t.value.node.input(a(),!1)};_t(()=>{t.value.noInitialAutoPreselect||i(),ee(()=>!n.value&&!t.value.disabled&&!t.value.multiple&&!t.value.clearable&&e.value,i)})};let jn={button:"field-file-button",listContainer:"field-file-list-container"};const Cu=e=>{jn=e},Ds=()=>jn;let Dn={track:"field-toggle-track",trackOn:"field-toggle-track--on",knob:"field-toggle-knob"};const ku=e=>{Dn=e},Rs=()=>Dn;let Rn={actionBar:{buttonContainer:"",tableMenuContainer:"",leftGradient:{left:"",before:{background:{light:"",dark:""}}},rightGradient:{before:{background:{light:"",dark:""}}},shadowGradient:{before:{top:"",height:""}},button:{base:"",active:""}},input:{container:""}};const Tu=e=>{Rn=e},xu=()=>Rn;let Un={actionBar:{button:{icon:{size:"small"}}}};const Au=e=>{Un=e},$u=()=>Un,Us=e=>{const{props:t,context:n}=e;!t.definition||!n||e.type!=="input"||(n.handlers.bindEmit=a=>i=>e.emit(a,i))},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));var xe=(e=>(e.Append="append",e.Prepend="prepend",e.Replace="replace",e.Merge="merge",e))(xe||{});const be=(e,t,n,a=xe.Merge,i=!1)=>{const{props:r}=e;if(!r.definition)return;const s=i?Ct(r.definition):r.definition,o=s.schema;s.schema=u=>{let l;const d=u[t]||{};if(a===xe.Merge)typeof d=="string"?l=n:l=cn(d,n);else if(a===xe.Replace)l=n;else{let v=null;d&&typeof d=="object"&&"children"in d&&Array.isArray(d.children)&&(v=d.children),v?l={children:a===xe.Append?[...v,n]:[n,...v]}:l={children:[n]}}const f={...u,[t]:l};return o(f)},r.definition=s},Vs=e=>{const{props:t,context:n}=e;!t.definition||!n||(n.fns.includes=(a,i)=>Array.isArray(a)?a.includes(i):!1,e.type==="input"&&(e.addProps(["parsedRules"]),n.fns.hasValue=a=>typeof a=="object"?!ln(a):a!=null&&a!=="",n.fns.hasRule=(a,i)=>a.some(r=>r.name===i),be(e,"outer",{attrs:{"data-populated":{if:"$fns.hasValue($value)",then:"true",else:void 0},"data-label-hidden":{if:"$labelSrOnly === true",then:"true",else:void 0},"data-required":{if:"$fns.hasRule($parsedRules, 'required')",then:"true",else:void 0},"data-dirty":{if:"$state.dirty",then:"true",else:void 0},"data-triggers-form-updater":{if:"$triggerFormUpdater",then:"true",else:void 0}}})))},Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),qs=e=>{be(e,"label",{attrs:{id:'$: "label-" + $id'}})},Ws=Object.freeze(Object.defineProperty({__proto__:null,default:qs},Symbol.toStringTag,{value:"Module"})),Bn=e=>Array.isArray(e)?(e.includes(["required"])||e.push(["required"]),e):e?e.includes("required")?e:`${e}|required`:"required",Vn=e=>e&&(Array.isArray(e)?e.filter(([t])=>t!=="required"):e.includes("required")?e.split("|").filter(t=>!t.includes("required")).join("|"):e),Mt=e=>{const{validation:t}=e;e.validation=Bn(t)},Hs=e=>{const{validation:t}=e;e.validation=Vn(t)},Gs=e=>{const{props:t,context:n}=e;!t.definition||!n||e.type!=="input"||(e.addProps(["required"]),t.required&&Mt(t),e.hook.prop(({prop:a,value:i},r)=>(a==="validation"&&(t.required?i=Bn(i):i=Vn(i)),r({prop:a,value:i}))),e.on("prop:required",({payload:a})=>{a?Mt(t):Hs(t)}))},Ks=Object.freeze(Object.defineProperty({__proto__:null,default:Gs},Symbol.toStringTag,{value:"Module"})),Qs=()=>{const{icons:e,aliases:t}=yn(),n=Ka(t);return Object.keys(e).reduce((a,i)=>{const r=n[i];return a[r||i]=e[i],a},{})},Ys=e=>{be(e,"wrapper",{attrs:{"data-variant":"$variant"}})},Zs=e=>{const{props:t}=e;e.addProps(["variant"]),e.on("created",()=>{kt(t,"variant")||(t.variant="primary")})},nt={button:Et,submit:Et},Nn=[];Object.keys(nt).forEach(e=>{pe(nt[e],{features:[Zs,Ys]}),Nn.push({fieldType:e,definition:nt[e]})});const Js=Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})),Xs=e=>{be(e,"wrapper",{attrs:{"data-is-checked":{if:"$value",then:"true",else:void 0},"data-test-id":"checkbox-label"}})},eo=e=>{if(se()!=="desktop")return;const{props:t}=e;e.addProps(["alternativeBorder"]);const n=a=>{a?t.decoratorClass="border-stone-200 dark:border-neutral-500 text-stone-200 dark:text-neutral-500 formkit-checked:border-gray-300 dark:formkit-checked:border-neutral-400 formkit-checked:text-gray-300 dark:formkit-checked:text-neutral-400":t.decoratorClass="border-stone-200 dark:border-neutral-500 text-stone-200 dark:text-neutral-500 formkit-checked:border-gray-100 dark:formkit-checked:border-neutral-400 formkit-checked:text-gray-100 dark:formkit-checked:text-neutral-400"};e.on("created",()=>{kt(t,"alternativeBorder")||(t.alternativeBorder=!1),n(t.alternativeBorder),e.on("prop:alternativeBorder",({payload:a})=>{n(a)})})};pe(un,{props:["alternativeBorder"],features:[Xs,eo,fe()]});const to={fieldType:"checkbox",definition:un},no=Object.freeze(Object.defineProperty({__proto__:null,default:to},Symbol.toStringTag,{value:"Module"})),At=e=>{e.hook.input((t,n)=>n(t===void 0?"":t))},ao={class:"flex"},io={class:"flex-1 ltr:pr-2 rtl:pl-2"},ro={key:1,class:"sr-only","aria-atomic":"true","aria-live":"polite"},so=j({__name:"FieldEditorFooter",props:{footer:{},characters:{}},setup(e){const t=e,n=p(()=>{const{maxlength:a}=t.footer;return a?a-t.characters:0});return(a,i)=>(b(),x("div",ao,[L("span",io,ae(a.footer.text),1),a.footer.maxlength!=null?(b(),x("span",{key:0,title:"Available characters",class:T(["text-right",{"text-red":n.value<0,"text-orange":a.footer.warningLength&&n.value>=0&&n.value<a.footer.warningLength}])},ae(n.value),3)):P("",!0),a.footer.maxlength!=null&&n.value<0?(b(),x("span",ro,ae(a.$t("You have exceeded the character limit by %s",0-n.value)),1)):P("",!0)]))}}),oo={class:"p-2"},lo=j({__name:"FieldEditorWrapper",props:{context:{}},setup(e){const t=_a(()=>wi(()=>import("./FieldEditorInput-u_JTcf6d.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12]))),n=e,a=p(()=>`${n.context.contentType==="text/plain"?"plain":"html"}-${n.context.id}`),i=[],r=o=>{i.push(o)},s={onLoad:i,getEditorValue:()=>"",addSignature:o=>r(u=>u.addSignature(o)),removeSignature:()=>r(o=>o.removeSignature()),focus:()=>r(o=>qe(()=>o.focus()))};return Object.assign(n.context,s),(o,u)=>(b(),E(ya,null,{fallback:re(()=>{var l,d;return[L("div",oo,[u[0]||(u[0]=L("div",{class:"h-20"},null,-1)),(l=o.context.meta)!=null&&l.footer&&!o.context.meta.footer.disabled?(b(),E(so,{key:0,footer:o.context.meta.footer,characters:((d=o.context._value)==null?void 0:d.length)||0},null,8,["footer","characters"])):P("",!0)])]}),default:re(()=>[(b(),E(m(t),ye(o.$attrs,{key:a.value,context:o.context}),null,16,["context"]))]),_:1}))}}),co=Je(lo,["groupId","ticketId","customerId","meta","contentType"],{features:[fe("delayed",500),At]}),uo={fieldType:"editor",definition:co},po=Object.freeze(Object.defineProperty({__proto__:null,default:uo},Symbol.toStringTag,{value:"Module"})),fo=["image/jpeg","image/png"],mo=(e,t)=>e<200&&t<200?1:e<400&&t<400?.9:e<600&&t<600?.8:e<900&&t<900?.7:.6,vo=(e,t,n)=>{const a=new Image,i=new Promise(r=>{a.onload=()=>{var C;const{x:s="auto",y:o="auto",quality:u="auto",scale:l=1,type:d=t}=((C=n==null?void 0:n.onCompress)==null?void 0:C.call(n,a,t))||{},f=a.width,v=a.height;te.debug("[Image Service] Image is loaded",{imageWidth:f,imageHeight:v});let w=s,A=o;if(A==="auto"&&w==="auto"&&(w=f,A=v),w!=="auto"&&w>f&&(w=f),A!=="auto"&&A>v&&(A=v),A==="auto"){const O=f/w;A=v/O}if(w==="auto"){const O=v/A;w=f/O}const g=document.createElement("canvas");w<f&&w*l<f||A<v&&A*l<v?(w*=l,A*=l,g.width=w,g.height=A,g.getContext("2d").drawImage(a,0,0,w,A)):(g.width=f,g.height=v,g.getContext("2d").drawImage(a,0,0,f,v));const h=u==="auto"?mo(f,v):u;try{const O=g.toDataURL(d,h);te.debug("[Image Service] Image is compressed",{quality:h,type:d,x:w,y:A,size:`${O.length*.75/1024/1024} Mb`}),r(O)}catch(O){te.debug("[Image Service] Failed to compress an image",O),r(e)}},a.onerror=()=>r(e)});return a.src=e,i},go=async e=>new Promise((t,n)=>{const a=new FileReader;a.onload=()=>t(a.result),a.onerror=()=>n(a.error),a.readAsDataURL(e)}),Su=e=>{const t=window.atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=Uint8Array.from(t,i=>i.charCodeAt(0));return new Blob([a],{type:n})},bo=async(e,t={})=>{const a=Array.from(e||[]).map(async r=>{let s=await go(r);return t!=null&&t.compress&&fo.includes(r.type)&&(s=await vo(s,r.type,t)),{name:r.name,type:r.type,content:s}});return(await Promise.all(a)).filter(r=>r.content)},ho=e=>!!(e&&e!=="text/html"),qn=()=>{const{config:e}=G();return e["active_storage.web_image_content_types"]||[]},Fu=()=>qn().join(","),Wn=e=>e?qn().includes(e)?"image":e==="text/calendar"?"calendar":!1:!1,Iu=(e,t)=>{const n=t==null?void 0:t.map(a=>({name:a.name,type:a.type}));return!n||!n.length?null:{files:n,formId:e}},yo=(e,t)=>e.size<=t,_o=(e,t)=>{const n=[];return e.forEach(a=>{t.forEach(i=>{i.types.includes(a.type)&&(yo(a,i.size)||n.push({file:a,label:i.label,maxSize:i.size}))})}),n},Ou=e=>{const t=new Set([]);return e.forEach(n=>{n.types.forEach(a=>{t.add(a)})}),Array.from(t).join(", ")},Hn=e=>e>1024*1024*1024?`${Math.round(e*10/(1024*1024))/10} MB`:e>1024?`${Math.round(e/1024)} KB`:`${e} Bytes`,Gn=()=>({validateFileSize:(t,n,a,i={writeToMsgStore:!1})=>{const r=Array.isArray(n)?n:Array.from(n),s=_o(r,a);if(s.length===0)return!0;const o=s[0],u=c.t("File is too big. %s has to be %s or smaller.",o.label,Hn(o.maxSize));return i.writeToMsgStore?t.store.set(Te({key:"fileSizeError",blocking:!0,value:u,type:"validation",visible:!0})):t.setErrors(u),!1}}),{validateFileSize:jt}=Gn(),wo=e=>{let t;e.on("created",()=>{e.on("prop:allowedFiles",({payload:n,origin:a})=>{n&&a.value?(jt(a,a.value,n,{writeToMsgStore:!0})||a.emit("prop:validationVisibility",Y.Live),t=a.on("commit",({payload:r,origin:s})=>{var u;if(!((u=s.context)!=null&&u.allowedFiles))return;jt(s,r,s.context.allowedFiles,{writeToMsgStore:!0})?(s.store.remove("fileSizeError"),s.emit("prop:validationVisibility",Y.Live)):s.emit("prop:validationVisibility",Y.Submit)})):!n&&t&&(a.store.remove("fileSizeError"),a.off(t),a.emit("prop:validationVisibility",Y.Submit))})})},Dt=(e,t)=>{var i;const n=(i=e.context)==null?void 0:i.accept,a=t.filter(r=>r.type&&!n.includes(r.type));return a.length===0?!0:(e.store.set(Te({key:"filesTypesError",blocking:!0,value:c.t("The file type %s is not allowed.",a[0].type),type:"validation",visible:!0})),!1)},Co=e=>{let t;e.on("created",()=>{e.on("prop:accept",({payload:n,origin:a})=>{n&&a.value?(Dt(a,a.value)||a.emit("prop:validationVisibility",Y.Live),t=a.on("commit",({payload:r,origin:s})=>{Dt(s,r)?(s.store.remove("filesTypesError"),s.emit("prop:validationVisibility",Y.Live)):s.emit("prop:validationVisibility",Y.Submit)})):!n&&t&&(a.store.remove("filesTypesError"),a.off(t),a.emit("prop:validationVisibility",Y.Submit))})})},ko=e=>{e.on("created",()=>{let t;e.on("prop:multiple",({payload:n,origin:a})=>{!n&&Array.isArray(a.value)&&a.value.length>1?(a.store.set(Te({key:"multipleFilesError",blocking:!0,value:c.t("This field allows only one file."),type:"validation",visible:!0})),a.emit("prop:validationVisibility",Y.Live),t=a.on("commit",({payload:i})=>{Array.isArray(i)&&i.length===1&&(a.store.remove("multipleFilesError"),a.emit("prop:validationVisibility",Y.Submit))})):n&&t&&(a.off(t),a.store.remove("multipleFilesError"),a.emit("prop:validationVisibility",Y.Submit))})})},Kn={objectAttributes:{outer:"div",wrapper:"section",classes:{}},tooltip:{type:"inline",component:()=>null},filePreview:{buttonComponent:()=>null,buttonProps:{}},fieldFile:{buttonComponent:()=>null}},Qn=()=>Kn,Eu=e=>{Object.assign(Kn,e)},To=()=>{const e=R(!1);if(window){let t;const n=()=>{e.value=window.matchMedia("(pointer: coarse)").matches,t==null||t.removeEventListener("change",n),t=window.matchMedia("(pointer: coarse)"),t.addEventListener("change",n,{once:!0})};n(),wa(()=>{t==null||t.removeEventListener("change",n)})}return{isTouchDevice:e}};let Yn={base:"common-file-preview",wrapper:"common-file-preview-wrapper",icon:"common-file-preview-icon",preview:"common-file-preview-preview",link:"common-file-preview-link",size:"common-file-preview-size"};const zu=e=>{Yn=e},xo=()=>Yn,Ao=e=>{if(!e)return"file";const t=e.replace(/^(.+?\/.+?)(\b|\s).+?$/,"$1");return{"image/jpeg":"photos","image/jpg":"photos","image/png":"photos","image/svg":"photos","image/gif":"photos","image/webp":"photos","audio/aac":"audio","audio/mp4":"audio","audio/mpeg":"audio","audio/amr":"audio","audio/ogg":"audio","video/mp4":"video","video/3gp":"video","application/pdf":"library","application/msword":"template","application/vnd.ms-word":"template","application/vnd.oasis.opendocument.text":"template","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"template","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"template","application/vnd.ms-excel":"file","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"file","application/vnd.oasis.opendocument.spreadsheet":"file","application/vnd.ms-powerpoint":"file","application/vnd.openxmlformats-officedocument.presentationml.presentation":"file","application/vnd.oasis.opendocument.presentation":"file","text/html":"template","application/json":"template","message/rfc822":"mail-file","text/plain":"template","text/rtf":"template","text/calendar":"calendar","application/gzip":"attachment","application/zip":"attachment"}[t]||"file"},$o=["src","alt"],So={class:"line-clamp-1"},Rt=j({__name:"CommonFilePreview",props:{file:{},downloadUrl:{},previewUrl:{},loading:{type:Boolean},noPreview:{type:Boolean},noRemove:{type:Boolean},wrapperClass:{},iconClass:{},sizeClass:{}},emits:["remove","preview"],setup(e,{emit:t}){const n=e,a=t,i=se(),r=R(!1),s=p(()=>{const{file:g,previewUrl:h}=n;if(!h||r.value)return!1;const C=Wn(g.type);return i==="mobile"&&C!=="image"?!1:C}),o=p(()=>ho(n.file.type)),u=p(()=>Ao(n.file.type)),l=p(()=>n.downloadUrl?"CommonLink":"div"),d=p(()=>n.downloadUrl&&o.value?c.t("Download %s",n.file.name):n.downloadUrl&&!o.value?c.t("Open %s",n.file.name):n.file.name),f=g=>{s.value&&a("preview",g,s.value)},{isTouchDevice:v}=To(),{filePreview:w}=Qn(),A=xo();return(g,h)=>{var H,K;const C=ie("CommonIcon"),O=bt("tooltip");return b(),x("div",{class:T(["group/file-preview flex w-full items-center gap-2 outline-hidden",[m(A).wrapper,g.wrapperClass]])},[!g.noPreview&&s.value?Ie((b(),x("button",{key:0,class:T(["flex h-9 w-9 shrink-0 items-center justify-center rounded",[{border:s.value!=="image"},m(A).preview]]),onClick:f,onKeydown:[h[1]||(h[1]=ve(me(B=>g.$emit("remove"),["prevent"]),["delete"])),h[2]||(h[2]=ve(me(B=>g.$emit("remove"),["prevent"]),["backspace"]))]},[s.value?(b(),x(Ce,{key:0},[s.value==="image"?(b(),x("img",{key:0,class:"h-9 w-9 rounded border object-cover",src:g.previewUrl,alt:g.$t("Image of %s",g.file.name),onError:h[0]||(h[0]=B=>r.value=!0)},null,40,$o)):(b(),E(C,{key:1,size:"base",decorative:"",name:u.value},null,8,["name"]))],64)):P("",!0)],34)),[[O,g.$t("Preview %s",n.file.name)]]):P("",!0),Ie((b(),E(ge(l.value),{class:T(["flex w-full items-center gap-2 overflow-hidden text-left outline-hidden select-none",{"cursor-pointer":l.value!=="div",[m(A).link]:!0}]),tabindex:"0",link:g.downloadUrl,download:o.value?g.file.name:void 0,target:o.value?void 0:"_blank",onKeydown:[h[3]||(h[3]=ve(me(B=>g.$emit("remove"),["prevent"]),["delete"])),h[4]||(h[4]=ve(me(B=>g.$emit("remove"),["prevent"]),["backspace"]))]},{default:re(()=>[s.value?P("",!0):(b(),x("div",{key:0,class:T(["flex h-9 w-9 items-center justify-center rounded border",[m(A).icon,g.iconClass]])},[g.loading?(b(),E(C,{key:0,size:"base",label:g.$t("File '%s' is uploading",g.file.name),name:"loading",animation:"spin"},null,8,["label"])):(b(),E(C,{key:1,size:"base",decorative:"",name:u.value},null,8,["name"]))],2)),L("div",{class:T(["flex flex-1 flex-col overflow-hidden",m(A).base])},[L("span",So,ae(g.file.name),1),g.file.size?(b(),x("span",{key:0,class:T(["line-clamp-1",[m(A).size,g.sizeClass]])},ae(m(Hn)(g.file.size)),3)):P("",!0)],2)]),_:1},40,["class","link","download","target"])),[[O,d.value]]),g.noRemove?P("",!0):(b(),E(ge((H=m(w))==null?void 0:H.buttonComponent),ye({key:1,class:[{"opacity-0 transition-opacity":!m(v)},"group-hover/file-preview:opacity-100 focus:opacity-100"],type:"button",icon:"remove-attachment","aria-label":m(c).t("Remove %s",g.file.name)},(K=m(w))==null?void 0:K.buttonProps,{onClick:h[5]||(h[5]=me(B=>g.$emit("remove"),["stop","prevent"])),onKeypress:h[6]||(h[6]=ve(me(B=>g.$emit("remove"),["prevent"]),["space"]))}),null,16,["class","aria-label"]))],2)}}}),at=R(new Map),Ut=R(),Bt=R(0),Fo=()=>{const e=se(),t=(a,i={},r=void 0)=>{const s=e==="desktop"?r||Va():"confirmation";return at.value.has(s)?new Promise(o=>{o(void 0)}):new Promise(o=>{at.value.set(s,{...i,text:a,confirmCallback(){o(!0)},cancelCallback(){o(!1)},closeCallback(){o(void 0)}}),Ut.value=s,Bt.value+=1})};return{lastConfirmationUuid:Ut,triggerConfirmation:Bt,confirmationOptions:at,waitForConfirmation:t,waitForVariantConfirmation:(a="confirm",i={},r=void 0)=>t("",{...i,confirmationVariant:a},r)}},he=R({visible:!1,index:0,images:[]}),Io=e=>{const t=new WeakMap;let n=[];return Ca(()=>{n=m(e).filter(s=>{const o=Wn(s.type);return o&&o==="image"}).map((s,o)=>(t.set(s,o),{src:s.inline||s.preview||s.content,title:s.name}))}),{isViewable:s=>t.has(s),showImage:s=>{const o=t.get(s)??0;he.value={index:o,images:n,visible:!0}},hideImage:()=>{he.value={images:[],index:0,visible:!1}}}},Oo=(e,t)=>{const n=Cn(e,t);return{setFileUploadProcessing:()=>{var r;(r=n==null?void 0:n.root)==null||r.store.set(Te({blocking:!0,key:"uploadProcessing",value:!0,visible:!1}))},removeFileUploadProcessing:()=>{var r;(r=n==null?void 0:n.root)==null||r.store.remove("uploadProcessing")}}},Eo=W`
    mutation formUploadCacheAdd($formId: FormId!, $files: [UploadFileInput!]!) {
  formUploadCacheAdd(formId: $formId, files: $files) {
    uploadedFiles {
      id
      name
      size
      type
    }
  }
}
    `;function zo(e={}){return Ge(Eo,e)}const Po=W`
    mutation formUploadCacheRemove($formId: FormId!, $fileIds: [ID!]!) {
  formUploadCacheRemove(formId: $formId, fileIds: $fileIds) {
    success
  }
}
    `;function Lo(e={}){return Ge(Po,e)}const Mo={ref:"drop-zone"},jo={key:0,class:"relative w-full"},Do={key:2,class:"relative w-full"},Ro={key:3,class:"w-full px-2.5"},Uo={class:"w-full p-1 text-center"},Bo=["id","name","aria-describedby","v-bind","accept","capture","multiple"],Vo=j({__name:"FieldFileInput",props:{context:{}},setup(e){const t=e,n=J(t,"context"),{validateFileSize:a}=Gn(),i=p({get(){return n.value._value||[]},set(k){t.context.node.input(k)}}),r=R({}),s=R([]),o=p(()=>i.value.map(k=>{const z=r.value[k.id];return{...k,content:z}})),u=new Ue(zo({})),l=u.loading(),d=new Ue(Lo({})),f=u.loading(),v=p(()=>!t.context.disabled&&!l.value&&!f.value),{setFileUploadProcessing:w,removeFileUploadProcessing:A}=Oo(t.context.formId,t.context.node.name),g=Me("file-input"),h=()=>{s.value=[];const k=g.value;k&&(k.value="",k.files=null,A())},C=async k=>{var N;s.value=Array.from(k||[]).map(Q=>({name:Q.name,size:Q.size,type:Q.type})),w();const z=await bo(k),q=await u.send({formId:t.context.formId,files:z}).catch(()=>{h()}),ne=(N=q==null?void 0:q.formUploadCacheAdd)==null?void 0:N.uploadedFiles;if(!ne){h();return}const $=ne.reduce((Q,pa,fa)=>(Q[pa.id]=z[fa].content,Q),{});r.value={...r.value,...$},i.value=[...i.value,...ne],h()};Object.assign(t.context,{uploadFiles:C});const O=async k=>{const z=k.target,{files:q}=z;t.context.allowedFiles&&q&&!a(t.context.node,q,t.context.allowedFiles)||q&&await C(q)},{waitForConfirmation:H}=Fo(),K=async k=>{const z=k.id;if(!await H(__('Are you sure you want to delete "%s"?'),{textPlaceholder:[k.name],buttonLabel:__("Delete"),buttonVariant:"danger"}))return;if(!z){i.value=i.value.filter($=>$!==k);return}const ne=i.value.find($=>$.id===z);ne&&(ne.isProcessing=!0),d.send({formId:t.context.formId,fileIds:[z]}).then($=>{var N;(N=$==null?void 0:$.formUploadCacheRemove)!=null&&N.success&&(i.value=i.value.filter(Q=>Q.id!==z))})},B=p(()=>t.context.multiple?i.value.length===0?__("Attach files"):__("Attach another file"):__("Attach file")),S=p(()=>!t.context.multiple&&(i.value.length>=1||s.value.length>=1)),D=R("1"),oe=k=>{const z=k.target,q=20,$=z.scrollHeight-z.clientHeight-q,{scrollTop:N}=z;if(N<=$){D.value="1";return}const Q=(N-$)/q;D.value=(1-Q).toFixed(2)},{showImage:y}=Io(o),_=Me("files-container");ys(_,{direction:"vertical"});const F=se(),I=Ds(),{fieldFile:V}=Qn(),M=p(()=>I.divider&&!S.value&&(i.value.length||s.value.length)),It=p(()=>F==="mobile"&&(i.value.length>2||s.value.length>2)),ca=p(()=>{var k;return(k=t.context.accept)==null?void 0:k.split(",")}),ua=Me("drop-zone"),{isOverDropZone:da}=ka(ua,{dataTypes:ca,onDrop:k=>{k&&C(k)}});return(k,z)=>{var ne;const q=ie("CommonLabel");return b(),x("div",{class:T(["relative",k.context.classes.input])},[L("div",Mo,[It.value?(b(),x("div",jo,z[3]||(z[3]=[L("div",{class:"file-list show-gradient top-gradient absolute h-5 w-full"},null,-1)]))):P("",!0),i.value.length||s.value.length?(b(),x("div",{key:1,ref:"files-container",role:"list",class:T(["overflow-auto",{"opacity-60":!v.value,"pb-4":S.value,[m(I).listContainer]:!0}]),onScrollPassive:z[0]||(z[0]=$=>oe($))},[(b(!0),x(Ce,null,Oe(o.value,($,N)=>(b(),E(Rt,{key:$.id||`${$.name}-${N}`,file:$,role:"listitem",class:T({"pointer-events-none opacity-75":$.isProcessing}),"no-remove":$.isProcessing,loading:$.isProcessing,"preview-url":$.preview||$.content,"download-url":$.content,onPreview:Q=>v.value&&m(y)($),onRemove:Q=>v.value&&K($)},null,8,["file","class","no-remove","loading","preview-url","download-url","onPreview","onRemove"]))),128)),(b(!0),x(Ce,null,Oe(s.value,($,N)=>(b(),E(Rt,{key:$.id||`${$.name}${N}`,role:"listitem",file:$,loading:"","no-remove":""},null,8,["file"]))),128))],34)):P("",!0),It.value?(b(),x("div",Do,[L("div",{class:"file-list show-gradient bottom-gradient absolute h-5 w-full",style:Zt({opacity:D.value})},null,4)])):P("",!0),M.value?(b(),x("div",Ro,[L("hr",{class:T(["h-px w-full border-0",m(I).divider])},null,2)])):P("",!0),L("div",Uo,[S.value?P("",!0):(b(),E(ge((ne=m(V))==null?void 0:ne.buttonComponent),{key:0,class:T(m(I).button),type:"button",size:"medium",variant:"secondary","prefix-icon":"attachment",disabled:!v.value,onClick:z[1]||(z[1]=$=>{var N;return v.value&&((N=m(g))==null?void 0:N.click())})},{default:re(()=>[Fe(ae(k.$t(B.value)),1)]),_:1},8,["class","disabled"])),L("input",{id:k.context.id,ref:"file-input",type:"file",name:k.context.node.name,"aria-describedby":k.context.describedBy,"v-bind":k.context.attrs,class:"hidden",tabindex:"-1","aria-hidden":"true",accept:k.context.accept,capture:k.context.capture,multiple:k.context.multiple,onChange:z[2]||(z[2]=$=>v.value&&O($))},null,40,Bo)])],512),m(I).dropZoneContainer&&m(da)?(b(),x("div",{key:0,class:T(["pointer-events-none absolute inset-0 z-10 flex items-center justify-center p-2.5",m(I).dropZoneContainer])},[L("div",{class:T(["flex h-full w-full items-center justify-center rounded border-2 border-dashed",m(I).dropZoneBorder])},[de(q,{class:"text-blue-800",size:i.value.length||s.value.length?"large":"medium"},{default:re(()=>[Fe(ae(k.$t("Drop files here")),1)]),_:1},8,["size"])],2)],2)):P("",!0)],2)}}}),No=Je(Vo,["multiple","capture","accept","allowedFiles"],{features:[ko,wo,Co]}),qo={fieldType:"file",definition:No},Wo=Object.freeze(Object.defineProperty({__proto__:null,default:qo},Symbol.toStringTag,{value:"Module"})),Ho={fieldType:"group",definition:li},Go=Object.freeze(Object.defineProperty({__proto__:null,default:Ho},Symbol.toStringTag,{value:"Module"}));pe(dn,{features:[fe()]});const Ko={fieldType:"hidden",definition:dn},Qo=Object.freeze(Object.defineProperty({__proto__:null,default:Ko},Symbol.toStringTag,{value:"Module"})),Yo=e=>{e.addProps(["onSubmit"]),e.on("created",()=>{!e.context||typeof e.props.onSubmit!="function"||(e.context.attrs.onKeypress=t=>{t.key==="Enter"&&(t.preventDefault(),e.props.onSubmit.call(null,new SubmitEvent("submit",{submitter:t.target})))})})},Zo=e=>{let t=!1;const n=a=>{if(!a||a.animationName!=="onAutoFillStart"&&a.animationName!=="onAutoFillEnd"||a.animationName==="onAutoFillEnd"&&!t)return;const r=a.currentTarget.closest(".formkit-outer");if(r){if(a.animationName==="onAutoFillStart"){t=!0,r.dataset.populated="true";return}t=!1,delete r.dataset.populated}};e.on("created",()=>{e.context&&(e.context.attrs.onAnimationstart=n)})},it={text:ue,color:ue,email:ue,number:ue,tel:ue,time:ue,url:ue},Zn=[];Object.keys(it).forEach(e=>{pe(it[e],{features:[On,Yo,fe("delayed"),Zo,At]},{schema:ci}),Zn.push({fieldType:e,definition:it[e]})});const Jo=Object.freeze(Object.defineProperty({__proto__:null,default:Zn},Symbol.toStringTag,{value:"Module"})),Xo={fieldType:"list",definition:ui},el=Object.freeze(Object.defineProperty({__proto__:null,default:Xo},Symbol.toStringTag,{value:"Module"})),Jn=Ct(ue),tl=e=>{const{props:t}=e;t.suffixIconClass="select-none cursor-pointer",t.suffixIcon="show",t.onSuffixIconClick=()=>{t.type=t.type==="password"?"text":"password"},e.on("mounted",({origin:n})=>{var i;if(n.name!=="password"&&!t.id)return;const a=(i=document.getElementById(t.id))==null?void 0:i.nextElementSibling;a&&lt(a,"keydown",r=>{r.code==="Space"&&(t.type=t.type==="password"?"text":"password")})}),e.on("prop:type",({payload:n,origin:a})=>{const{props:i}=a;i.suffixIcon=n==="password"?"show":"hide"})};pe(Jn,{features:[tl,fe("delayed")]});const nl={fieldType:"password",definition:Jn},al=Object.freeze(Object.defineProperty({__proto__:null,default:nl},Symbol.toStringTag,{value:"Module"})),il=e=>{be(e,"wrapper",{attrs:{"data-is-checked":{if:"$fns.isChecked($option.value)",then:"true",else:void 0},"data-test-id":"radio-label"}})},rl=e=>{typeof e.props.onSubmit=="function"&&be(e,"wrapper",{attrs:{onKeypress:t=>{t.key==="Enter"&&(t.preventDefault(),e.props.onSubmit.call(null,new SubmitEvent("submit",{submitter:t.target})))}}})},sl=e=>{be(e,"label",{attrs:{id:null},children:[{if:"$option.icon",$cmp:"CommonIcon",props:{class:"inline-flex ltr:mr-3 rtl:ml-3",name:"$option.icon",size:"base"}},"$option.label"]})},ol=e=>{const{props:t}=e;e.addProps(["buttons"]);const n=a=>{a?(t.optionsClass="flex flex-col grow space-y-2",t.optionClass="formkit-disabled:opacity-30",t.labelClass="$reset",t.wrapperClass="items-center justify-center py-2 px-4 w-full h-14 text-lg font-normal text-white bg-gray-600 rounded-xl select-none formkit-is-checked:bg-white formkit-is-checked:text-black formkit-is-checked:font-semibold",t.inputClass="$reset sr-only",t.decoratorClass="hidden"):t.inputClass="h-4 w-4 border-[1.5px] border-white rounded-full bg-transparent focus:border-blue focus:bg-blue-highlight checked:focus:color-blue checked:bg-blue checked:border-blue checked:focus:bg-blue checked:hover:bg-blue"};e.on("created",()=>{kt(t,"buttons")||(t.buttons=!1),n(t.buttons),e.on("prop:buttons",({payload:a})=>{n(a)})})};pe(pn,{features:[il,rl,ol,sl,fe()]});const ll={fieldType:"radio",definition:pn},cl=Object.freeze(Object.defineProperty({__proto__:null,default:ll},Symbol.toStringTag,{value:"Module"})),ul=["placeholder","aria-label"],dl={class:"absolute flex shrink-0 items-center ltr:right-2 rtl:left-2"},pl={inheritAttrs:!1},fl=j({...pl,__name:"CommonInputSearch",props:{modelValue:{},noBorder:{type:Boolean},wrapperClass:{},placeholder:{default:__("Search…")}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const r=Ta(e,"modelValue",n),s=Me("filter-input"),o=()=>{var l;(l=s.value)==null||l.focus()};t({focus:o});const u=()=>{r.value="",o()};return(l,d)=>{const f=ie("CommonIcon");return b(),x("div",{class:T(["relative flex w-full items-center self-stretch",l.wrapperClass])},[de(f,{class:"text-gray absolute shrink-0 ltr:left-2 rtl:right-2",size:"base",name:"search",decorative:""}),Ie(L("input",ye({ref:"filter-input","onUpdate:modelValue":d[0]||(d[0]=v=>Jt(r)?r.value=v:null)},l.$attrs,{placeholder:l.i18n.t(l.placeholder),class:["placeholder:text-gray h-12 w-full grow rounded-xl bg-gray-500 px-9 text-base focus:ring-0 focus:shadow-none focus:outline-hidden",{"focus:border-white focus:ring-0":!l.noBorder,"focus:border-transparent":l.noBorder}],"aria-label":l.$t("Search…"),type:"text",role:"searchbox"}),null,16,ul),[[xa,m(r)]]),L("div",dl,[le(l.$slots,"controls"),m(r)&&m(r).length?(b(),E(f,{key:0,"aria-label":l.i18n.t("Clear Search"),class:"text-gray",size:"base",name:"input-cancel",onClick:me(u,["stop"])},null,8,["aria-label"])):P("",!0)])],2)}}}),ml=j({__name:"FieldSearch",props:{context:{}},setup(e){const t=e,{localValue:n}=Xe(J(t,"context"));return(a,i)=>(b(),E(fl,{id:t.context.id,modelValue:m(n),"onUpdate:modelValue":i[0]||(i[0]=r=>Jt(n)?n.value=r:null),disabled:t.context.disabled,placeholder:t.context.placeholder||t.context.attrs.placeholder,"wrapper-class":t.context.wrapperClass,"no-border":"",class:T(a.context.classes.input),onBlur:a.context.handlers.blur},null,8,["id","modelValue","disabled","placeholder","wrapper-class","class","onBlur"]))}}),vl=Je(ml,["noBorder"]),gl={fieldType:"search",definition:vl},bl=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"}));pe(fn,{features:[fe("delayed"),At]});const hl={fieldType:"textarea",definition:fn},yl=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"})),_l=["id","aria-labelledby","aria-disabled","aria-checked","aria-describedby","tabindex","v-bind"],wl=j({__name:"FieldToggleInput",props:{context:{}},setup(e){const t=e,n=J(t,"context"),{localValue:a}=Xe(n),i=p(()=>t.context.variants||{});ee(()=>t.context.variants,v=>{if(!v){console.warn("FieldToggleInput: variants prop is required, but not provided");return}if(a.value===void 0){const h=Object.keys(v);h.length===1&&qe(()=>{a.value=h[0]==="true"});return}if((a.value?"true":"false")in v)return;const g=(a.value?"false":"true")in v?!a.value:void 0;a.value=g},{immediate:!0});const r=p(()=>t.context.disabled?!0:!((a.value?"false":"true")in i.value)),s=v=>{if(ze(v),r.value)return;const w=a.value?"false":"true";w in i.value&&(a.value=w==="true")},o=p(()=>a.value?"true":"false"),u=p(()=>n.value.size==="small"?"w-8 h-5":"w-10 h-6"),l=p(()=>n.value.size==="small"?"w-[18px] h-[18px]":"w-[22px] h-[22px]"),d=p(()=>n.value.size==="small"?"ltr:translate-x-[13px] rtl:-translate-x-[13px]":"ltr:translate-x-[17px] rtl:-translate-x-[17px]"),f=Rs();return(v,w)=>(b(),x("button",{id:n.value.id,type:"button",role:"switch",class:T(["formkit-disabled:pointer-events-none relative inline-flex flex-shrink-0 cursor-pointer items-center rounded-full",[n.value.classes.input,m(f).track,u.value,{[m(f).trackOn]:m(a)}]]),"aria-labelledby":`label-${n.value.id}`,"aria-disabled":r.value,"aria-checked":o.value,"aria-describedby":n.value.describedBy,tabindex:n.value.disabled?"-1":"0","v-bind":n.value.attrs,onClick:s,onKeydown:ve(s,["space"])},[L("div",{class:T(["pointer-events-none inline-block transform rounded-full transition duration-200 ease-in-out",[m(f).knob,l.value,{"ltr:translate-x-px rtl:-translate-x-px":!m(a),[d.value]:m(a)}]])},null,2)],42,_l))}}),Cl=Je(wl,["variants","size"],{features:[On,fe()]}),kl={fieldType:"toggle",definition:Cl},Tl=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"})),xl=Object.assign({"../../components/Form/fields/FieldButton/index.ts":Js,"../../components/Form/fields/FieldCheckbox/index.ts":no,"../../components/Form/fields/FieldEditor/index.ts":po,"../../components/Form/fields/FieldFile/index.ts":Wo,"../../components/Form/fields/FieldGroup/index.ts":Go,"../../components/Form/fields/FieldHidden/index.ts":Qo,"../../components/Form/fields/FieldInputs/index.ts":Jo,"../../components/Form/fields/FieldList/index.ts":el,"../../components/Form/fields/FieldPassword/index.ts":al,"../../components/Form/fields/FieldRadio/index.ts":cl,"../../components/Form/fields/FieldSearch/index.ts":bl,"../../components/Form/fields/FieldTextarea/index.ts":yl,"../../components/Form/fields/FieldToggle/index.ts":Tl}),ft={form:pi},Vt=e=>{Object.values(e).forEach(t=>{const n=t.default;Qa(n)?n.forEach(a=>{ft[a.fieldType]=a.definition}):ft[n.fieldType]=n.definition})},Al=e=>(Vt(xl),e&&Vt(e),di(ft)),$l=()=>({ui:{add:()=>c.t("Add"),remove:()=>c.t("Remove"),removeAll:()=>c.t("Remove all"),incomplete:()=>c.t("Sorry, not all fields are filled out correctly."),submit:()=>c.t("Submit"),noFiles:()=>c.t("No file chosen."),moveUp:()=>c.t("Move up"),moveDown:()=>c.t("Move down"),isLoading:()=>c.t("Loading…"),loadMore:()=>c.t("Load more"),next:()=>c.t("Next"),prev:()=>c.t("Previous"),addAllValues:()=>c.t("Add all values"),addSelectedValues:()=>c.t("Add selected values"),removeAllValues:()=>c.t("Remove all values"),removeSelectedValues:()=>c.t("Remove selected values"),chooseDate:()=>c.t("Choose date"),changeDate:()=>c.t("Change date"),summaryHeader:()=>c.t("There were errors in your form."),close:()=>c.t("Close"),open:()=>c.t("Open")},validation:{accepted({name:e}){return c.t("Please accept the %s.",e)},alpha_spaces(){return c.t("This field can only contain letters and spaces.")},date_after({args:e}){return Array.isArray(e)&&e.length?c.t("This field must have a value that is after %s.",c.date(e[0])):c.t("This field must have a value that is in the future.")},alpha(){return c.t("This field can only contain alphabetical characters.")},alphanumeric(){return c.t("This field can only contain letters and numbers.")},contains_alpha(){return c.t("This field must contain alphabetical characters.")},contains_alphanumeric(){return c.t("This field must contain letters or numbers.")},contains_alpha_spaces(){return c.t("This field must contain letters or spaces.")},contains_symbol(){return c.t("This field must contain a symbol.")},contains_uppercase(){return c.t("This field must contain an uppercase letter.")},contains_lowercase(){return c.t("This field must contain a lowercase letter.")},contains_numeric(){return c.t("This field must contain numbers.")},symbol(){return c.t("This field must be a symbol.")},uppercase(){return c.t("This field can only contain uppercase letters.")},lowercase(){return c.t("This field can only contain lowercase letters.")},date_before({args:e}){return Array.isArray(e)&&e.length?c.t("This field must have a value that is before %s.",c.date(e[0])):c.t("This field must have a value that is in the past.")},between({args:e}){if(Number.isNaN(e[0])||Number.isNaN(e[1]))return c.t("This field was configured incorrectly and can't be submitted.");const[t,n]=Qi(e[0],e[1]);return c.t("This field must have a value that is between %s and %s.",t,n)},confirm(){return c.t("This field doesn't correspond to the expected value.")},date_format({args:e}){return Array.isArray(e)&&e.length?c.t(`This field isn't a valid date, please use the format "%s".`,e[0]):c.t("This field was configured incorrectly and can't be submitted.")},date_between({args:e}){return c.t("This field must have a value that is between %s and %s.",c.date(e[0]),c.date(e[1]))},email:c.t("Please enter a valid email address."),ends_with({args:e}){return c.t(`This field doesn't end with "%s".`,zt(e))},is(){return c.t("This field doesn't contain an allowed value.")},length({args:[e=0,t=1/0]}){const n=Number(e)<=Number(t)?e:t,a=Number(t)>=Number(e)?t:e;return n===1&&a===1/0?c.t("This field must contain at least one character."):n===0&&a?c.t("This field must not contain more than %s characters.",a):n&&a===1/0?c.t("This field must contain at least %s characters.",n):c.t("This field must contain between %s and %s characters.",n,a)},matches(){return c.t("This field doesn't contain an allowed value.")},max({node:{value:e},args:t}){return Array.isArray(e)?c.t("This field can't have more than %s entries.",t[0]):c.t("This field must have a value that is at most %s.",t[0])},mime({args:e}){return e[0]?c.t('This field must be of the type "%s".',e[0]):c.t("No file formats allowed.")},min({node:{value:e},args:t}){return Array.isArray(e)?c.t("This field can't have less than %s entries.",t[0]):c.t("This field must have a value that is at least %s.",t[0])},not({node:{value:e}}){return c.t(`This field can't contain the value "%s".`,e)},number(){return c.t("This field must contain a number.")},required(){return c.t("This field is required.")},require_one:({name:e,node:t,args:n})=>{const a=n.map(r=>{const s=t.at(r);return s?fi(s):!1}).filter(r=>!!r);a.unshift(e);const i=c.t("or");return c.t("%s is required.",a.map(r=>r.value).join(` ${i} `))},starts_with({args:e}){return c.t(`This field doesn't start with "%s".`,zt(e))},url(){return c.t("Please include a valid url.")},invalidDate:()=>c.t("The selected date is invalid.")}}),Xn=Object.assign({"../validation/rules/date-range.ts":Es}),Sl=()=>{const e={};return Object.values(Xn).forEach(t=>{const n=t.default;n!=null&&n.ruleType&&(e[n.ruleType]=n.rule)}),mi({...vi,...e})},Fl=()=>{const e={};return Object.values(Xn).forEach(t=>{const n=t.default;n!=null&&n.ruleType&&(e[n.ruleType]=n.localeMessage)}),e},Il=()=>{const e=We($l());return Object.assign(e.validation,Fl()),gi({staticLocale:e})},Z={input:"block focus:outline-hidden focus:ring-0"},Ol={global:{wrapper:"formkit-disabled:opacity-30",label:"formkit-label-hidden:sr-only",help:"text-xs",messages:"list-none",message:"text-xs"},text:Z,email:Z,url:Z,number:Z,search:Z,tel:Z,time:Z,date:Z,datetime:Z,textarea:Z,password:Z,checkbox:{wrapper:"inline-flex items-center cursor-pointer",inner:"flex",input:"appearance-none focus:outline-hidden focus:ring-0 focus:ring-offset-0",decorator:"relative invisible formkit-is-checked:visible rtl:-right-4 ltr:-left-4",decoratorIcon:"absolute"},radio:{wrapper:"inline-flex items-center cursor-pointer",inner:"flex",input:"appearance-none focus:outline-hidden focus:ring-0 focus:ring-offset-0",decorator:"relative invisible formkit-is-checked:visible rtl:-right-4 ltr:-left-4",decoratorIcon:"absolute"},button:{input:"flex justify-center items-center"},submit:{input:"flex justify-center items-center"}},El=Object.assign({}),Nt=e=>{const t=[];return Object.values(e).forEach(n=>{const a=n.default;t.push(a)}),t},zl=(e={})=>{const t=[...Nt(El)];e.coreClasses&&t.push(e.coreClasses),e.extensions&&t.push(...Nt(e.extensions));let n=Ol;return t.forEach(a=>{const i=a(n);n=cn(n,i)}),bi(n)},Pl=e=>{const t=[];return Object.values(e).forEach(n=>{const a=n.default;t.push(a)}),t},Ll=Object.assign({"./plugins/global/bindEmit.ts":Bs,"./plugins/global/extendDataAttributes.ts":Ns,"./plugins/global/extendLabel.ts":Ws,"./plugins/global/requiredValidation.ts":Ks}),Ml=Pl(Ll),qt='<svg width="16" height="16" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current"><path d="M20.8087 5.58815L11.3542 18.5881C11.1771 18.8316 10.8998 18.9824 10.5992 18.9985C10.2986 19.0147 10.0067 18.8946 9.80449 18.6715L3.25903 11.4493L4.74097 10.1062L10.4603 16.4169L19.1913 4.4118L20.8087 5.58815Z" /></svg>',jl=(e,t={},n=[],a={},i={})=>{const r=Qs();return{plugins:[Al(t),yi,Il(),Sl(),_i(void 0,{checkboxDecorator:i.checkboxDecorator||qt,radioDecorator:i.radioDecorator||qt,...r},void 0,()=>{}),...Ml,...n],locale:"staticLocale",config:{classes:zl(a),...e},props:{dirtyBehavior:"compare"}}};function Pu(e,t,n={},a=[],i={},r={}){e.use(hi,jl(t,n,a,i,r))}const Dl=e=>e.replace(/\s{2,}/g," ").trim(),Lu=(e,t)=>{const n={...t};return Object.entries(e||{}).forEach(([a,i])=>{a in n?n[a]=Dl(`${i||""} ${t[a]||""}`):n[a]=i}),n},Wt=e=>{const{body:t}=document;let n=document.getElementById("__svg__icons__dom__");n||(n=document.createElementNS("http://www.w3.org/2000/svg","svg"),n.style.position="absolute",n.style.width="0",n.style.height="0",n.id="__svg__icons__dom__",n.setAttribute("xmlns","http://www.w3.org/2000/svg"),n.setAttribute("xmlns:link","http://www.w3.org/1999/xlink"));const a=e.map(i=>i[1]).join(`
`);n.innerHTML=a,t.insertBefore(n,t.lastChild)},Mu=e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>Wt(e)):Wt(e)};let ea={colorSchemeList:{base:"",button:""}};const ju=e=>{ea=e},Du=()=>ea;let ta={base:"common-notification",baseContainer:"common-notification-container",error:"common-notification-error",info:"common-notification-info",message:"common-notification-message",success:"common-notification-success",warn:"common-notification-warn"};const Ru=e=>{ta=e},Rl=()=>ta;let Le=!1,Pe=!1,na=!1,aa=null,Se=null,Be=0,ke=new WeakMap;const $t=()=>{document.querySelectorAll('[role="tooltip"]').forEach(e=>e==null?void 0:e.remove()),Pe=!1},Ul=(e,t)=>{ke.has(e)||(Be+=1,ke.set(e,{modifiers:t}))},Bl=e=>{ke.has(e)&&(Be-=1,ke.delete(e))},Vl=e=>ke.get(e)||null,Nl=({top:e,left:t},n)=>{const a=document.createElement("div");a.classList.add("tooltip"),a.style.top=e,a.style.left=t,a.setAttribute("aria-hidden","true"),a.setAttribute("role","tooltip");const i=window.innerWidth/2;a.style.maxWidth=`${i}px`;const r=document.createElement("p");return r.textContent=n,a.insertAdjacentElement("afterbegin",r),a},Ht=(e,t)=>{var i;const n=((i=He().localeData)==null?void 0:i.dir)==="rtl";let a="";if(n){const r=e-t.width;a=`${r}px`,r<0&&(a="0px")}else a=`${e}px`,e+t.width>window.innerWidth&&(a=`${window.innerWidth-t.width}px`);return a},ql=(e,t,{event:n})=>{if(!n)return;const a=Nl({top:"0px",left:"0px"},t);document.body.appendChild(a);const i=a.getBoundingClientRect();let r,s;if(n){if("touches"in n){const{clientX:o,clientY:u}=n.touches[0];r=`${u}px`,s=Ht(o,i)}else{const{clientX:o,clientY:u}=n,l=10;window.innerHeight-u-30<i.height?r=`${u-l-i.height}px`:r=`${u+l}px`,s=Ht(o,i)}a.style.top=r,a.style.left=s,document.body.insertAdjacentElement("beforeend",a),setTimeout(()=>{a.classList.add("tooltip-animate")},500)}},Wl=e=>{const{parentElement:t}=e;return t?t.offsetWidth<t.scrollWidth:e.offsetWidth<e.scrollWidth},Hl=(e,t)=>{const n={isTruncated:!1,top:!1};return t!=null&&t.truncate&&(n.isTruncated=Wl(e)),n},Gl=e=>(e==null?void 0:e.closest("[data-tooltip]"))||null,Ve=e=>{if(Pe&&$t(),!e.target)return;const t=Gl(e.target);if(!t)return;const n=t.getAttribute("aria-label");if(!n||t.closest(".no-tooltip"))return;na=!0;const a=Vl(t),{isTruncated:i}=Hl(t,a==null?void 0:a.modifiers);!i&&(a!=null&&a.modifiers.truncate)||(Se&&clearTimeout(Se),Se=setTimeout(()=>{ql(t,n,{event:aa}),Pe=!0},300))},Ne=e=>{na&&(aa=e)},we=()=>{Se&&clearTimeout(Se),Pe&&$t()},ia=()=>{window.addEventListener("scroll",we,{passive:!0,capture:!0}),window.addEventListener("touchstart",Ve,{passive:!0}),window.addEventListener("touchmove",Ne,{passive:!0}),window.addEventListener("touchcancel",we,{passive:!0}),window.addEventListener("mouseover",Ve,{passive:!0}),window.addEventListener("mousemove",Ne,{passive:!0}),window.addEventListener("mouseout",we,{passive:!0})},ra=()=>{window.removeEventListener("touchstart",Ve),window.removeEventListener("touchmove",Ne),window.removeEventListener("touchcancel",we),window.removeEventListener("mouseover",Ve),window.removeEventListener("mousemove",Ne),window.removeEventListener("mouseout",we),window.removeEventListener("scroll",we)},Gt=()=>{ra(),ia()},Kl={name:"tooltip",directive:{mounted:(e,{value:t,modifiers:n})=>{t&&(e.setAttribute("aria-label",t),se()!=="mobile"&&(e.setAttribute("data-tooltip","true"),Ul(e,n),Le||(ia(),Le=!0,window.addEventListener("resize",Gt))))},updated(e,{value:t}){if(!t){e.getAttribute("aria-label")&&e.removeAttribute("aria-label");return}e.getAttribute("aria-label")!==t&&e.setAttribute("aria-label",t)},beforeUnmount(e){Bl(e),Be===1&&(Pe&&$t(),Le&&ra(),Le=!1,ke=new WeakMap,Be=0,window.removeEventListener("resize",Gt))}}},Uu=e=>{const{name:t,directive:n}=Kl;e.directive(t,n)},Bu=(e,t)=>e.every(a=>!(typeof a!="string"&&"isLayout"in a))?[{isLayout:!0,component:"FormGroup",props:t,children:e}]:e;var Ql=(e=>(e.PublicError="Error",e.AuthenticatedError="ErrorTab",e))(Ql||{});const St={title:__("Not Found"),message:__("This page doesn't exist."),messagePlaceholder:[],statusCode:an.NotFound},Ft=R({...St}),Yl=e=>{e.query.redirect||(Ft.value={...St})},Zl=(e={})=>(Ft.value={...St,...e},{name:e.type??"Error",query:{redirect:"1"}}),Vu=(e,t={})=>e.replace(Zl(t)),Ae=We({title:"",translateTitle:!0}),sa=p(()=>{const t=G().config.product_name;if(!Ae.title)return t;const n=Ae.translateTitle?c.t(Ae.title):Ae.title;return`${t} - ${n}`}),Jl=()=>{ee(sa,(e,t)=>{Ya(e)&&e!==t&&document&&(document.title=e)},{immediate:!0})};function Xl(){return{initializeMetaTitle:Jl,setViewTitle:(t,n=!0)=>{Object.assign(Ae,{title:t,translateTitle:n})},currentTitle:sa}}const ec=e=>{if(e.meta.title){const{setViewTitle:t}=Xl();t(e.meta.title)}},Kt=(e,t)=>{const{authenticated:n}=Qe();e.name!=="Login"&&e.meta.requiresAuth&&!n?(te.debug(`Route guard for '${e.path}': authentication - forbidden - unauthenticated.`),e.fullPath!=="/"?t({path:"/login",query:{redirect:e.fullPath}}):t({path:"/login"})):e.meta.redirectToDefaultRoute&&n?(te.debug(`Route guard for '${e.path}': authentication - forbidden - authenticated.`),t("/")):(te.debug(`Route guard for '${e.path}': authentication - allowed - public.`),t())},tc=(e,t,n)=>{let a;const i=G();i.loading?a=ee(()=>i.loaded,()=>{Kt(e,n)}):(a&&(a(),a=void 0),Kt(e,n))},nc=(e,t,n)=>{if(!e.meta.requiredPermission||!Qe().authenticated){te.debug(`Route guard for '${e.path}': permission - skip.`),n();return}if(!_e().hasPermission(e.meta.requiredPermission)){te.debug(`Route guard for '${e.path}': permission - forbidden.`),Ft.value={title:__("Forbidden"),message:__("You don't have the necessary permissions to access this page."),statusCode:an.Forbidden,route:e.fullPath},n({name:"Error",query:{redirect:"1"},replace:!0});return}te.debug(`Route guard for '${e.path}': permission - allowed.`),n()},oa=class mt{constructor(t){this.router=t,this.previousRoute=R(null),this.previousRoute.value=mt.getHistoryBackRoute(),t.afterEach(()=>{this.previousRoute.value=mt.getHistoryBackRoute()})}static getHistoryBackRoute(){if(typeof window>"u")return null;const{state:t}=window.history;return t&&typeof t.back=="string"?t.back:null}getBackUrl(t){return this.previousRoute.value||t}get hasBackUrl(){return this.previousRoute.value!==null}async back(t,n=[]){const a=this.previousRoute.value;return a&&!n.find(i=>a.includes(i))?this.router.back():this.router.push(t)}};oa.KEY_INJECT=Symbol("walker");let vt=oa;const Nu=()=>Xt(vt.KEY_INJECT),ac=(e,t)=>{const n=new vt(t);e.provide(vt.KEY_INJECT,n),e.config.globalProperties.$walker=n};function qu(e,t,n,a,i){const r=Aa({history:$a(i),routes:t}),s=r.beforeResolve(()=>{const{setInitialized:o}=G();o(),s()});return r.beforeEach(tc),r.beforeEach(nc),n==null||n.forEach(o=>r.beforeEach(o)),r.afterEach(ec),r.afterEach(Yl),a==null||a.forEach(o=>r.afterEach(o)),e.use(r),ac(e,r),r}const Wu=j({__name:"CommonImageViewer",setup(e){return(t,n)=>(b(),E(m(Sa),{imgs:m(he).images,index:m(he).index,visible:m(he).visible,onHide:n[0]||(n[0]=a=>m(he).visible=!1)},null,8,["imgs","index","visible"]))}}),ic={id:"Notifications",class:"flex w-full justify-center"},rc={class:"flex justify-center"},sc=["onKeydown","onClick"],oc=["innerHTML"],Hu=j({__name:"CommonNotifications",setup(e){const t=Rl(),{notifications:n,removeNotification:a}=wt(),i=s=>t[s.type],r=s=>{const{callback:o}=s;a(s.id),o&&o()};return(s,o)=>{const u=ie("CommonIcon");return b(),x("div",ic,[L("div",{class:T(["fixed top-0 z-50",m(t).baseContainer]),role:"alert"},[de(en,{tag:"div","enter-class":"opacity-0","leave-active-class":"transition-opacity duration-1000 opacity-0"},{default:re(()=>[(b(!0),x(Ce,null,Oe(m(n),l=>(b(),x("div",{key:l.id},[L("div",rc,[L("div",{class:T(["m-3 flex cursor-pointer items-center",[m(t).base,i(l)]]),role:"button",tabindex:"0",onKeydown:ve(d=>r(l),["enter"]),onClick:d=>r(l)},[de(u,{name:`common-notification-${l.type}`,size:"small",decorative:""},null,8,["name"]),L("span",{class:T(["text-sm",m(t).message]),innerHTML:m(Xr)(s.$t(l.message,...l.messagePlaceholder||[]))},null,10,oc)],42,sc)])]))),128))]),_:1})],2)])}}});var gt=(e=>(e.Push="dynamic-component.push",e.Destroy="dynamic-component.destroy",e))(gt||{});const la=(e,t)=>new CustomEvent(e,{detail:t}),Gu=async(e,t,n,a={})=>{const i=la("dynamic-component.push",{name:e,id:t,cmp:n,props:We(a)});window.dispatchEvent(i),await qe()},Ku=async(e,t)=>{const n=la("dynamic-component.destroy",{name:e,id:t});window.dispatchEvent(n),await qe()},Qu=j({__name:"DynamicInitializer",props:{name:{},transition:{}},setup(e){const t=e,n=Fa([]);return lt(window,gt.Push,({detail:a})=>{a.name===t.name&&(n.value=[...n.value,{...a,cmp:yt(a.cmp)}])}),lt(window,gt.Destroy,({detail:a})=>{if(a.name===t.name){if(!a.id){n.value=[];return}n.value=n.value.filter(i=>!(i.name===a.name&&i.id===a.id))}}),(a,i)=>a.transition?(b(),E(en,Ia(ye({key:0},a.transition)),{default:re(()=>[(b(!0),x(Ce,null,Oe(n.value,({cmp:r,name:s,id:o,props:u})=>(b(),E(ge(r),ye({key:`${s}-${o}`,ref_for:!0},u),null,16))),128))]),_:1},16)):a.$slots.default?le(a.$slots,"default",{key:2,components:n.value}):(b(!0),x(Ce,{key:1},Oe(n.value,({cmp:r,name:s,id:o,props:u})=>(b(),E(ge(r),ye({key:`${s}-${o}`,ref_for:!0},u),null,16))),128))}}),Yu=()=>{const e=_e(),t=Qe(),n=G(),a=Oa(),i=Ea();t.$subscribe(async(r,s)=>{s.authenticated&&!e.id?e.checkSession().then(async o=>{o&&await t.refreshAfterAuthentication(),i.name==="Login"&&a.replace("/")}):!s.authenticated&&e.id&&!s.externalLogout&&(await t.clearAuthentication(),a.replace("/login"))}),ee(()=>n.config.maintenance_mode,async(r,s)=>{!s&&r&&t.authenticated&&!e.hasPermission(["admin.maintenance","maintenance"])&&(await t.logout(),a.replace("/login"))})},Zu=()=>Xt(Symbol.for("FormKitConfig")),lc=W`
    query applicationBuildChecksum {
  applicationBuildChecksum
}
    `;function cc(e={}){return tn(lc,{},e)}const uc=W`
    subscription appMaintenance {
  appMaintenance {
    type
  }
}
    `;function dc(e={}){return rn(uc,{},e)}let rt,st,Qt;const Ju=(e={})=>{const t=(n,a)=>{wt().notify({id:"app-maintenance",message:n,type:on.Warn,persistent:!0,callback:a})};_t(()=>{if(rt)return;const n=60*1e3,a=za("ApplicationRebuildCheckInterval",n.toString()),i=We({pollInterval:parseInt(a.value,10)});ee(a,()=>{i.pollInterval=parseInt(a.value,10)}),rt=new nn(cc(i));const r=__("A newer version of the app is available. Please reload at your earliest.");rt.watchOnResult(s=>{s!=null&&s.applicationBuildChecksum.length&&(st||(st=s==null?void 0:s.applicationBuildChecksum,Re.set("useApplicationBuildChecksumQuery.firstResult")),(s==null?void 0:s.applicationBuildChecksum)!==st&&t(r,e.onNeedRefresh))}),Qt=new sn(dc()),Qt.onResult(s=>{var l,d;const o=(d=(l=s.data)==null?void 0:l.appMaintenance)==null?void 0:d.type;let u=r;if(!o){Re.set("useAppMaintenanceSubscription.subscribed");return}switch(o){case et.ConfigChanged:u=__("The configuration of Zammad has changed. Please reload at your earliest.");break;case et.RestartAuto:case et.RestartManual:break}t(u,()=>window.location.reload())})})},pc=W`
    subscription pushMessages {
  pushMessages {
    title
    text
  }
}
    `;function fc(e={}){return rn(pc,{},e)}let ot;const Xu=()=>{const e=t=>{wt().notify({message:t,type:on.Warn,persistent:!0})};_t(()=>{ot||(ot=new sn(fc()),ot.onResult(t=>{var a;const n=(a=t.data)==null?void 0:a.pushMessages;if(!(n!=null&&n.title)&&!(n!=null&&n.text)){Re.set("usePushMessagesSubscription.subscribed");return}e(`${n.title}: ${n.text}`)}))})},ed=W`
    fragment overviewAttributes on Overview {
  id
  internalId
  name
  link
  prio
  groupBy
  orderBy
  orderDirection
  organizationShared
  outOfOffice
  active
  ticketCount @include(if: $withTicketCount)
}
    `;export{qu as $,vu as A,Pu as B,Jc as C,au as D,Yc as E,ku as F,Cu as G,Tu as H,Au as I,Eu as J,Tc as K,Mu as L,kc as M,Cc as N,lu as O,ou as P,uu as Q,xc as R,Ru as S,tu as T,zu as U,ju as V,Uu as W,Bi as X,Bu as Y,kn as Z,cu as _,ys as a,Ps as a$,Ku as a0,Gu as a1,Fo as a2,ed as a3,Qe as a4,Xl as a5,Ju as a6,Xu as a7,Yu as a8,Zu as a9,Cn as aA,jc as aB,Ye as aC,Xc as aD,ar as aE,tr as aF,Zc as aG,se as aH,Gc as aI,Zr as aJ,Mi as aK,Hc as aL,Ii as aM,Lc as aN,nr as aO,Pc as aP,Li as aQ,ir as aR,Nu as aS,Zl as aT,Ql as aU,Io as aV,Rt as aW,Iu as aX,Ls as aY,bo as aZ,Bc as a_,Hu as aa,Wu as ab,Qu as ac,Rc as ad,Oc as ae,Ac as af,$c as ag,Ic as ah,wc as ai,Sc as aj,Qn as ak,Dl as al,Vc as am,Yr as an,Qc as ao,To as ap,Ri as aq,xi as ar,Ft as as,pt as at,Fc as au,nu as av,Hr as aw,Dc as ax,Y as ay,es as az,su as b,Uc as b0,Wn as b1,ho as b2,Jr as b3,Wc as b4,Yi as b5,Ou as b6,Ln as b7,Fu as b8,Kc as b9,Tn as ba,zo as bb,Oo as bc,Su as bd,xu as be,$u as bf,Du as bg,so as bh,Oi as bi,fl as bj,Vu as bk,Mc as bl,_s as bm,Ze as bn,zc as bo,Nc as bp,Ec as bq,Xe as c,iu as d,ru as e,Je as f,On as g,fe as h,du as i,fu as j,Os as k,As as l,Xr as m,qc as n,pu as o,mu as p,gu as q,bu as r,ze as s,hu as t,eu as u,yu as v,wu as w,_u as x,Lu as y,Pl as z};
//# sourceMappingURL=overviewAttributes.api-C09LSZ8O.js.map
