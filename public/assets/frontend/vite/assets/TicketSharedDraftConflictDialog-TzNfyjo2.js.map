{"version":3,"file":"TicketSharedDraftConflictDialog-TzNfyjo2.js","sources":["../../../../../app/frontend/shared/entities/ticket-shared-draft-zoom/graphql/mutations/ticketSharedDraftZoomUpdate.api.ts","../../../../../app/frontend/apps/desktop/pages/ticket/components/TicketDetailView/TicketSharedDraftConflictDialog.vue"],"sourcesContent":["import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nimport { TicketSharedDraftZoomAttributesFragmentDoc } from '../fragments/ticketSharedDraftZoomAttributes.api';\nimport { ErrorsFragmentDoc } from '../../../../graphql/fragments/errors.api';\nimport * as VueApolloComposable from '@vue/apollo-composable';\nimport * as VueCompositionApi from 'vue';\nexport type ReactiveFunction<TParam> = () => TParam;\n\nexport const TicketSharedDraftZoomUpdateDocument = gql`\n    mutation ticketSharedDraftZoomUpdate($sharedDraftId: ID!, $input: TicketSharedDraftZoomInput!) {\n  ticketSharedDraftZoomUpdate(input: $input, sharedDraftId: $sharedDraftId) {\n    sharedDraft {\n      ...ticketSharedDraftZoomAttributes\n    }\n    errors {\n      ...errors\n    }\n  }\n}\n    ${TicketSharedDraftZoomAttributesFragmentDoc}\n${ErrorsFragmentDoc}`;\nexport function useTicketSharedDraftZoomUpdateMutation(options: VueApolloComposable.UseMutationOptions<Types.TicketSharedDraftZoomUpdateMutation, Types.TicketSharedDraftZoomUpdateMutationVariables> | ReactiveFunction<VueApolloComposable.UseMutationOptions<Types.TicketSharedDraftZoomUpdateMutation, Types.TicketSharedDraftZoomUpdateMutationVariables>> = {}) {\n  return VueApolloComposable.useMutation<Types.TicketSharedDraftZoomUpdateMutation, Types.TicketSharedDraftZoomUpdateMutationVariables>(TicketSharedDraftZoomUpdateDocument, options);\n}\nexport type TicketSharedDraftZoomUpdateMutationCompositionFunctionResult = VueApolloComposable.UseMutationReturn<Types.TicketSharedDraftZoomUpdateMutation, Types.TicketSharedDraftZoomUpdateMutationVariables>;","<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { NotificationTypes } from '#shared/components/CommonNotifications/types.ts'\nimport { useNotifications } from '#shared/components/CommonNotifications/useNotifications.ts'\nimport type { FormRef } from '#shared/components/Form/types.ts'\nimport { useTicketSharedDraftZoomUpdateMutation } from '#shared/entities/ticket-shared-draft-zoom/graphql/mutations/ticketSharedDraftZoomUpdate.api.ts'\nimport type { TicketSharedDraftZoomInput } from '#shared/graphql/types.ts'\nimport { MutationHandler } from '#shared/server/apollo/handler/index.ts'\n\nimport CommonButton from '#desktop/components/CommonButton/CommonButton.vue'\nimport CommonDialog from '#desktop/components/CommonDialog/CommonDialog.vue'\nimport { closeDialog } from '#desktop/components/CommonDialog/useDialog.ts'\nimport { useTicketSharedDraft } from '#desktop/pages/ticket/composables/useTicketSharedDraft.ts'\n\nconst props = defineProps<{\n  sharedDraftId: string\n  sharedDraftParams: TicketSharedDraftZoomInput\n  form?: FormRef\n}>()\n\nconst { notify } = useNotifications()\nconst dialogName = 'shared-draft-conflict'\n\nconst { openSharedDraftFlyout } = useTicketSharedDraft()\n\nconst close = () => {\n  closeDialog(dialogName)\n}\n\nconst draftUpdateMutation = new MutationHandler(\n  useTicketSharedDraftZoomUpdateMutation(),\n  {\n    errorNotificationMessage: __('Draft could not be updated.'),\n  },\n)\n\nconst updateDraft = () => {\n  draftUpdateMutation\n    .send({\n      sharedDraftId: props.sharedDraftId,\n      input: props.sharedDraftParams,\n    })\n    .then(() => {\n      close()\n\n      notify({\n        id: 'shared-draft-detail-view-updated',\n        type: NotificationTypes.Success,\n        message: __('Shared draft has been updated successfully.'),\n      })\n    })\n}\n\nconst showDraft = () => {\n  close()\n  openSharedDraftFlyout('detail-view', props.sharedDraftId)\n}\n</script>\n\n<template>\n  <CommonDialog\n    :name=\"dialogName\"\n    header-title=\"Save Draft\"\n    content=\"There is an existing draft. Do you want to overwrite it?\"\n  >\n    <template #footer>\n      <div\n        class=\"flex items-center gap-2 ltr:justify-end rtl:flex-row-reverse rtl:justify-start\"\n      >\n        <CommonButton size=\"large\" variant=\"secondary\" @click=\"close()\">\n          {{ $t('Cancel & Go Back') }}\n        </CommonButton>\n        <CommonButton\n          size=\"large\"\n          prefix-icon=\"file-text\"\n          variant=\"tertiary\"\n          @click=\"showDraft()\"\n        >\n          {{ $t('Show Draft') }}\n        </CommonButton>\n        <CommonButton size=\"large\" variant=\"danger\" @click=\"updateDraft()\">\n          {{ $t('Overwrite Draft') }}\n        </CommonButton>\n      </div>\n    </template>\n  </CommonDialog>\n</template>\n"],"names":["TicketSharedDraftZoomUpdateDocument","gql","TicketSharedDraftZoomAttributesFragmentDoc","ErrorsFragmentDoc","useTicketSharedDraftZoomUpdateMutation","options","VueApolloComposable.useMutation","dialogName","props","__props","notify","useNotifications","openSharedDraftFlyout","useTicketSharedDraft","close","closeDialog","draftUpdateMutation","MutationHandler","updateDraft","NotificationTypes","showDraft"],"mappings":"6yEASO,MAAMA,EAAsCC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAW7CC,CAA0C;AAAA,EAC9CC,CAAiB,GACH,SAAAC,EAAuCC,EAA2S,GAAI,CAC7V,OAAAC,EAA+HN,EAAqCK,CAAO,CACpL,kGCFME,EAAa,sIAPnB,MAAMC,EAAQC,EAMR,CAAE,OAAAC,GAAWC,IAGb,CAAE,sBAAAC,GAA0BC,IAE5BC,EAAQ,IAAM,CAClBC,EAAYR,CAAU,CAAA,EAGlBS,EAAsB,IAAIC,EAC9Bb,EAAuC,EACvC,CACE,yBAA0B,GAAG,6BAA6B,CAC5D,CAAA,EAGIc,EAAc,IAAM,CACxBF,EACG,KAAK,CACJ,cAAeR,EAAM,cACrB,MAAOA,EAAM,iBAAA,CACd,EACA,KAAK,IAAM,CACJM,IAECJ,EAAA,CACL,GAAI,mCACJ,KAAMS,EAAkB,QACxB,QAAS,GAAG,6CAA6C,CAAA,CAC1D,CAAA,CACF,CAAA,EAGCC,EAAY,IAAM,CAChBN,IACgBF,EAAA,cAAeJ,EAAM,aAAa,CAAA"}