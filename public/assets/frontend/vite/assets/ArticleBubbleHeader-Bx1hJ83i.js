import{at as V,aM as W,aK as T}from"./overviewAttributes.api-C09LSZ8O.js";import{u as B}from"./useArticleSecurity-D_0zJIjN.js";import{f as y,t as S,a1 as x,a8 as q,m as _,p as v,u,D as f,y as d,Q as b,M as g,E as k,U as E,q as A,c as w,J as F,x as P,I as H,C as K,F as z,H as J}from"./vue-oicRkvo0.js";import{u as I}from"./useWhatsapp-Da8aokvI.js";import{_ as Q}from"./ObjectAttribute.vue_vue_type_script_setup_true_lang-S7kCEp8d.js";import{q as R}from"./routes-CgLO9M4y.js";import"./apollo-Cj5TVUDk.js";import"./vendor-C11O1Xx8.js";import"./commonjsHelpers-BosuxZz1.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./vite-FJshFMF2.js";import"./ticketArticleRetrySecurityProcess.api-pSAexXXb.js";import"./index-D5f5eTVX.js";import"./useBaseUrl-BsZiEKQE.js";import"./useCopyToClipboard-CjkPg__g.js";import"./useTicketSignature-LslYi6X7.js";import"./openExternalLink-B2ZtqYBi.js";import"./getAttachmentLinks-Dz1qdLDp.js";import"./useTicketView-CMOCBKg-.js";import"./dom-0wVl69Vp.js";import"./useDisplayObjectAttributes-sspS-pHp.js";const U={name:"chat",label:__("Chat"),icon:"chat"},G={class:"flex items-center gap-1.5"},X=y({__name:"ArticleMetaSecurity",props:{context:{}},setup(e){const o=e,{typeLabel:c,signingIcon:s,encryptionIcon:p,encryptionMessage:r,signedStatusMessage:a,encryptedStatusMessage:i,signingMessage:t}=B(S(o.context.article));return(n,m)=>{const l=x("CommonLabel"),h=q("tooltip");return _(),v("div",G,[u(c)?(_(),f(l,{key:0},{default:d(()=>[b(g(u(c)),1)]),_:1})):k("",!0),u(r)?E((_(),f(l,{key:1,"prefix-icon":u(p),class:"text-black! dark:text-white!"},{default:d(()=>[b(g(n.$t(u(i))),1)]),_:1},8,["prefix-icon"])),[[h,u(r)]]):k("",!0),u(t)?E((_(),f(l,{key:2,"prefix-icon":u(s),class:"text-black! dark:text-white!"},{default:d(()=>[b(g(n.$t(u(a))),1)]),_:1},8,["prefix-icon"])),[[h,u(t)]]):k("",!0)])}}}),Y={name:"email",icon:"mail",label:__("Email"),additionalFields:[{name:"subject",order:350,label:__("Subject")},{name:"securityState",order:500,show:e=>{const{hasError:o}=B(e);return o.value},component:X,label:__("Security")}]},Z={name:"facebook direct message",label:__("Facebook Direct Message"),icon:"facebook"},ee={name:"facebook feed comment",label:__("Facebook Feed Comment"),icon:"facebook"},te={name:"facebook feed post",label:__("Facebook Feed Post"),icon:"facebook"},ae={name:"fax",label:__("Fax"),icon:"fax"},oe={name:"note",label:__("Note"),icon:"note"},se={name:"phone",label:__("Phone"),icon:"telephone"},ne={name:"sms",label:__("SMS"),icon:"sms"},re={name:"telegram",label:__("Telegram"),icon:"telegram"},ce={name:"twitter direct message",label:__("Twitter Direct Message"),icon:"twitter"},le={name:"twitter status",label:__("Twitter Status"),icon:"twitter"},ie={name:"web",label:__("Web"),icon:"globe"},_e={class:"flex items-center gap-1.5"},me=y({__name:"ArticleMetaWhatsappMessageStatus",props:{context:{}},setup(e){const o=e,{articleDeliveryStatus:c}=I(S(o.context,"article"));return(s,p)=>{var i,t;const r=x("CommonIcon"),a=x("CommonLabel");return _(),v("div",_e,[A(r,{"text-neutral-950":"",class:"text-black! dark:text-white!",width:"16",height:"16",name:"whatsapp"}),A(a,{class:"text-neutral-950! dark:text-white!"},{default:d(()=>[b(g(s.$t("whatsapp message")),1)]),_:1}),(i=u(c))!=null&&i.icon?(_(),f(r,{key:0,width:"16",height:"16",name:(t=u(c))==null?void 0:t.icon},null,8,["name"])):k("",!0),A(a,null,{default:d(()=>{var n;return[b(g((n=u(c))==null?void 0:n.message),1)]}),_:1})])}}}),pe={name:"whatsapp message",label:__("WhatsApp Message"),icon:"whatsapp",additionalFields:[{name:"preferences.whatsapp",label:__("Message Status"),show:e=>{const{hasDeliveryStatus:o}=I(e);return o.value},order:400,component:me}]},ue=Object.assign({"./plugins/chat.ts":U,"./plugins/email.ts":Y,"./plugins/facebookDirectMessage.ts":Z,"./plugins/facebookFeedComment.ts":ee,"./plugins/facebookFeedPost.ts":te,"./plugins/fax.ts":ae,"./plugins/note.ts":oe,"./plugins/phone.ts":se,"./plugins/sms.ts":ne,"./plugins/telegramPersonalMessage.ts":re,"./plugins/twitterDirectMessage.ts":ce,"./plugins/twitterStatus.ts":le,"./plugins/web.ts":ie,"./plugins/whatsappMessage.ts":pe}),de=Object.entries(ue).map(([,e])=>e),O=e=>de.find(o=>(o==null?void 0:o.name)===e),be={class:"flex gap-2"},L=y({__name:"ArticleMetaAddress",props:{context:{},type:{default:"from"}},setup(e){const o=e,c=a=>{var i,t,n,m,l,h,C,M,$;return o.type==="from"?(n=(t=(i=a.from)==null?void 0:i.parsed)==null?void 0:t.at(0))==null?void 0:n.emailAddress:o.type==="cc"?(h=(l=(m=a.cc)==null?void 0:m.parsed)==null?void 0:l.at(0))==null?void 0:h.emailAddress:($=(M=(C=a.to)==null?void 0:C.parsed)==null?void 0:M.at(0))==null?void 0:$.emailAddress},s=a=>{var i,t,n,m,l,h,C,M,$,D,j,N;return o.type==="from"?((n=(t=(i=a.from)==null?void 0:i.parsed)==null?void 0:t.at(0))==null?void 0:n.name)||((m=a.from)==null?void 0:m.raw):o.type==="cc"?((C=(h=(l=a.cc)==null?void 0:l.parsed)==null?void 0:h.at(0))==null?void 0:C.name)||((M=a.cc)==null?void 0:M.raw):((j=(D=($=a.to)==null?void 0:$.parsed)==null?void 0:D.at(0))==null?void 0:j.name)||((N=a.to)==null?void 0:N.raw)},p=w(()=>s(o.context.article)),r=w(()=>c(o.context.article));return(a,i)=>{const t=x("CommonLabel");return _(),v("div",be,[p.value?(_(),f(t,{key:0,class:"text-black! dark:text-white!"},{default:d(()=>[b(g(a.$t(p.value)),1)]),_:1})):k("",!0),r.value&&r.value!=="-"&&r.value!==p.value?(_(),f(t,{key:1},{default:d(()=>[b(g(`<${r.value}>`),1)]),_:1})):k("",!0)])}}}),ge=y({__name:"ArticleMetaDetectedLanguage",props:{context:{}},setup(e){const{attributesLookup:o}=V(R.TicketArticle),c=w(()=>o.value.get("detected_language"));return(s,p)=>{const r=x("CommonLabel");return _(),f(r,{class:"text-black! dark:text-white!"},{default:d(()=>[c.value?(_(),f(Q,{key:0,attribute:c.value,object:s.context.article},null,8,["attribute","object"])):(_(),v(F,{key:1},[b(g(s.context.article.detectedLanguage),1)],64))]),_:1})}}}),he=(e,o)=>o.reduce((c,s)=>{if(c&&typeof c=="object")return c[s]},e),fe=(e,o)=>{var s,p;const c=O((s=o.value.type)==null?void 0:s.name);return(p=c==null?void 0:c.additionalFields)!=null&&p.length&&c.additionalFields.forEach(r=>{var t,n;const a=r.name.split("."),i=he(o.value,a);if(r.show!==void 0&&!((t=r.show)!=null&&t.call(r,o)))return e;i&&e.push({label:r.label||((n=o.value.type)==null?void 0:n.name),name:r.name,component:r.component,order:r.order,value:i})}),e},ve=e=>{const o=w(()=>{var s;return((s=e.value.preferences)==null?void 0:s.links)||[]});return{fields:w(()=>{var r,a,i;const s=O((r=e.value.type)==null?void 0:r.name),p=[{label:__("Created at"),name:"created_at",component:W,props:{class:"text-sm",dateTime:e.value.createdAt,type:"absolute"},order:100},{label:__("From"),name:"from",component:L,props:{type:"from"},show:()=>{var t,n,m,l;return!!((m=(n=(t=e.value.from)==null?void 0:t.parsed)==null?void 0:n[0])!=null&&m.name||(l=e.value.from)!=null&&l.raw)},order:200},{label:__("To"),name:"to",component:L,props:{type:"to"},show:()=>{var t,n,m,l;return!!((m=(n=(t=e.value.to)==null?void 0:t.parsed)==null?void 0:n[0])!=null&&m.name||(l=e.value.to)!=null&&l.raw)},order:300},{label:__("CC"),name:"cc",component:L,props:{type:"cc"},show:()=>{var t,n,m,l;return!!((m=(n=(t=e.value.cc)==null?void 0:t.parsed)==null?void 0:n[0])!=null&&m.name||(l=e.value.cc)!=null&&l.raw)},order:350},{label:__("Detected language"),name:"detectedLanguage",component:ge,show:()=>{var t;return!!((t=e.value.detectedLanguage)!=null&&t.length)},order:375},{label:__("Channel"),name:"channel",value:s==null?void 0:s.name,icon:s==null?void 0:s.icon,links:(a=e.value.preferences)==null?void 0:a.links,component:(i=s==null?void 0:s.channel)==null?void 0:i.component,order:400}];return fe(p,e).filter(t=>t.show?t.show(e.value):!0).sort((t,n)=>t.order-n.order)}),links:o}},ke={class:"grid grid-cols-[max-content_1fr] gap-x-3 gap-y-2 rounded-t-xl p-3"},xe={class:"flex items-center gap-2"},we=y({__name:"ArticleBubbleMetaFields",props:{article:{}},setup(e){const o=e,{fields:c}=ve(S(o,"article"));return(s,p)=>{const r=x("CommonLink");return _(),v("div",ke,[(_(!0),v(F,null,P(u(c),(a,i)=>{var t;return _(),v(F,{key:`${a.label}-${i}`},[A(T,{class:"ltr:ml-auto rtl:mr-auto"},{default:d(()=>[b(g(s.$t(a.label)),1)]),_:2},1024),H("div",xe,[(_(),f(z(a.component||T),K({"prefix-icon":a.icon&&!a.component?a.icon:void 0,ref_for:!0},a.props||{},{context:{field:a,article:s.article},class:"text-black! dark:text-white!"}),{default:d(()=>[b(g(a.value),1)]),_:2},1040,["prefix-icon","context"])),(t=a.links)!=null&&t.length?(_(!0),v(F,{key:0},P(a.links,({url:n,api:m,label:l,target:h})=>(_(),f(r,{key:n,link:n,"rest-api":m,target:h,class:"text-sm! text-[rgba(255,255,255,0.75)]!"},{default:d(()=>[b(g(s.$t(l)),1)]),_:2},1032,["link","rest-api","target"]))),128)):k("",!0)])],64)}),128))])}}}),ye=["aria-label"],Je=y({__name:"ArticleBubbleHeader",props:{article:{},position:{}},setup(e){const o=e,c=w(()=>o.position==="right"?["dark:bg-stone-700","bg-blue-300"]:["dark:bg-gray-500","bg-neutral-50"]);return(s,p)=>(_(),v("header",{class:J(c.value),"aria-label":s.$t("Article meta information")},[A(we,{article:s.article,class:"px-6 py-3"},null,8,["article"])],10,ye))}});export{Je as default};
//# sourceMappingURL=ArticleBubbleHeader-Bx1hJ83i.js.map
