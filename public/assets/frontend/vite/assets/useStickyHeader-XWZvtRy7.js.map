{"version":3,"file":"useStickyHeader-XWZvtRy7.js","sources":["../../../../../app/frontend/shared/composables/useStickyHeader.ts"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { useScroll } from '@vueuse/core'\nimport { watch, ref, computed } from 'vue'\n\n// eslint-disable-next-line import/no-restricted-paths\nimport type LayoutHeader from '#mobile/components/layout/LayoutHeader.vue'\n\nimport type { CSSProperties, WatchSource } from 'vue'\n\nexport const useStickyHeader = (\n  dependencies: WatchSource[] = [],\n  header = ref<InstanceType<typeof LayoutHeader> | HTMLElement>(),\n) => {\n  const { y, directions } = useScroll(window.document, {\n    eventListenerOptions: { passive: true },\n  })\n\n  const stickyStyles = ref<{ header?: CSSProperties; body?: CSSProperties }>({})\n\n  const headerElement = computed({\n    get: () => {\n      if (!header.value) return null\n      return 'clientHeight' in header.value ? header.value : header.value?.$el\n    },\n    set: (value) => {\n      header.value = value\n    },\n  })\n\n  watch(\n    [y, ...dependencies],\n    () => {\n      if (!header.value) {\n        stickyStyles.value = {}\n        return\n      }\n      const height = headerElement.value?.clientHeight || directions.top\n      const show = y.value <= height\n      stickyStyles.value = {\n        header: {\n          left: '0',\n          right: '0',\n          top: '0',\n          zIndex: 9,\n          position: 'fixed',\n          transform: `translateY(${show ? '0px' : '-100%'})`,\n          transition: 'transform 0.3s ease-in-out',\n        },\n        body: {\n          marginTop: `${height}px`,\n        },\n      } as const\n    },\n    { flush: 'post' },\n  )\n\n  return {\n    stickyStyles,\n    headerElement,\n  }\n}\n"],"names":["useStickyHeader","dependencies","header","ref","y","directions","useScroll","stickyStyles","headerElement","computed","_a","value","watch","height","show"],"mappings":"4DAUO,MAAMA,EAAkB,CAC7BC,EAA8B,CAC9B,EAAAC,EAASC,MACN,CACH,KAAM,CAAE,EAAAC,EAAG,WAAAC,CAAA,EAAeC,EAAU,OAAO,SAAU,CACnD,qBAAsB,CAAE,QAAS,EAAK,CAAA,CACvC,EAEKC,EAAeJ,EAAsD,CAAA,CAAE,EAEvEK,EAAgBC,EAAS,CAC7B,IAAK,IAAM,OACL,OAACP,EAAO,MACL,iBAAkBA,EAAO,MAAQA,EAAO,OAAQQ,EAAAR,EAAO,QAAP,YAAAQ,EAAc,IAD3C,IAE5B,EACA,IAAMC,GAAU,CACdT,EAAO,MAAQS,CACjB,CAAA,CACD,EAED,OAAAC,EACE,CAACR,EAAG,GAAGH,CAAY,EACnB,IAAM,OACA,GAAA,CAACC,EAAO,MAAO,CACjBK,EAAa,MAAQ,GACrB,MACF,CACA,MAAMM,IAASH,EAAAF,EAAc,QAAd,YAAAE,EAAqB,eAAgBL,EAAW,IACzDS,EAAOV,EAAE,OAASS,EACxBN,EAAa,MAAQ,CACnB,OAAQ,CACN,KAAM,IACN,MAAO,IACP,IAAK,IACL,OAAQ,EACR,SAAU,QACV,UAAW,cAAcO,EAAO,MAAQ,OAAO,IAC/C,WAAY,4BACd,EACA,KAAM,CACJ,UAAW,GAAGD,CAAM,IACtB,CAAA,CAEJ,EACA,CAAE,MAAO,MAAO,CAAA,EAGX,CACL,aAAAN,EACA,cAAAC,CAAA,CAEJ"}