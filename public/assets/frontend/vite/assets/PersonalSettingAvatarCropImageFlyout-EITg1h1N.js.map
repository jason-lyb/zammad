{"version":3,"file":"PersonalSettingAvatarCropImageFlyout-EITg1h1N.js","sources":["../../../../../app/frontend/apps/desktop/pages/personal-setting/components/PersonalSettingAvatarCropImageFlyout.vue"],"sourcesContent":["<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { Cropper, type CropperResult } from 'vue-advanced-cropper'\nimport 'vue-advanced-cropper/dist/style.css'\n\nimport CommonAvatar from '#shared/components/CommonAvatar/CommonAvatar.vue'\nimport type { ImageFileData } from '#shared/utils/files.ts'\n\nimport CommonFlyout from '#desktop/components/CommonFlyout/CommonFlyout.vue'\n\ninterface Props {\n  image?: ImageFileData\n}\n\nconst props = defineProps<Props>()\n\ndefineEmits<{\n  'image-cropped': [ImageFileData | undefined]\n}>()\n\nconst croppedImage = ref<ImageFileData>()\n\nconst imageCropped = (crop: CropperResult) => {\n  if (!crop.canvas) return\n\n  croppedImage.value = {\n    content: crop.canvas.toDataURL('image/png'),\n    name: 'avatar.png',\n    type: 'image/png',\n  }\n}\n\nconst discardImage = () => {\n  croppedImage.value = undefined\n}\n</script>\n\n<template>\n  <CommonFlyout\n    :header-title=\"__('Crop Image')\"\n    :footer-action-options=\"{\n      actionLabel: __('Save'),\n      actionButton: { variant: 'submit' },\n    }\"\n    header-icon=\"image\"\n    name=\"avatar-file-upload\"\n    @action=\"$emit('image-cropped', croppedImage)\"\n    @close=\"discardImage\"\n  >\n    <div class=\"flex flex-col gap-3\">\n      <div v-if=\"croppedImage\" class=\"flex flex-row items-center gap-1\">\n        <CommonAvatar :image=\"croppedImage.content\" size=\"normal\" />\n        <CommonLabel>{{ $t('Avatar Preview') }}</CommonLabel>\n      </div>\n\n      <Cropper\n        :src=\"props.image?.content\"\n        :stencil-props=\"{\n          aspectRatio: 1,\n          class: 'cropper-stencil',\n          previewClass: 'cropper-stencil__preview',\n          draggingClass: 'cropper-stencil--dragging',\n          handlersClasses: {\n            default: 'cropper-handler',\n            eastNorth: 'cropper-handler--east-north',\n            westNorth: 'cropper-handler--west-north',\n            eastSouth: 'cropper-handler--east-south',\n            westSouth: 'cropper-handler--west-south',\n          },\n        }\"\n        :transitions=\"false\"\n        class=\"cropper !max-h-[340px] !max-w-[476px]\"\n        background-class=\"cropper-background\"\n        image-class=\"cropper__image\"\n        @change=\"imageCropped\"\n      />\n    </div>\n  </CommonFlyout>\n</template>\n\n<style scoped>\n:deep(.cropper-background) {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC');\n}\n\n:deep(.cropper__image) {\n  opacity: 1;\n}\n\n:deep(.cropper-stencil__preview) {\n  &::after,\n  &::before {\n    content: '';\n    opacity: 0;\n    transition: opacity 0.25s;\n    position: absolute;\n    pointer-events: none;\n    z-index: 1;\n  }\n\n  &::after {\n    border-left: solid 1px var(--color-white);\n    border-right: solid 1px var(--color-white);\n    width: 33%;\n    height: 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    top: 0;\n  }\n\n  &::before {\n    border-top: solid 1px var(--color-white);\n    border-bottom: solid 1px var(--color-white);\n    height: 33%;\n    width: 100%;\n    transform: translateY(-50%);\n    top: 50%;\n    left: 0;\n  }\n}\n\n:deep(.cropper-stencil--dragging .cropper-stencil__preview::after),\n:deep(.cropper-stencil--dragging .cropper-stencil__preview::before) {\n  opacity: 0.4;\n}\n\n:deep(.cropper-line) {\n  border-color: rgba(255, 255, 255, 0.8);\n}\n\n:deep(.cropper-handler) {\n  display: block;\n  opacity: 0.7;\n  position: relative;\n  flex-shrink: 0;\n  transition: opacity 0.5s;\n  border: none;\n  background: white;\n  top: auto;\n  left: auto;\n  height: 4px;\n  width: 4px;\n}\n\n:deep(.cropper-handler--west-north),\n:deep(.cropper-handler--east-south),\n:deep(.cropper-handler--west-south),\n:deep(.cropper-handler--east-north) {\n  display: block;\n  height: 16px;\n  width: 16px;\n  background: none;\n}\n\n:deep(.cropper-handler--west-north) {\n  border-left: solid 2px var(--color-white);\n  border-top: solid 2px var(--color-white);\n  top: 7px;\n  left: 7px;\n}\n\n:deep(.cropper-handler--east-south) {\n  border-right: solid 2px var(--color-white);\n  border-bottom: solid 2px var(--color-white);\n  top: -7px;\n  left: -7px;\n}\n\n:deep(.cropper-handler--west-south) {\n  border-left: solid 2px var(--color-white);\n  border-bottom: solid 2px var(--color-white);\n  top: -7px;\n  left: 7px;\n}\n\n:deep(.cropper-handler--east-north) {\n  border-right: solid 2px var(--color-white);\n  border-top: solid 2px var(--color-white);\n  top: 7px;\n  left: -7px;\n}\n\n:deep(.cropper-handler--hover) {\n  opacity: 1;\n}\n</style>\n"],"names":["props","__props","croppedImage","ref","imageCropped","crop","discardImage"],"mappings":"y+CAgBA,MAAMA,EAAQC,EAMRC,EAAeC,IAEfC,EAAgBC,GAAwB,CACvCA,EAAK,SAEVH,EAAa,MAAQ,CACnB,QAASG,EAAK,OAAO,UAAU,WAAW,EAC1C,KAAM,aACN,KAAM,WAAA,EACR,EAGIC,EAAe,IAAM,CACzBJ,EAAa,MAAQ,MAAA"}