import{f as S,r as E,a7 as p,ax as C,b9 as D,k as T,n as P,m as _,p as z,I as s,z as n,Q as i,M as d,q as A,y as B,C as u,L as f,W as K,H as M,u as V,K as I}from"./vue-oicRkvo0.js";import{s as N,u as q,am as g}from"./overviewAttributes.api-C09LSZ8O.js";import{_ as L,p as W}from"./mobile-Bk4bKGxF.js";const Y=["id","aria-label"],j={class:"relative flex h-16 shrink-0 items-center justify-center rounded-t-xl bg-gray-600/80 select-none"},H={class:"absolute top-0 bottom-0 flex items-center ltr:left-0 ltr:pl-4 rtl:right-0 rtl:pr-4"},O={class:"line-clamp-2 max-w-[65%] text-center text-base leading-[19px] font-semibold text-white"},Q={class:"absolute top-0 bottom-0 flex items-center ltr:right-0 ltr:pr-4 rtl:left-0 rtl:pl-4"},R={inheritAttrs:!1},J=S({...R,__name:"CommonDialog",props:{name:{},label:{},content:{},noAutofocus:{type:Boolean},listeners:{}},emits:["close"],setup(v,{emit:b}){const c=v,w=b,y=-150,o=E("0"),a=p("dialog"),h=p("content"),l=async()=>{w("close"),await W(c.name)},$=()=>{const e=a.value;if(!e)return!1;const t=document.querySelectorAll("[data-common-dialog]");return t[t.length-1]===e};C("Escape",e=>{$()&&(N(e),l())});const{distanceY:r,isSwiping:x}=D(a,{onSwipe(){if(r.value<0){const e=Math.abs(r.value);o.value=`${e}px`}else o.value="0"},onSwipeEnd(){r.value<=y?l():o.value="0"},pointerTypes:["touch","pen"]});return q(a),T(()=>{if(c.noAutofocus)return;const e=g(h.value)||g(a.value);P(()=>{e==null||e.focus(),e==null||e.scrollIntoView({block:"nearest"})})}),(e,t)=>(_(),z("div",{id:`dialog-${e.name}`,class:"fixed inset-0 z-10 flex overflow-y-auto","aria-label":e.$t(e.label||e.name),role:"dialog"},[s("div",{ref:"dialog","data-common-dialog":"",class:M(["flex h-full grow flex-col overflow-x-hidden bg-black",{"transition-all duration-200 ease-linear":!V(x)}]),style:I({transform:`translateY(${o.value})`})},[t[3]||(t[3]=s("div",{class:"bg-gray-150/40 mx-4 h-2.5 shrink-0 rounded-t-xl"},null,-1)),s("div",j,[s("div",H,[n(e.$slots,"before-label")]),s("div",O,[n(e.$slots,"label",{},()=>[i(d(e.$t(e.label)),1)])]),s("div",Q,[n(e.$slots,"after-label",{},()=>{var m;return[A(L,u({class:"grow",variant:"primary","transparent-background":""},(m=e.listeners)==null?void 0:m.done,{onPointerdown:t[0]||(t[0]=f(()=>{},["stop"])),onClick:t[1]||(t[1]=k=>l()),onKeypress:t[2]||(t[2]=K(f(k=>l(),["prevent"]),["space"]))}),{default:B(()=>[i(d(e.$t("Done")),1)]),_:1},16)]})])]),s("div",u({ref:"content"},e.$attrs,{class:"flex grow flex-col items-start overflow-y-auto bg-black text-white"}),[n(e.$slots,"default",{},()=>[i(d(e.content),1)])],16)],6)],8,Y))}});export{J as _};
//# sourceMappingURL=CommonDialog.vue_vue_type_script_setup_true_lang-CID2Z6MI.js.map
