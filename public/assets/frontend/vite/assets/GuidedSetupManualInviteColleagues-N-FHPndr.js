import{M as v,N as A,c as h}from"./apollo-Cj5TVUDk.js";import{_ as j}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as y}from"./useForm-CUKec4n5.js";import{u as U}from"./useObjectAttributeFormData-BTXeBYyl.js";import{Y as F,at as I}from"./overviewAttributes.api-C09LSZ8O.js";import{u as O}from"./add.api-CxwFhgGn.js";import{q as p,r as S}from"./routes-CgLO9M4y.js";import{_ as M}from"./GuidedSetupActionFooter.vue_vue_type_script_setup_true_lang-Cze7-cY3.js";import{u as k}from"./useSystemSetup-CBS5N4Hd.js";import{f as N,m as V,p as x,q as c,u,J as C}from"./vue-oicRkvo0.js";import"./vendor-C11O1Xx8.js";import"./commonjsHelpers-BosuxZz1.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./vite-FJshFMF2.js";import"./desktop-l0eJ1dZN.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./LayoutPublicPageBoxActions-BFjF_v1c.js";const pt=N({__name:"GuidedSetupManualInviteColleagues",setup(E){const{setBoxSize:s,setTitle:d}=k();s==null||s("large"),d(__("Invite Colleagues"));const{form:a}=y(),{notify:f}=h(),l=F([{screen:"invite_agent",object:p.User}]),b=t=>t.reduce((e,r)=>(r.groups&&e.push(...r.groups.map(i=>({groupInternalId:i,accessType:Object.keys(r.groupAccess).reduce((n,o)=>(r.groupAccess[o]&&n.push(o),n),[])}))),e),[]),{attributesLookup:_}=I(p.User),g=async t=>{t.group_ids&&(t.group_ids=b(t.group_ids));const{internalObjectAttributeValues:e,additionalObjectAttributeValues:r}=U(_.value,t),i={...e,objectAttributeValues:r};return new v(O()).send({input:i,sendInvite:!0}).then(async o=>{var m;(m=o==null?void 0:o.userAdd)!=null&&m.user&&f({id:"invite-colleagues",type:A.Success,message:__("Invitation sent!")})})};return(t,e)=>(V(),x(C,null,[c(j,{id:"invite-colleagues",ref_key:"form",ref:a,"form-class":"mb-2.5",schema:u(l),"form-updater-id":u(S).FormUpdaterUpdaterUserInvite,"use-object-attributes":"","clear-values-after-submit":"",onSubmit:g},null,8,["schema","form-updater-id"]),c(M,{form:u(a),"submit-button-text":t.__("Send Invitation"),"continue-button-text":t.__("Finish Setup"),"continue-route":"/guided-setup/manual/finish"},null,8,["form","submit-button-text","continue-button-text"])],64))}});export{pt as default};
//# sourceMappingURL=GuidedSetupManualInviteColleagues-N-FHPndr.js.map
