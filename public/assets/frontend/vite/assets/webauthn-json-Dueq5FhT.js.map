{"version":3,"file":"webauthn-json-Dueq5FhT.js","sources":["../../../../../node_modules/.pnpm/@github+webauthn-json@2.1.1/node_modules/@github/webauthn-json/dist/esm/webauthn-json.js"],"sourcesContent":["// src/webauthn-json/base64url.ts\nfunction base64urlToBuffer(baseurl64String) {\n  const padding = \"==\".slice(0, (4 - baseurl64String.length % 4) % 4);\n  const base64String = baseurl64String.replace(/-/g, \"+\").replace(/_/g, \"/\") + padding;\n  const str = atob(base64String);\n  const buffer = new ArrayBuffer(str.length);\n  const byteView = new Uint8Array(buffer);\n  for (let i = 0; i < str.length; i++) {\n    byteView[i] = str.charCodeAt(i);\n  }\n  return buffer;\n}\nfunction bufferToBase64url(buffer) {\n  const byteView = new Uint8Array(buffer);\n  let str = \"\";\n  for (const charCode of byteView) {\n    str += String.fromCharCode(charCode);\n  }\n  const base64String = btoa(str);\n  const base64urlString = base64String.replace(/\\+/g, \"-\").replace(\n    /\\//g,\n    \"_\"\n  ).replace(/=/g, \"\");\n  return base64urlString;\n}\n\n// src/webauthn-json/convert.ts\nvar copyValue = \"copy\";\nvar convertValue = \"convert\";\nfunction convert(conversionFn, schema2, input) {\n  if (schema2 === copyValue) {\n    return input;\n  }\n  if (schema2 === convertValue) {\n    return conversionFn(input);\n  }\n  if (schema2 instanceof Array) {\n    return input.map((v) => convert(conversionFn, schema2[0], v));\n  }\n  if (schema2 instanceof Object) {\n    const output = {};\n    for (const [key, schemaField] of Object.entries(schema2)) {\n      if (schemaField.derive) {\n        const v = schemaField.derive(input);\n        if (v !== void 0) {\n          input[key] = v;\n        }\n      }\n      if (!(key in input)) {\n        if (schemaField.required) {\n          throw new Error(`Missing key: ${key}`);\n        }\n        continue;\n      }\n      if (input[key] == null) {\n        output[key] = null;\n        continue;\n      }\n      output[key] = convert(\n        conversionFn,\n        schemaField.schema,\n        input[key]\n      );\n    }\n    return output;\n  }\n}\nfunction derived(schema2, derive) {\n  return {\n    required: true,\n    schema: schema2,\n    derive\n  };\n}\nfunction required(schema2) {\n  return {\n    required: true,\n    schema: schema2\n  };\n}\nfunction optional(schema2) {\n  return {\n    required: false,\n    schema: schema2\n  };\n}\n\n// src/webauthn-json/basic/schema.ts\nvar publicKeyCredentialDescriptorSchema = {\n  type: required(copyValue),\n  id: required(convertValue),\n  transports: optional(copyValue)\n};\nvar simplifiedExtensionsSchema = {\n  appid: optional(copyValue),\n  appidExclude: optional(copyValue),\n  credProps: optional(copyValue)\n};\nvar simplifiedClientExtensionResultsSchema = {\n  appid: optional(copyValue),\n  appidExclude: optional(copyValue),\n  credProps: optional(copyValue)\n};\nvar credentialCreationOptions = {\n  publicKey: required({\n    rp: required(copyValue),\n    user: required({\n      id: required(convertValue),\n      name: required(copyValue),\n      displayName: required(copyValue)\n    }),\n    challenge: required(convertValue),\n    pubKeyCredParams: required(copyValue),\n    timeout: optional(copyValue),\n    excludeCredentials: optional([publicKeyCredentialDescriptorSchema]),\n    authenticatorSelection: optional(copyValue),\n    attestation: optional(copyValue),\n    extensions: optional(simplifiedExtensionsSchema)\n  }),\n  signal: optional(copyValue)\n};\nvar publicKeyCredentialWithAttestation = {\n  type: required(copyValue),\n  id: required(copyValue),\n  rawId: required(convertValue),\n  authenticatorAttachment: optional(copyValue),\n  response: required({\n    clientDataJSON: required(convertValue),\n    attestationObject: required(convertValue),\n    transports: derived(\n      copyValue,\n      (response) => {\n        var _a;\n        return ((_a = response.getTransports) == null ? void 0 : _a.call(response)) || [];\n      }\n    )\n  }),\n  clientExtensionResults: derived(\n    simplifiedClientExtensionResultsSchema,\n    (pkc) => pkc.getClientExtensionResults()\n  )\n};\nvar credentialRequestOptions = {\n  mediation: optional(copyValue),\n  publicKey: required({\n    challenge: required(convertValue),\n    timeout: optional(copyValue),\n    rpId: optional(copyValue),\n    allowCredentials: optional([publicKeyCredentialDescriptorSchema]),\n    userVerification: optional(copyValue),\n    extensions: optional(simplifiedExtensionsSchema)\n  }),\n  signal: optional(copyValue)\n};\nvar publicKeyCredentialWithAssertion = {\n  type: required(copyValue),\n  id: required(copyValue),\n  rawId: required(convertValue),\n  authenticatorAttachment: optional(copyValue),\n  response: required({\n    clientDataJSON: required(convertValue),\n    authenticatorData: required(convertValue),\n    signature: required(convertValue),\n    userHandle: required(convertValue)\n  }),\n  clientExtensionResults: derived(\n    simplifiedClientExtensionResultsSchema,\n    (pkc) => pkc.getClientExtensionResults()\n  )\n};\nvar schema = {\n  credentialCreationOptions,\n  publicKeyCredentialWithAttestation,\n  credentialRequestOptions,\n  publicKeyCredentialWithAssertion\n};\n\n// src/webauthn-json/basic/api.ts\nfunction createRequestFromJSON(requestJSON) {\n  return convert(base64urlToBuffer, credentialCreationOptions, requestJSON);\n}\nfunction createResponseToJSON(credential) {\n  return convert(\n    bufferToBase64url,\n    publicKeyCredentialWithAttestation,\n    credential\n  );\n}\nasync function create(requestJSON) {\n  const credential = await navigator.credentials.create(\n    createRequestFromJSON(requestJSON)\n  );\n  return createResponseToJSON(credential);\n}\nfunction getRequestFromJSON(requestJSON) {\n  return convert(base64urlToBuffer, credentialRequestOptions, requestJSON);\n}\nfunction getResponseToJSON(credential) {\n  return convert(\n    bufferToBase64url,\n    publicKeyCredentialWithAssertion,\n    credential\n  );\n}\nasync function get(requestJSON) {\n  const credential = await navigator.credentials.get(\n    getRequestFromJSON(requestJSON)\n  );\n  return getResponseToJSON(credential);\n}\n\n// src/webauthn-json/basic/supported.ts\nfunction supported() {\n  return !!(navigator.credentials && navigator.credentials.create && navigator.credentials.get && window.PublicKeyCredential);\n}\nexport {\n  create,\n  get,\n  schema,\n  supported\n};\n//# sourceMappingURL=webauthn-json.js.map\n"],"names":["base64urlToBuffer","baseurl64String","padding","base64String","str","buffer","byteView","i","bufferToBase64url","charCode","copyValue","convertValue","convert","conversionFn","schema2","input","v","output","key","schemaField","derived","derive","required","optional","publicKeyCredentialDescriptorSchema","simplifiedExtensionsSchema","simplifiedClientExtensionResultsSchema","credentialCreationOptions","publicKeyCredentialWithAttestation","response","_a","pkc","credentialRequestOptions","publicKeyCredentialWithAssertion","createRequestFromJSON","requestJSON","createResponseToJSON","credential","create","getRequestFromJSON","getResponseToJSON","get"],"mappings":"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","x_google_ignoreList":[0]}