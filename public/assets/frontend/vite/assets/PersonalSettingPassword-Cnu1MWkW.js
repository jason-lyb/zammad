import{e as f,E as _,M as g,N as h,c as b}from"./apollo-Cj5TVUDk.js";import{_ as C}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as P}from"./useForm-CUKec4n5.js";import{X as y,aT as $,aU as x}from"./overviewAttributes.api-C09LSZ8O.js";import{c as E}from"./desktop-l0eJ1dZN.js";import{a as N}from"./LayoutContent.vue_vue_type_script_setup_true_lang-SafgfcNL.js";import{ac as v}from"./routes-CgLO9M4y.js";import{u as M}from"./useBreadcrumb-DUhE6wbZ.js";import{n as S}from"./vendor-C11O1Xx8.js";import{f as q,m as F,D as k,y as o,I as a,q as n,u as i,Q as B,M as D}from"./vue-oicRkvo0.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./vite-FJshFMF2.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./commonjsHelpers-BosuxZz1.js";import"./LayoutMain.vue_vue_type_script_setup_true_lang-DIWzj6-0.js";import"./LayoutSidebar.vue_vue_type_script_setup_true_lang-BO1pkKrb.js";import"./useResizeGridColumns-CieKHty_.js";const L=S`
    mutation userCurrentChangePassword($currentPassword: String!, $newPassword: String!) {
  userCurrentChangePassword(
    currentPassword: $currentPassword
    newPassword: $newPassword
  ) {
    success
    errors {
      ...errors
    }
  }
}
    ${y}`;function T(e={}){return f(L,e)}const R={class:"mb-4"},U={class:"mt-5 flex items-center justify-end gap-2"},lr=q({beforeRouteEnter(){const{canChangePassword:e}=v();return e.value?!0:$({type:x.AuthenticatedError,title:__("Forbidden"),message:__("Password change has been disabled by the administrator."),statusCode:_.Forbidden})},__name:"PersonalSettingPassword",setup(e){const{form:m,isDisabled:d}=P(),u=[{isLayout:!0,element:"div",attrs:{class:"grid grid-cols-2 gap-2.5"},children:[{name:"current_password",label:__("Current password"),type:"password",outerClass:"col-span-2",props:{maxLength:1001,autocomplete:"current-password"},required:!0},{name:"new_password",label:__("New password"),type:"password",outerClass:"col-span-1",props:{maxLength:1001,autocomplete:"new-password"},required:!0},{name:"new_password_confirm",label:__("Confirm new password"),type:"password",validation:"confirm",outerClass:"col-span-1",props:{maxLength:1001,autocomplete:"new-password"},required:!0}]}],{breadcrumbItems:p}=M(__("Password")),{notify:c}=b(),w=new g(T(),{errorNotificationMessage:__("Password could not be changed.")}),l=async s=>w.send({currentPassword:s.current_password,newPassword:s.new_password}).then(r=>{var t;(t=r==null?void 0:r.userCurrentChangePassword)!=null&&t.success&&c({id:"password-changed",type:h.Success,message:__("Password changed successfully.")})});return(s,r)=>(F(),k(N,{"breadcrumb-items":i(p),"help-text":s.$t("Enter your current password, insert a new one and confirm it."),width:"narrow"},{default:o(()=>[a("div",R,[n(C,{ref_key:"form",ref:m,schema:u,"clear-values-after-submit":"",onSubmit:r[0]||(r[0]=t=>l(t))},{"after-fields":o(()=>[a("div",U,[n(E,{variant:"submit",type:"submit",size:"medium",disabled:i(d)},{default:o(()=>[B(D(s.$t("Change Password")),1)]),_:1},8,["disabled"])])]),_:1},512)])]),_:1},8,["breadcrumb-items","help-text"]))}});export{lr as default};
//# sourceMappingURL=PersonalSettingPassword-Cnu1MWkW.js.map
