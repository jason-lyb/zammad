import{f as _,t as ie,m as u,p as ee,D as y,y as h,Q as K,M,u as l,E as g,ar as ce,ap as ue,c as G,aJ as de,a7 as b,aL as pe,a4 as L,s as fe,al as me,r as J,aS as ve,k as Q,n as I,w as U,ae as be,aT as ye,a1 as he,q as O,I as Y,z as F,H as W,C as D,A as ge,B as ke,K as Ce,T as Be}from"./vue-oicRkvo0.js";import{u as ze,s as we,am as H}from"./overviewAttributes.api-C09LSZ8O.js";import{c as V}from"./desktop-l0eJ1dZN.js";import{_ as $e}from"./CommonOverlayContainer.vue_vue_type_script_setup_true_lang-CxyKmNUC.js";import{b as Ee,c as xe}from"./LayoutSidebar.vue_vue_type_script_setup_true_lang-BO1pkKrb.js";import{u as Ae}from"./useForm-CUKec4n5.js";import{c as Z}from"./useFlyout-KZXqW5RR.js";const Se={class:"flex items-center justify-end gap-4"},Te=_({__name:"CommonFlyoutActionFooter",props:{hideActionButton:{type:Boolean},actionLabel:{default:__("Update")},actionButton:{},hideCancelButton:{type:Boolean},cancelLabel:{default:__("Cancel & Go Back")},cancelButton:{},form:{}},emits:["cancel","action"],setup($,{emit:E}){const o=$,d=E,{isDisabled:k,formNodeId:x}=Ae(ie(o,"form")),p=()=>{d("cancel")},s=()=>{d("action")};return(a,r)=>{var f,C,B,n,A,i,z;return u(),ee("div",Se,[a.hideCancelButton?g("",!0):(u(),y(V,{key:0,size:"large",disabled:l(k)||((f=a.cancelButton)==null?void 0:f.disabled),"prefix-icon":(C=a.cancelButton)==null?void 0:C.prefixIcon,variant:((B=a.cancelButton)==null?void 0:B.variant)||"secondary",onClick:r[0]||(r[0]=w=>p())},{default:h(()=>[K(M(a.$t(a.cancelLabel)),1)]),_:1},8,["disabled","prefix-icon","variant"])),a.hideActionButton?g("",!0):(u(),y(V,{key:1,size:"large",disabled:l(k)||((n=a.actionButton)==null?void 0:n.disabled),form:l(x),type:(A=a.actionButton)==null?void 0:A.type,"prefix-icon":(i=a.actionButton)==null?void 0:i.prefixIcon,variant:((z=a.actionButton)==null?void 0:z.variant)||"submit",onClick:r[1]||(r[1]=w=>s())},{default:h(()=>[K(M(a.$t(a.actionLabel)),1)]),_:1},8,["disabled","form","type","prefix-icon","variant"]))])}}}),Re=["aria-label"],X=16,Ke=_({inheritAttrs:!1,__name:"CommonFlyout",props:{name:{},persistResizeWidth:{type:Boolean},headerTitle:{},size:{},headerIcon:{},resizable:{type:Boolean,default:!0},showBackdrop:{type:Boolean,default:!0},noCloseOnBackdropClick:{type:Boolean},noCloseOnEscape:{type:Boolean},hideFooter:{type:Boolean},footerActionOptions:{},noCloseOnAction:{type:Boolean},noAutofocus:{type:Boolean},fullscreen:{type:Boolean},global:{type:Boolean}},emits:["action","close","activated"],setup($,{emit:E}){var q;const o=$,d=E,{path:k}=ce(),x=ue(),p=G(()=>o.fullscreen?!0:k===x.currentRoute.value.path);de(p,()=>{d("activated")});const s=async e=>{d("close",e),await Z(o.name,o.global)},a=async()=>{d("action"),!o.noCloseOnAction&&await Z(o.name,o.global)},r=`flyout-${o.name}`,f={medium:500,large:800},C=b("flyout-container"),B=pe(C);ze(B);let n;const i=Object.keys(localStorage).filter(e=>e.includes("sidebar-width")).find(e=>e.includes("left")),z=i?L(i,0):fe(0),{width:w}=me(),S=G(()=>w.value-z.value-X);o.persistResizeWidth?n=L(`${r}-width`,f[o.size||"medium"]):n=J(f[o.size||"medium"]);const P=b("resize-handle"),T=e=>{e>=S.value||(n.value=e)},te=ve(),ae=(e,t)=>{var c;if(!n.value||te.value!==((c=P.value)==null?void 0:c.resizeLine))return;e.preventDefault();const v=n.value+t;v>=S.value||T(v)},{startResizing:j,isResizing:oe}=Ee(T,(q=P.value)==null?void 0:q.resizeLine,ae,{calculateFromRight:!0,orientation:"vertical"}),ne=()=>{n.value=f[o.size||"medium"]};Q(async()=>{if(await I(),!i)return;const e=L(i,500);U(e,(t,v)=>{t+X<w.value-n.value||T(n.value-(t-v))})}),be("Escape",e=>{o.noCloseOnEscape||(we(e),s())});const m=b("content"),le=b("header"),re=b("footer"),{arrivedState:N}=ye(m),R=J(!1);U(n,async()=>{var e,t;await I(),(e=m.value)!=null&&e.scrollHeight&&((t=m.value)!=null&&t.clientHeight)&&(R.value=m.value.scrollHeight>m.value.clientHeight)},{immediate:!0}),Q(()=>{if(o.noAutofocus)return;const e=H(m.value)||H(re.value)||H(le.value);I(()=>{e==null||e.focus(),e==null||e.scrollIntoView({block:"nearest"})})});const se={enterActiveClass:"duration-300 ease-out",enterFromClass:"opacity-0 rtl:-translate-x-3/4 ltr:translate-x-3/4",enterToClass:"opacity-100 rtl:-translate-x-0 ltr:translate-x-0",leaveActiveClass:"duration-200 ease-in",leaveFromClass:"opacity-100 rtl:-translate-x-0 ltr:translate-x-0",leaveToClass:"opacity-0 rtl:-translate-x-3/4 ltr:translate-x-3/4"};return(e,t)=>{const v=he("CommonLabel");return u(),y(Be,D({appear:p.value},l(se)),{default:h(()=>[O($e,{id:r,ref:"flyout-container",tag:"aside",tabindex:"-1",class:W(["overflow-clip-x fixed top-0 bottom-0 z-40 flex max-h-dvh min-w-min flex-col border-y border-neutral-100 bg-neutral-50 ltr:right-0 ltr:rounded-l-xl ltr:border-l rtl:left-0 rtl:rounded-r-xl rtl:border-r dark:border-gray-900 dark:bg-gray-500",{"transition-all":!l(oe),hidden:!p.value}]),"no-close-on-backdrop-click":e.noCloseOnBackdropClick,"show-backdrop":e.showBackdrop&&p.value,style:Ce({width:`${l(n)}px`}),fullscreen:e.fullscreen,"aria-labelledby":`${r}-title`,onClickBackground:t[4]||(t[4]=c=>s())},{default:h(()=>[Y("header",{ref:"header",class:W(["sticky top-0 flex items-center border-b border-neutral-100 border-b-transparent bg-neutral-50 p-3 ltr:rounded-tl-xl rtl:rounded-tr-xl dark:bg-gray-500",{"border-b-neutral-100 dark:border-b-gray-900":!l(N).top&&R.value}])},[F(e.$slots,"header",{},()=>[e.headerTitle?(u(),y(v,{key:0,id:`${r}-title`,tag:"h2",class:"min-h-7 grow gap-1.5",size:"large","prefix-icon":e.headerIcon,"icon-color":"text-stone-200 dark:text-neutral-500"},{default:h(()=>[K(M(e.$t(e.headerTitle)),1)]),_:1},8,["id","prefix-icon"])):g("",!0)]),O(V,{class:"ltr:ml-auto rtl:mr-auto",variant:"neutral",size:"medium","aria-label":e.$t("Close side panel"),icon:"x-lg",onClick:t[0]||(t[0]=c=>s())},null,8,["aria-label"])],2),Y("div",D({ref:"content",class:"h-full overflow-y-scroll px-3"},e.$attrs),[F(e.$slots,"default")],16),e.$slots.footer||!e.hideFooter?(u(),ee("footer",{key:0,ref:"footer","aria-label":e.$t("Side panel footer"),class:W(["sticky bottom-0 border-t border-t-transparent bg-neutral-50 p-3 ltr:rounded-bl-xl rtl:rounded-br-xl dark:bg-gray-500",{"border-t-neutral-100 dark:border-t-gray-900":!l(N).bottom&&R.value}])},[F(e.$slots,"footer",ge(ke({action:a,close:s})),()=>[O(Te,D(e.footerActionOptions,{onCancel:t[1]||(t[1]=c=>s(!0)),onAction:t[2]||(t[2]=c=>a())}),null,16)])],10,Re)):g("",!0),e.resizable?(u(),y(xe,{key:1,ref:"resize-handle",label:e.$t("Resize side panel"),class:"absolute top-2 h-[calc(100%-16px)] overflow-clip ltr:left-px ltr:-translate-x-1/2 rtl:right-px rtl:translate-x-1/2",orientation:"vertical",values:{current:l(n),max:S.value},onMousedownEvent:l(j),onTouchstartEvent:l(j),onDblclickEvent:t[3]||(t[3]=c=>ne())},null,8,["label","values","onMousedownEvent","onTouchstartEvent"])):g("",!0)]),_:3},8,["no-close-on-backdrop-click","show-backdrop","style","class","fullscreen","aria-labelledby"])]),_:3},16,["appear"])}}});export{Ke as _};
//# sourceMappingURL=CommonFlyout.vue_vue_type_script_setup_true_lang-Cr1ukr3s.js.map
