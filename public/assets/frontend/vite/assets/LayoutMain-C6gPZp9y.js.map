{"version":3,"file":"LayoutMain-C6gPZp9y.js","sources":["../../../../../app/frontend/apps/mobile/components/layout/useCustomLayout.ts","../../../../../app/frontend/apps/mobile/components/layout/LayoutBottomNavigation.vue","../../../../../app/frontend/apps/mobile/components/layout/LayoutMain.vue"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { readonly, ref } from 'vue'\n\nconst isCustomLayout = ref(false)\n\nexport const useCustomLayout = () => {\n  const setCustomLayout = (value: boolean) => {\n    isCustomLayout.value = value\n  }\n\n  return {\n    isCustomLayout: readonly(isCustomLayout),\n    setCustomLayout,\n  }\n}\n","<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia'\nimport { computed } from 'vue'\n\nimport CommonUserAvatar from '#shared/components/CommonUserAvatar/CommonUserAvatar.vue'\nimport { useOnlineNotificationCount } from '#shared/entities/online-notification/composables/useOnlineNotificationCount.ts'\nimport { useSessionStore } from '#shared/stores/session.ts'\n\nimport { useCustomLayout } from './useCustomLayout.ts'\n\nconst { user } = storeToRefs(useSessionStore())\nconst { isCustomLayout } = useCustomLayout()\nconst { unseenCount } = useOnlineNotificationCount()\n\nconst notificationCount = computed(() => {\n  if (!unseenCount.value) return ''\n  if (unseenCount.value > 99) return '99+'\n  return unseenCount.value.toString()\n})\n</script>\n\n<template>\n  <footer\n    class=\"bottom-navigation bg-gray-light fixed bottom-0 z-10 w-full backdrop-blur-lg\"\n    :class=\"{ 'px-4': isCustomLayout }\"\n    data-bottom-navigation\n  >\n    <div\n      v-if=\"!isCustomLayout\"\n      class=\"flex h-14 w-full items-center text-center\"\n    >\n      <CommonLink\n        link=\"/\"\n        class=\"flex flex-1 justify-center\"\n        exact-active-class=\"text-blue\"\n      >\n        <CommonIcon name=\"home\" />\n      </CommonLink>\n      <CommonLink\n        link=\"/notifications\"\n        exact-active-class=\"text-blue\"\n        class=\"relative flex flex-1 justify-center\"\n      >\n        <div\n          v-if=\"notificationCount\"\n          role=\"status\"\n          :aria-label=\"$t('Unread notifications')\"\n          class=\"bg-blue absolute h-4 min-w-[1rem] rounded-full px-1 text-center text-xs text-black ltr:ml-4 rtl:mr-4\"\n        >\n          {{ notificationCount }}\n        </div>\n        <CommonIcon name=\"notification-subscribed\" decorative />\n      </CommonLink>\n      <CommonLink\n        link=\"/account\"\n        class=\"group flex flex-1 justify-center\"\n        exact-active-class=\"user-active\"\n      >\n        <CommonUserAvatar\n          v-if=\"user\"\n          :entity=\"user\"\n          class=\"group-[.user-active]:ring-blue group-[.user-active]:rounded-full group-[.user-active]:ring-2\"\n          size=\"small\"\n          personal\n        />\n      </CommonLink>\n    </div>\n  </footer>\n</template>\n\n<style scoped>\n.bottom-navigation {\n  padding-bottom: env(safe-area-inset-bottom);\n}\n</style>\n","<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { computed, ref, unref } from 'vue'\nimport { useRoute } from 'vue-router'\n\nimport { useStickyHeader } from '#shared/composables/useStickyHeader.ts'\n\nimport { headerOptions as header } from '#mobile/composables/useHeader.ts'\n\nimport LayoutBottomNavigation from './LayoutBottomNavigation.vue'\nimport LayoutHeader, { type Props as HeaderProps } from './LayoutHeader.vue'\n\nconst route = useRoute()\n\nconst title = computed(() => {\n  return unref(header.value.title) || route.meta.title\n})\n\nconst showBottomNavigation = computed(() => {\n  return route.meta.hasBottomNavigation\n})\n\nconst showHeader = computed(() => {\n  return route.meta.hasHeader\n})\n\nconst headerComponent = ref<{ headerElement: HTMLElement }>()\nconst headerElement = computed(() => {\n  return headerComponent.value?.headerElement\n})\n\nconst { stickyStyles } = useStickyHeader([title], headerElement)\n</script>\n\n<template>\n  <div class=\"flex h-full flex-col\">\n    <LayoutHeader\n      v-if=\"showHeader\"\n      ref=\"headerComponent\"\n      v-bind=\"header as HeaderProps\"\n      :title=\"title\"\n      :style=\"stickyStyles.header\"\n    />\n    <main\n      class=\"flex h-full flex-col\"\n      :style=\"showHeader ? stickyStyles.body : {}\"\n    >\n      <!-- let's see how it feels without transition -->\n      <RouterView />\n      <div\n        v-if=\"showBottomNavigation\"\n        class=\"h-[calc(var(--safe-bottom,0)+3.5rem)] w-full shrink-0\"\n      />\n    </main>\n    <LayoutBottomNavigation v-if=\"showBottomNavigation\" />\n  </div>\n</template>\n"],"names":["isCustomLayout","ref","useCustomLayout","setCustomLayout","value","readonly","user","storeToRefs","useSessionStore","unseenCount","useOnlineNotificationCount","notificationCount","computed","route","useRoute","title","unref","header","showBottomNavigation","showHeader","headerComponent","headerElement","_a","stickyStyles","useStickyHeader"],"mappings":"g5BAIA,MAAMA,EAAiBC,EAAI,EAAK,EAEnBC,EAAkB,IAAM,CAC7B,MAAAC,EAAmBC,GAAmB,CAC1CJ,EAAe,MAAQI,CAAA,EAGlB,MAAA,CACL,eAAgBC,EAASL,CAAc,EACvC,gBAAAG,CAAA,CAEJ,6HCJA,KAAM,CAAE,KAAAG,CAAS,EAAAC,EAAYC,EAAiB,CAAA,EACxC,CAAE,eAAAR,GAAmBE,IACrB,CAAE,YAAAO,GAAgBC,IAElBC,EAAoBC,EAAS,IAC5BH,EAAY,MACbA,EAAY,MAAQ,GAAW,MAC5BA,EAAY,MAAM,WAFM,EAGhC,0vCCND,MAAMI,EAAQC,IAERC,EAAQH,EAAS,IACdI,EAAMC,EAAO,MAAM,KAAK,GAAKJ,EAAM,KAAK,KAChD,EAEKK,EAAuBN,EAAS,IAC7BC,EAAM,KAAK,mBACnB,EAEKM,EAAaP,EAAS,IACnBC,EAAM,KAAK,SACnB,EAEKO,EAAkBnB,IAClBoB,EAAgBT,EAAS,IAAM,OACnC,OAAOU,EAAAF,EAAgB,QAAhB,YAAAE,EAAuB,aAAA,CAC/B,EAEK,CAAE,aAAAC,CAAa,EAAIC,EAAgB,CAACT,CAAK,EAAGM,CAAa"}