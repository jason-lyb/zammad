{"version":3,"file":"TicketItem.vue_vue_type_script_setup_true_lang-DIagoOiW.js","sources":["../../../../../app/frontend/apps/mobile/composables/useEditedBy.ts","../../../../../app/frontend/apps/mobile/components/Ticket/TicketItem.vue"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { computed } from 'vue'\n\nimport { userDisplayName } from '#shared/entities/user/utils/getUserDisplayName.ts'\nimport { i18n } from '#shared/i18n.ts'\nimport { useSessionStore } from '#shared/stores/session.ts'\n\nimport type { Ref } from 'vue'\n\ninterface Author {\n  id: string\n  firstname?: Maybe<string>\n  lastname?: Maybe<string>\n  fullname?: Maybe<string>\n}\n\ninterface Entity {\n  updatedAt?: string\n  updatedBy?: Maybe<Author>\n}\n\nexport const useEditedBy = (entity: Ref<Entity>) => {\n  const session = useSessionStore()\n  const author = computed(() => {\n    const { updatedBy } = entity.value\n    if (!updatedBy) return ''\n\n    return userDisplayName(updatedBy)\n  })\n\n  const date = computed(() => {\n    const { updatedAt } = entity.value\n    if (!updatedAt) return ''\n    return i18n.relativeDateTime(updatedAt)\n  })\n\n  const stringUpdated = computed(() => {\n    if (!date.value) return ''\n    if (entity.value.updatedBy?.id === session.user?.id) {\n      return i18n.t('edited %s by me', date.value)\n    }\n    if (!author.value) return i18n.t('edited %s', date.value)\n    return i18n.t('edited %s by %s', date.value, author.value)\n  })\n\n  return {\n    author,\n    date,\n    stringUpdated,\n  }\n}\n","<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { computed, toRef } from 'vue'\n\nimport CommonTicketPriorityIndicator from '#mobile/components/CommonTicketPriorityIndicator/CommonTicketPriorityIndicator.vue'\nimport CommonTicketStateIndicator from '#mobile/components/CommonTicketStateIndicator/CommonTicketStateIndicator.vue'\nimport { useEditedBy } from '#mobile/composables/useEditedBy.ts'\n\nimport { type TicketItemData } from './types.ts'\n\nexport interface Props {\n  entity: TicketItemData\n}\n\nconst props = defineProps<Props>()\n\nconst { stringUpdated } = useEditedBy(toRef(props, 'entity'))\n\nconst customer = computed(() => {\n  const { customer } = props.entity\n  if (!customer) return ''\n  const { fullname } = customer\n  if (fullname === '-') return ''\n  return fullname\n})\n</script>\n\n<template>\n  <div class=\"flex cursor-pointer ltr:pr-3 rtl:pl-3\">\n    <div class=\"flex w-14 items-center justify-center\">\n      <CommonTicketStateIndicator\n        :color-code=\"entity.stateColorCode\"\n        :label=\"entity.state.name\"\n      />\n    </div>\n    <div\n      class=\"flex flex-1 items-center gap-1 overflow-hidden border-b border-white/10 py-3 text-gray-100 ltr:pr-2 rtl:pl-2\"\n    >\n      <div class=\"flex-1 truncate\">\n        <span>\n          #{{ entity.number }}\n          <template v-if=\"customer\">\n            Â·\n            {{ customer }}\n          </template>\n        </span>\n        <span\n          class=\"mb-1 line-clamp-3 text-lg leading-5 font-bold whitespace-normal\"\n        >\n          <slot>\n            {{ entity.title }}\n          </slot>\n        </span>\n        <div\n          v-if=\"stringUpdated\"\n          data-test-id=\"stringUpdated\"\n          class=\"text-gray truncate\"\n        >\n          {{ stringUpdated }}\n        </div>\n      </div>\n      <CommonTicketPriorityIndicator :priority=\"entity.priority\" />\n    </div>\n  </div>\n</template>\n"],"names":["useEditedBy","entity","session","useSessionStore","author","computed","updatedBy","userDisplayName","date","updatedAt","i18n","stringUpdated","_a","_b","props","__props","toRef","customer","fullname"],"mappings":"kWAsBa,MAAAA,EAAeC,GAAwB,CAClD,MAAMC,EAAUC,IACVC,EAASC,EAAS,IAAM,CACtB,KAAA,CAAE,UAAAC,CAAU,EAAIL,EAAO,MACzB,OAACK,EAEEC,EAAgBD,CAAS,EAFT,EAES,CACjC,EAEKE,EAAOH,EAAS,IAAM,CACpB,KAAA,CAAE,UAAAI,CAAU,EAAIR,EAAO,MACzB,OAACQ,EACEC,EAAK,iBAAiBD,CAAS,EADf,EACe,CACvC,EAEKE,EAAgBN,EAAS,IAAM,SAC/B,OAACG,EAAK,QACNI,EAAAX,EAAO,MAAM,YAAb,YAAAW,EAAwB,QAAOC,EAAAX,EAAQ,OAAR,YAAAW,EAAc,IACxCH,EAAK,EAAE,kBAAmBF,EAAK,KAAK,EAExCJ,EAAO,MACLM,EAAK,EAAE,kBAAmBF,EAAK,MAAOJ,EAAO,KAAK,EAD/BM,EAAK,EAAE,YAAaF,EAAK,KAAK,EAJhC,EAKiC,CAC1D,EAEM,MAAA,CACL,OAAAJ,EACA,KAAAI,EACA,cAAAG,CAAA,CAEJ,gaCpCA,MAAMG,EAAQC,EAER,CAAE,cAAAJ,CAAc,EAAIX,EAAYgB,EAAMF,EAAO,QAAQ,CAAC,EAEtDG,EAAWZ,EAAS,IAAM,CAC9B,KAAM,CAAE,SAAAY,GAAaH,EAAM,OACvB,GAAA,CAACG,EAAiB,MAAA,GAChB,KAAA,CAAE,SAAAC,CAAaD,EAAAA,EACjB,OAAAC,IAAa,IAAY,GACtBA,CAAA,CACR"}