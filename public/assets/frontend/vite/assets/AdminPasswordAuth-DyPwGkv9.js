import{f as C,ap as P,r as w,c as q,a1 as g,m as s,D as a,y as o,q as E,Q as i,M as m,u as h,E as c}from"./vue-oicRkvo0.js";import{_ as R}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as D}from"./useForm-CUKec4n5.js";import{e as M,R as T}from"./routes-CgLO9M4y.js";import{e as z,M as F}from"./apollo-Cj5TVUDk.js";import{c as f}from"./desktop-l0eJ1dZN.js";import{_ as N}from"./LayoutPublicPage.vue_vue_type_script_setup_true_lang-C_6Ob6yy.js";import{n as B}from"./vendor-C11O1Xx8.js";import{X as L}from"./overviewAttributes.api-C09LSZ8O.js";import"./formkit-5nol1GBe.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./lodash-pFOI14f-.js";import"./vite-FJshFMF2.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./commonjsHelpers-BosuxZz1.js";import"./CommonLogo.vue_vue_type_script_setup_true_lang-xQq9wMEL.js";import"./useLogoUrl-8sIhej5J.js";import"./LayoutPublicPageBoxActions-BFjF_v1c.js";const V=B`
    mutation adminPasswordAuthSend($login: String!) {
  adminPasswordAuthSend(login: $login) {
    success
    errors {
      ...errors
    }
  }
}
    ${L}`;function x(n={}){return z(V,n)}const _e=C({beforeRouteEnter(n){const u=M(),{hasEnabledProviders:d}=T();return u.config.user_show_password_login||!d.value?n.redirectedFrom?!1:"/":!0},__name:"AdminPasswordAuth",setup(n){const u=P(),d=[{name:"login",type:"text",label:__("Username / Email"),required:!0}],{form:v,isDisabled:_}=D(),r=w(!1),l=w(""),b=q(()=>r.value?__("Admin password login instructions were sent to your email address."):__("Request password login for admin?")),A=e=>{new F(x({variables:{login:e.login}}),{errorShowNotification:!1}).send().then(()=>{r.value=!0}).catch(()=>{l.value=__("The admin password auth email could not be sent.")})},y=()=>{u.replace("/login")},k=()=>{r.value=!1};return(e,t)=>{const $=g("CommonAlert"),S=g("CommonLabel");return s(),a(N,{"box-size":"medium","show-logo":!1,title:b.value},{boxActions:o(()=>[E(f,{variant:"secondary",size:"medium",disabled:h(_),onClick:t[1]||(t[1]=p=>y())},{default:o(()=>[i(m(e.$t("Cancel & Go Back")),1)]),_:1},8,["disabled"]),r.value?(s(),a(f,{key:1,variant:"submit",size:"medium",onClick:t[2]||(t[2]=p=>k())},{default:o(()=>[i(m(e.$t("Retry")),1)]),_:1})):(s(),a(f,{key:0,variant:"submit",type:"submit",size:"medium",form:"admin-password-auth",disabled:h(_)},{default:o(()=>[i(m(e.$t("Submit")),1)]),_:1},8,["disabled"]))]),default:o(()=>[l.value?(s(),a($,{key:0,variant:"danger"},{default:o(()=>[i(m(e.$t(l.value)),1)]),_:1})):c("",!0),r.value?c("",!0):(s(),a(R,{key:1,id:"admin-password-auth",ref_key:"form",ref:v,"form-class":"mb-2.5",schema:d,onSubmit:t[0]||(t[0]=p=>A(p))},null,512)),r.value?(s(),a(S,{key:2},{default:o(()=>[i(m(e.$t("If you don't receive instructions within a minute or two, check your email's spam and junk filters, or try resending your request.")),1)]),_:1})):c("",!0)]),_:1},8,["title"])}}});export{_e as default};
//# sourceMappingURL=AdminPasswordAuth-DyPwGkv9.js.map
