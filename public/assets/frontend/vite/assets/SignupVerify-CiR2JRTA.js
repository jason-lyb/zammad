import{f as h,ap as V,r as k,c as v,k as b,a1 as _,m as n,D as s,y as g,I as w,q as x,Q as C,M as A,E as $}from"./vue-oicRkvo0.js";import{S as F,e as M,F as D}from"./routes-CgLO9M4y.js";import{e as E,M as N}from"./apollo-Cj5TVUDk.js";import{X as B,a4 as I}from"./overviewAttributes.api-C09LSZ8O.js";import{h as q,d as L}from"./desktop-l0eJ1dZN.js";import{_ as R}from"./LayoutPublicPage.vue_vue_type_script_setup_true_lang-C_6Ob6yy.js";import{n as T}from"./vendor-C11O1Xx8.js";import"./vite-FJshFMF2.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./useForm-CUKec4n5.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./commonjsHelpers-BosuxZz1.js";import"./CommonLogo.vue_vue_type_script_setup_true_lang-xQq9wMEL.js";import"./useLogoUrl-8sIhej5J.js";import"./LayoutPublicPageBoxActions-BFjF_v1c.js";const U=T`
    mutation userSignupVerify($token: String!) {
  userSignupVerify(token: $token) {
    session {
      ...session
    }
    errors {
      ...errors
    }
  }
}
    ${F}
${B}`;function X(r={}){return E(U,r)}const z={class:"mt-1 text-center"},ye=h({beforeRouteEnter(r){return M().config.user_create_account?!0:r.redirectedFrom?!1:"/"},__name:"SignupVerify",props:{token:{}},setup(r){const a=r,c=V(),o=k("loading"),m=t=>{o.value=t},y=v(()=>{switch(o.value){case"success":return __("Woo hoo! Your email address has been verified!");case"error":return __("Email could not be verified. Please contact your administrator.");case"loading":default:return __("Verifying your emailâ€¦")}});return b(()=>{if(!a.token){o.value="error";return}const{fingerprint:t}=D();new N(X({variables:{token:a.token},context:{headers:{"X-Browser-Fingerprint":t.value}}}),{errorShowNotification:!1}).send().then(async e=>{var u,p,l,f;const{setAuthenticatedSessionId:i}=I();if(await i(((p=(u=e==null?void 0:e.userSignupVerify)==null?void 0:u.session)==null?void 0:p.id)||null)){m("success");const d=(f=(l=e==null?void 0:e.userSignupVerify)==null?void 0:l.session)==null?void 0:f.afterAuth;window.setTimeout(()=>{if(d){q(c,d);return}c.replace("/")},2e3);return}m("error")}).catch(()=>{m("error")})}),(t,S)=>{const e=_("CommonLabel"),i=_("CommonIcon");return n(),s(R,{"box-size":"small",title:t.__("Email Verification")},{default:g(()=>[w("div",z,[x(e,null,{default:g(()=>[C(A(t.$t(y.value)),1)]),_:1}),o.value==="loading"?(n(),s(L,{key:0,class:"mt-9 mb-3",loading:""})):o.value==="success"?(n(),s(i,{key:1,class:"mx-auto mt-9 mb-3 fill-green-500",name:"check-circle-outline"})):o.value==="error"?(n(),s(i,{key:2,class:"mx-auto mt-9 mb-3 fill-red-500",name:"x-circle"})):$("",!0)])]),_:1},8,["title"])}}});export{ye as default};
//# sourceMappingURL=SignupVerify-CiR2JRTA.js.map
