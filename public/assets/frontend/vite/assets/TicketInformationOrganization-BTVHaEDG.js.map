{"version":3,"file":"TicketInformationOrganization-BTVHaEDG.js","sources":["../../../../../app/frontend/apps/mobile/pages/ticket/views/TicketInformation/TicketInformationOrganization.vue"],"sourcesContent":["<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { computed, ref, watchEffect } from 'vue'\n\nimport CommonOrganizationAvatar from '#shared/components/CommonOrganizationAvatar/CommonOrganizationAvatar.vue'\nimport ObjectAttributes from '#shared/components/ObjectAttributes/ObjectAttributes.vue'\nimport { useOrganizationDetail } from '#shared/entities/organization/composables/useOrganizationDetail.ts'\nimport { useErrorHandler } from '#shared/errors/useErrorHandler.ts'\n\nimport CommonButton from '#mobile/components/CommonButton/CommonButton.vue'\nimport CommonLoader from '#mobile/components/CommonLoader/CommonLoader.vue'\nimport CommonTicketStateList from '#mobile/components/CommonTicketStateList/CommonTicketStateList.vue'\nimport OrganizationMembersList from '#mobile/components/Organization/OrganizationMembersList.vue'\nimport { useOrganizationEdit } from '#mobile/entities/organization/composables/useOrganizationEdit.ts'\nimport { useOrganizationTicketsCount } from '#mobile/entities/organization/composables/useOrganizationTicketsCount.ts'\n\nimport { useTicketInformation } from '../../composable/useTicketInformation.ts'\n\nconst { ticket, updateRefetchingStatus } = useTicketInformation()\n\nconst { createQueryErrorHandler } = useErrorHandler()\n\nconst errorCallback = createQueryErrorHandler({\n  notFound: __(\n    'Organization with specified ID was not found. Try checking the URL for errors.',\n  ),\n  forbidden: __('You have insufficient rights to view this organization.'),\n})\n\nconst organizationId = computed(() => ticket.value?.organization?.internalId)\n\nconst {\n  organization,\n  organizationQuery,\n  loading: organizationLoading,\n  objectAttributes,\n  loadAllMembers,\n} = useOrganizationDetail(organizationId, errorCallback)\n\nconst error = ref('')\norganizationQuery.onError((apolloError) => {\n  error.value = apolloError.message\n})\n\nwatchEffect(() => {\n  updateRefetchingStatus(\n    organizationLoading.value && organization.value != null,\n  )\n})\n\nconst { openEditOrganizationDialog } = useOrganizationEdit()\nconst { getTicketData } = useOrganizationTicketsCount()\n\nconst ticketsData = computed(() => getTicketData(organization.value))\n</script>\n\n<template>\n  <CommonLoader :loading=\"!organization && organizationLoading\" :error=\"error\">\n    <div v-if=\"organization\" class=\"mb-3 flex items-center gap-3\">\n      <CommonOrganizationAvatar size=\"normal\" :entity=\"organization\" />\n      <h2 class=\"text-lg font-semibold\">\n        {{ organization.name }}\n      </h2>\n    </div>\n  </CommonLoader>\n  <div v-if=\"organization\">\n    <ObjectAttributes\n      :object=\"organization\"\n      :attributes=\"objectAttributes\"\n      :skip-attributes=\"['name']\"\n    >\n      <template v-if=\"organization.policy.update\" #after-fields>\n        <CommonButton\n          class=\"p-4\"\n          variant=\"primary\"\n          transparent-background\n          @click=\"openEditOrganizationDialog(organization!)\"\n        >\n          {{ $t('Edit Organization') }}\n        </CommonButton>\n      </template>\n    </ObjectAttributes>\n\n    <OrganizationMembersList\n      :organization=\"organization\"\n      :disable-show-more=\"organizationLoading\"\n      @load-more=\"loadAllMembers()\"\n    />\n\n    <CommonTicketStateList\n      v-if=\"ticketsData\"\n      :counts=\"ticketsData.count\"\n      :tickets-link-query=\"ticketsData.query\"\n    />\n  </div>\n</template>\n"],"names":["ticket","updateRefetchingStatus","useTicketInformation","createQueryErrorHandler","useErrorHandler","errorCallback","organizationId","computed","_b","_a","organization","organizationQuery","organizationLoading","objectAttributes","loadAllMembers","useOrganizationDetail","error","ref","apolloError","watchEffect","openEditOrganizationDialog","useOrganizationEdit","getTicketData","useOrganizationTicketsCount","ticketsData"],"mappings":"u9CAmBA,KAAM,CAAE,OAAAA,EAAQ,uBAAAC,CAAuB,EAAIC,EAAqB,EAE1D,CAAE,wBAAAC,GAA4BC,IAE9BC,EAAgBF,EAAwB,CAC5C,SAAU,GACR,gFACF,EACA,UAAW,GAAG,yDAAyD,CAAA,CACxE,EAEKG,EAAiBC,EAAS,IAAM,SAAA,OAAAC,GAAAC,EAAAT,EAAO,QAAP,YAAAS,EAAc,eAAd,YAAAD,EAA4B,WAAU,EAEtE,CACJ,aAAAE,EACA,kBAAAC,EACA,QAASC,EACT,iBAAAC,EACA,eAAAC,CAAA,EACEC,EAAsBT,EAAgBD,CAAa,EAEjDW,EAAQC,EAAI,EAAE,EACFN,EAAA,QAASO,GAAgB,CACzCF,EAAM,MAAQE,EAAY,OAAA,CAC3B,EAEDC,EAAY,IAAM,CAChBlB,EACEW,EAAoB,OAASF,EAAa,OAAS,IAAA,CACrD,CACD,EAEK,KAAA,CAAE,2BAAAU,GAA+BC,IACjC,CAAE,cAAAC,GAAkBC,IAEpBC,EAAcjB,EAAS,IAAMe,EAAcZ,EAAa,KAAK,CAAC"}