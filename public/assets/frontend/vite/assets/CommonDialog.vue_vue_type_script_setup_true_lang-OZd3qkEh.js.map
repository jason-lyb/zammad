{"version":3,"file":"CommonDialog.vue_vue_type_script_setup_true_lang-OZd3qkEh.js","sources":["../../../../../app/frontend/apps/desktop/components/CommonDialog/CommonDialogActionFooter.vue","../../../../../app/frontend/apps/desktop/components/CommonDialog/CommonDialog.vue"],"sourcesContent":["<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport CommonButton, {\n  type Props as ButtonProps,\n} from '#desktop/components/CommonButton/CommonButton.vue'\n\nexport interface Props {\n  hideActionButton?: boolean\n  actionLabel?: string\n  actionButton?: Pick<ButtonProps, 'prefixIcon' | 'variant'>\n  hideCancelButton?: boolean\n  cancelLabel?: string\n  cancelButton?: Pick<ButtonProps, 'prefixIcon' | 'variant'>\n}\n\nwithDefaults(defineProps<Props>(), {\n  actionLabel: __('OK'),\n  cancelLabel: __('Cancel & Go Back'),\n})\n\nconst emit = defineEmits<{\n  cancel: []\n  action: []\n}>()\n\nconst cancel = () => {\n  emit('cancel')\n}\n\nconst action = () => {\n  emit('action')\n}\n</script>\n\n<template>\n  <!-- TODO: rtl button order? -->\n  <div\n    class=\"flex items-center gap-2 ltr:justify-end rtl:flex-row-reverse rtl:justify-start\"\n  >\n    <CommonButton\n      v-if=\"!hideCancelButton\"\n      size=\"large\"\n      :prefix-icon=\"cancelButton?.prefixIcon\"\n      :variant=\"cancelButton?.variant || 'secondary'\"\n      @click=\"cancel()\"\n    >\n      {{ $t(cancelLabel) }}\n    </CommonButton>\n    <CommonButton\n      v-if=\"!hideActionButton\"\n      size=\"large\"\n      :prefix-icon=\"actionButton?.prefixIcon\"\n      :variant=\"actionButton?.variant || 'primary'\"\n      @click=\"action()\"\n    >\n      {{ $t(actionLabel) }}\n    </CommonButton>\n  </div>\n</template>\n","<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { onKeyUp } from '@vueuse/core'\nimport { useTemplateRef, nextTick, onMounted, computed } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nimport { useTrapTab } from '#shared/composables/useTrapTab.ts'\nimport stopEvent from '#shared/utils/events.ts'\nimport { getFirstFocusableElement } from '#shared/utils/getFocusableElements.ts'\n\nimport CommonButton from '#desktop/components/CommonButton/CommonButton.vue'\nimport CommonOverlayContainer from '#desktop/components/CommonOverlayContainer/CommonOverlayContainer.vue'\n\nimport CommonDialogActionFooter, {\n  type Props as ActionFooterProps,\n} from './CommonDialogActionFooter.vue'\nimport { closeDialog } from './useDialog.ts'\n\nexport interface Props {\n  name: string\n  headerTitle?: string\n  headerIcon?: string\n  content?: string\n  contentPlaceholder?: string[]\n  hideFooter?: boolean\n  /**\n   * Inner wrapper for the dialog content.\n   * */\n  wrapperTag?: 'div' | 'article'\n  footerActionOptions?: ActionFooterProps\n  // Don't focus the first element inside a Dialog after being mounted\n  // if nothing is focusable, will focus \"Close\" button when dismissable is active.\n  noAutofocus?: boolean\n  fullscreen?: boolean\n  global?: boolean\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  wrapperTag: 'div',\n})\n\ndefineOptions({\n  inheritAttrs: false,\n})\n\nconst emit = defineEmits<{\n  close: [cancel?: boolean]\n}>()\n\nconst { path } = useRoute()\n\nconst router = useRouter()\n\nconst isActive = computed(() =>\n  props.fullscreen ? true : path === router.currentRoute.value.path,\n)\n\nconst dialogElement = useTemplateRef<HTMLElement>('dialog')\nconst footerElement = useTemplateRef('footer')\nconst contentElement = useTemplateRef('content')\n\nconst close = async (cancel?: boolean) => {\n  emit('close', cancel)\n  await closeDialog(props.name, props.global)\n}\n\nconst dialogId = `dialog-${props.name}`\n\nonKeyUp('Escape', (e) => {\n  stopEvent(e)\n  close()\n})\n\nuseTrapTab(dialogElement)\n\nonMounted(() => {\n  if (props.noAutofocus) return\n\n  // Will try to find focusable element inside dialog main and footer content.\n  // If it won't find it, will try to find inside the header most likely will find \"Close\" button.\n  const firstFocusable =\n    getFirstFocusableElement(contentElement.value) ||\n    getFirstFocusableElement(footerElement.value) ||\n    getFirstFocusableElement(dialogElement.value)\n\n  nextTick(() => {\n    firstFocusable?.focus()\n    firstFocusable?.scrollIntoView({ block: 'nearest' })\n  })\n})\n\n// It is the same as flyout, but could be changed in the future?\nconst transition = VITE_TEST_MODE\n  ? undefined\n  : {\n      enterActiveClass: 'duration-300 ease-out',\n      enterFromClass: 'opacity-0 rtl:-translate-x-3/4 ltr:translate-x-3/4',\n      enterToClass: 'opacity-100 rtl:-translate-x-0 ltr:translate-x-0',\n      leaveActiveClass: 'duration-200 ease-in',\n      leaveFromClass: 'opacity-100 rtl:-translate-x-0 ltr:translate-x-0',\n      leaveToClass: 'opacity-0 rtl:-translate-x-3/4 ltr:translate-x-3/4',\n    }\n</script>\n\n<template>\n  <!--  `display:none` to prevent showing up inactive dialog for cached instance -->\n  <Transition :appear=\"isActive\" v-bind=\"transition\">\n    <!-- We use teleport here to  center it to target node and increase z index on fullscreen to avoid clicking collapse and resize buttons -->\n    <Teleport :to=\"fullscreen ? '#app' : '#main-content'\">\n      <CommonOverlayContainer\n        :id=\"dialogId\"\n        tag=\"div\"\n        disable-teleport\n        class=\"absolute top-[50%] z-50 h-full w-full translate-y-[-50%] ltr:left-[50%] ltr:translate-x-[-50%] rtl:right-[50%] rtl:-translate-x-[-50%]\"\n        :class=\"{ 'z-40': fullscreen, hidden: !isActive }\"\n        role=\"dialog\"\n        backdrop-class=\"z-40\"\n        :show-backdrop=\"isActive\"\n        :fullscreen=\"fullscreen\"\n        :aria-labelledby=\"`${dialogId}-title`\"\n        @click-background=\"close()\"\n      >\n        <component\n          :is=\"wrapperTag\"\n          ref=\"dialog\"\n          data-common-dialog\n          class=\"!absolute top-1/2 z-50 flex w-[500px] -translate-y-1/2 flex-col gap-3 rounded-xl border border-neutral-100 bg-neutral-50 p-3 ltr:left-1/2 ltr:-translate-x-1/2 rtl:right-1/2 rtl:translate-x-1/2 dark:border-gray-900 dark:bg-gray-500\"\n        >\n          <div\n            class=\"flex items-center justify-between bg-neutral-50 dark:bg-gray-500\"\n          >\n            <slot name=\"header\">\n              <div\n                class=\"flex items-center gap-2 text-xl leading-snug text-gray-100 dark:text-neutral-400\"\n              >\n                <CommonIcon v-if=\"headerIcon\" size=\"small\" :name=\"headerIcon\" />\n                <h3 :id=\"`${dialogId}-title`\">{{ $t(headerTitle) }}</h3>\n              </div>\n            </slot>\n            <CommonButton\n              class=\"ms-auto\"\n              variant=\"neutral\"\n              size=\"medium\"\n              icon=\"x-lg\"\n              :aria-label=\"$t('Close dialog')\"\n              @click=\"close()\"\n            />\n          </div>\n          <div ref=\"content\" v-bind=\"$attrs\" class=\"py-6 text-center\">\n            <slot>\n              <CommonLabel size=\"large\">{{\n                $t(content, ...(contentPlaceholder || []))\n              }}</CommonLabel>\n            </slot>\n          </div>\n          <div v-if=\"$slots.footer || !hideFooter\" ref=\"footer\">\n            <slot name=\"footer\">\n              <CommonDialogActionFooter\n                v-bind=\"footerActionOptions\"\n                @cancel=\"close(true)\"\n                @action=\"close(false)\"\n              />\n            </slot>\n          </div>\n        </component>\n      </CommonOverlayContainer>\n    </Teleport>\n  </Transition>\n</template>\n"],"names":["emit","__emit","cancel","action","props","__props","path","useRoute","router","useRouter","isActive","computed","dialogElement","useTemplateRef","footerElement","contentElement","close","closeDialog","dialogId","onKeyUp","stopEvent","useTrapTab","onMounted","firstFocusable","getFirstFocusableElement","nextTick","transition"],"mappings":"ixBAqBA,MAAMA,EAAOC,EAKPC,EAAS,IAAM,CACnBF,EAAK,QAAQ,CAAA,EAGTG,EAAS,IAAM,CACnBH,EAAK,QAAQ,CAAA,0nCCOf,MAAMI,EAAQC,EAQRL,EAAOC,EAIP,CAAE,KAAAK,GAASC,IAEXC,EAASC,IAETC,EAAWC,EAAS,IACxBP,EAAM,WAAa,GAAOE,IAASE,EAAO,aAAa,MAAM,IAAA,EAGzDI,EAAgBC,EAA4B,QAAQ,EACpDC,EAAgBD,EAAe,QAAQ,EACvCE,EAAiBF,EAAe,SAAS,EAEzCG,EAAQ,MAAOd,GAAqB,CACxCF,EAAK,QAASE,CAAM,EACpB,MAAMe,EAAYb,EAAM,KAAMA,EAAM,MAAM,CAAA,EAGtCc,EAAW,UAAUd,EAAM,IAAI,GAE7Be,EAAA,SAAW,GAAM,CACvBC,EAAU,CAAC,EACLJ,GAAA,CACP,EAEDK,EAAWT,CAAa,EAExBU,EAAU,IAAM,CACd,GAAIlB,EAAM,YAAa,OAIjB,MAAAmB,EACJC,EAAyBT,EAAe,KAAK,GAC7CS,EAAyBV,EAAc,KAAK,GAC5CU,EAAyBZ,EAAc,KAAK,EAE9Ca,EAAS,IAAM,CACbF,GAAA,MAAAA,EAAgB,QAChBA,GAAA,MAAAA,EAAgB,eAAe,CAAE,MAAO,SAAW,EAAA,CACpD,CAAA,CACF,EAGK,MAAAG,EAEF,CACE,iBAAkB,wBAClB,eAAgB,qDAChB,aAAc,mDACd,iBAAkB,uBAClB,eAAgB,mDAChB,aAAc,oDAAA"}