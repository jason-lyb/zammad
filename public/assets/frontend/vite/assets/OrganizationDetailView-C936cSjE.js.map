{"version":3,"file":"OrganizationDetailView-C936cSjE.js","sources":["../../../../../app/frontend/apps/mobile/pages/organization/views/OrganizationDetailView.vue"],"sourcesContent":["<!-- Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/ -->\n\n<script setup lang=\"ts\">\nimport { computed, toRef } from 'vue'\n\nimport CommonOrganizationAvatar from '#shared/components/CommonOrganizationAvatar/CommonOrganizationAvatar.vue'\nimport type { AvatarOrganization } from '#shared/components/CommonOrganizationAvatar/index.ts'\nimport ObjectAttributes from '#shared/components/ObjectAttributes/ObjectAttributes.vue'\nimport { useOnlineNotificationSeen } from '#shared/composables/useOnlineNotification/useOnlineNotificationSeen.ts'\nimport { useOrganizationDetail } from '#shared/entities/organization/composables/useOrganizationDetail.ts'\nimport { useErrorHandler } from '#shared/errors/useErrorHandler.ts'\n\nimport CommonLoader from '#mobile/components/CommonLoader/CommonLoader.vue'\nimport CommonTicketStateList from '#mobile/components/CommonTicketStateList/CommonTicketStateList.vue'\nimport OrganizationMembersList from '#mobile/components/Organization/OrganizationMembersList.vue'\nimport { useHeader } from '#mobile/composables/useHeader.ts'\nimport { useOrganizationEdit } from '#mobile/entities/organization/composables/useOrganizationEdit.ts'\nimport { useOrganizationTicketsCount } from '#mobile/entities/organization/composables/useOrganizationTicketsCount.ts'\n\ninterface Props {\n  internalId: number\n}\n\nconst props = defineProps<Props>()\n\nconst { createQueryErrorHandler } = useErrorHandler()\n\nconst errorCallback = createQueryErrorHandler({\n  notFound: __(\n    'Organization with specified ID was not found. Try checking the URL for errors.',\n  ),\n  forbidden: __('You have insufficient rights to view this organization.'),\n})\n\nconst {\n  organization,\n  loading,\n  objectAttributes,\n  organizationQuery,\n  loadAllMembers,\n  // loadOrganization,\n} = useOrganizationDetail(toRef(props, 'internalId'), errorCallback)\n\n// loadOrganization(props.internalId)\n\nuseOnlineNotificationSeen(organization)\n\nconst { openEditOrganizationDialog } = useOrganizationEdit()\n\nuseHeader({\n  title: __('Organization'),\n  backUrl: '/',\n  actionTitle: __('Edit'),\n  actionHidden: computed(\n    () => organization.value == null || !organization.value.policy.update,\n  ),\n  refetch: computed(\n    () => organization.value != null && organizationQuery.loading().value,\n  ),\n  onAction() {\n    if (!organization.value || !organization.value.policy.update) return\n    openEditOrganizationDialog(organization.value)\n  },\n})\n\nconst { getTicketData } = useOrganizationTicketsCount()\nconst ticketData = computed(() => getTicketData(organization.value))\n</script>\n\n<template>\n  <div v-if=\"organization\" class=\"px-4\">\n    <div class=\"flex flex-col items-center justify-center py-6\">\n      <div>\n        <CommonOrganizationAvatar\n          :entity=\"organization as AvatarOrganization\"\n          size=\"xl\"\n        />\n      </div>\n      <div class=\"mt-2 text-xl font-bold\">\n        {{ organization.name }}\n      </div>\n    </div>\n\n    <ObjectAttributes\n      :object=\"organization\"\n      :attributes=\"objectAttributes\"\n      :skip-attributes=\"['name']\"\n    />\n\n    <OrganizationMembersList\n      :organization=\"organization\"\n      :disable-show-more=\"loading\"\n      @load-more=\"loadAllMembers()\"\n    />\n\n    <CommonTicketStateList\n      v-if=\"ticketData\"\n      :create-link=\"ticketData.createLink\"\n      :create-label=\"ticketData.createLabel\"\n      :counts=\"ticketData.count\"\n      :tickets-link-query=\"ticketData.query\"\n    />\n  </div>\n  <CommonLoader v-else-if=\"loading\" class=\"w-full p-4\" :loading=\"loading\" />\n</template>\n"],"names":["props","__props","createQueryErrorHandler","useErrorHandler","errorCallback","organization","loading","objectAttributes","organizationQuery","loadAllMembers","useOrganizationDetail","toRef","useOnlineNotificationSeen","openEditOrganizationDialog","useOrganizationEdit","useHeader","computed","getTicketData","useOrganizationTicketsCount","ticketData"],"mappings":"iiDAuBA,MAAMA,EAAQC,EAER,CAAE,wBAAAC,GAA4BC,IAE9BC,EAAgBF,EAAwB,CAC5C,SAAU,GACR,gFACF,EACA,UAAW,GAAG,yDAAyD,CAAA,CACxE,EAEK,CACJ,aAAAG,EACA,QAAAC,EACA,iBAAAC,EACA,kBAAAC,EACA,eAAAC,CAAA,EAEEC,EAAsBC,EAAMX,EAAO,YAAY,EAAGI,CAAa,EAInEQ,EAA0BP,CAAY,EAEhC,KAAA,CAAE,2BAAAQ,GAA+BC,IAE7BC,EAAA,CACR,MAAO,GAAG,cAAc,EACxB,QAAS,IACT,YAAa,GAAG,MAAM,EACtB,aAAcC,EACZ,IAAMX,EAAa,OAAS,MAAQ,CAACA,EAAa,MAAM,OAAO,MACjE,EACA,QAASW,EACP,IAAMX,EAAa,OAAS,MAAQG,EAAkB,QAAU,EAAA,KAClE,EACA,UAAW,CACL,CAACH,EAAa,OAAS,CAACA,EAAa,MAAM,OAAO,QACtDQ,EAA2BR,EAAa,KAAK,CAC/C,CAAA,CACD,EAEK,KAAA,CAAE,cAAAY,GAAkBC,IACpBC,EAAaH,EAAS,IAAMC,EAAcZ,EAAa,KAAK,CAAC"}