import{f as E,ap as S,m as l,p as N,u as t,D as y,E as O,U as V,V as v,I as k,q as c,J as w}from"./vue-oicRkvo0.js";import{_ as F}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as D}from"./useDebouncedLoading-D3djd3bz.js";import{r as M}from"./routes-CgLO9M4y.js";import{e as $,M as d}from"./apollo-Cj5TVUDk.js";import{u as B,a as x}from"./channelEmailValidateConfigurationOutbound.api-D58S979t.js";import{n as U}from"./vendor-C11O1Xx8.js";import{X as G}from"./overviewAttributes.api-C09LSZ8O.js";import{u as I}from"./useSSLVerificationWarningHandler-CuWTKKwG.js";import{_ as L}from"./GuidedSetupActionFooter.vue_vue_type_script_setup_true_lang-Cze7-cY3.js";import{_ as R}from"./GuidedSetupStatusMessage.vue_vue_type_script_setup_true_lang-CK-LgkYz.js";import{u as q}from"./useSystemSetup-CBS5N4Hd.js";import{e as H}from"./emailBeforeRouteEnterGuard-BWQx8J1H.js";import"./formkit-5nol1GBe.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./lodash-pFOI14f-.js";import"./vite-FJshFMF2.js";import"./useForm-CUKec4n5.js";import"./commonjsHelpers-BosuxZz1.js";import"./desktop-l0eJ1dZN.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./LayoutPublicPageBoxActions-BFjF_v1c.js";const A=U`
    mutation channelEmailSetNotificationConfiguration($outboundConfiguration: ChannelEmailOutboundConfigurationInput!) {
  channelEmailSetNotificationConfiguration(
    outboundConfiguration: $outboundConfiguration
  ) {
    success
    errors {
      ...errors
    }
  }
}
    ${G}`;function J(a={}){return $(A,a)}const T={class:"flex flex-col gap-2.5"},Oo=E({beforeRouteEnter:H,__name:"GuidedSetupManualEmailNotification",setup(a){const p=S(),{setTitle:g}=q();g(__("Email Notification"));const{formEmailOutbound:r,emailOutboundSchema:b,emailOutboundFormChangeFields:_}=B(),h=[{name:"notification_sender",label:__("Notification Sender"),type:"hidden"},...b],{loading:u,debouncedLoading:s}=D(),C=async o=>{u.value=!0;const i=new d(x()),n=new d(J()),m={adapter:o.adapter,host:o.host,port:Number(o.port),user:o.user,password:o.password,sslVerify:o.sslVerify};return i.send({outboundConfiguration:m,emailAddress:o.notification_sender}).then(async()=>{var f;const e=await n.send({outboundConfiguration:m});(f=e==null?void 0:e.channelEmailSetNotificationConfiguration)!=null&&f.success&&p.push("/guided-setup/manual/channels")}).finally(async()=>{u.value=!1})};return(o,i)=>(l(),N(w,null,[t(s)?(l(),y(R,{key:0,message:o.__("Verifying and saving your configurationâ€¦")},null,8,["message"])):O("",!0),V(k("div",T,[c(F,{id:"email-notification-setup",ref_key:"formEmailOutbound",ref:r,"form-class":"mb-2.5","flatten-form-groups":["outbound"],"form-updater-id":t(M).FormUpdaterUpdaterGuidedSetupEmailNotification,schema:h,handlers:[t(I)()],"change-fields":t(_),onSubmit:i[0]||(i[0]=n=>C(n))},null,8,["form-updater-id","handlers","change-fields"]),c(L,{"go-back-route":"/guided-setup/manual/system-information","skip-route":"/guided-setup/manual/channels",form:t(r),"submit-button-text":o.__("Save and Continue")},null,8,["form","submit-button-text"])],512),[[v,!t(s)]])],64))}});export{Oo as default};
//# sourceMappingURL=GuidedSetupManualEmailNotification-8xdbKdHs.js.map
