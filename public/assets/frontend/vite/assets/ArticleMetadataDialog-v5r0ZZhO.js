import{_ as J}from"./ObjectAttribute.vue_vue_type_script_setup_true_lang-S7kCEp8d.js";import{u as Q}from"./useArticleSecurity-D_0zJIjN.js";import{at as H,v as K}from"./overviewAttributes.api-C09LSZ8O.js";import{u as P}from"./useWhatsapp-Da8aokvI.js";import{q as U}from"./routes-CgLO9M4y.js";import{_ as X}from"./CommonDialog.vue_vue_type_script_setup_true_lang-CID2Z6MI.js";import{c as b,b as Y}from"./mobile-Bk4bKGxF.js";import{f as z,c as A,m as t,D as o,y as c,p as m,M as r,E as n,J as B,x as N,I as _,t as E,a1 as D,q as i,Q as g,u as a}from"./vue-oicRkvo0.js";import"./useDisplayObjectAttributes-sspS-pHp.js";import"./lodash-pFOI14f-.js";import"./apollo-Cj5TVUDk.js";import"./vendor-C11O1Xx8.js";import"./commonjsHelpers-BosuxZz1.js";import"./ticketArticleRetrySecurityProcess.api-pSAexXXb.js";import"./index-D5f5eTVX.js";import"./useBaseUrl-BsZiEKQE.js";import"./useCopyToClipboard-CjkPg__g.js";import"./useTicketSignature-LslYi6X7.js";import"./openExternalLink-B2ZtqYBi.js";import"./getAttachmentLinks-Dz1qdLDp.js";import"./formkit-5nol1GBe.js";import"./useTicketView-CMOCBKg-.js";import"./dom-0wVl69Vp.js";import"./vite-FJshFMF2.js";import"./pwa-THoW_3xc.js";import"./add.api-CxwFhgGn.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";const Z="chat",x="mail",ee="facebook",te="printer",ae="note",se="phone",ne="message",re="telegram",le="twitter",ie="web",oe="whatsapp",ce={chat:Z,email:x,facebook:ee,fax:te,note:ae,phone:se,sms:ne,telegram:re,twitter:le,web:ie,whatsapp:oe},me=f=>{const l=f.split(" ")[0];return ce[l]},ue={key:0},de={class:"text-sm text-white/75"},S=z({__name:"ArticleMetadataAddress",props:{address:{},label:{}},setup(f){const l=f,h=A(()=>{var y;const{address:s}=l;return s?s.raw&&s.raw!=="-  <>"||((y=s.parsed)==null?void 0:y.length):!1});return(s,y)=>s.address&&h.value?(t(),o(b,{key:0,label:s.label},{default:c(()=>[s.address.parsed?n("",!0):(t(),m("div",ue,r(s.address.raw),1)),(t(!0),m(B,null,N(s.address.parsed||[],(k,v)=>(t(),m("div",{key:v},[_("div",null,r(k.name),1),_("div",de," <"+r(k.emailAddress)+"> ",1)]))),128))]),_:1},8,["label"])):n("",!0)}}),pe={key:1},be={class:"inline-flex items-center gap-1"},_e={class:"leading-3"},fe={class:"flex flex-col gap-1"},ye={key:0},ge={key:1},he={key:0,class:"ms-5 break-all"},ke={key:2},ve={key:0,class:"ms-5 break-all"},Xe=z({__name:"ArticleMetadataDialog",props:{name:{},article:{},ticketInternalId:{}},setup(f){const l=f,h=A(()=>{var u;const e=(u=l.article.type)==null?void 0:u.name;if(e)return me(e)}),{articleDeliveryStatus:s}=P(E(l.article)),y=A(()=>{var d,I;const{article:e}=l,u=[...((d=e.preferences)==null?void 0:d.links)||[]];return((I=e.type)==null?void 0:I.name)==="email"&&u.push({label:__("Raw"),api:!0,url:`/ticket_article_plain/${e.internalId}`,target:"_blank"}),e.attachmentsWithoutInline.forEach($=>{var C;if(((C=$.preferences)==null?void 0:C["original-format"])!==!0)return;const w=l.article.internalId,p=$.internalId,{ticketInternalId:M}=l,j=`/ticket_attachment/${M}/${w}/${p}?disposition=attachment`;u.push({label:__("Original Formatting"),api:!0,url:j,target:"_blank"})}),u}),{signingIcon:k,signingMessage:v,encryptionMessage:L,isEncrypted:O,isSigned:V,hasSecurityAttribute:F,encryptionIcon:R,encryptedStatusMessage:q,signedStatusMessage:W}=Q(E(l.article)),{attributesLookup:G}=H(U.TicketArticle),T=A(()=>G.value.get("detected_language"));return(e,u)=>{const d=D("CommonIcon"),I=D("CommonLink"),$=D("CommonDateTime");return t(),o(X,{label:e.__("Meta Data"),name:e.name,class:"p-4"},{default:c(()=>[i(Y,null,{default:c(()=>{var w;return[i(S,{address:e.article.from,label:e.__("From")},null,8,["address","label"]),i(S,{address:e.article.replyTo,label:e.__("Reply-To")},null,8,["address","label"]),i(S,{address:e.article.to,label:e.__("To")},null,8,["address","label"]),i(S,{address:e.article.cc,label:e.__("CC")},null,8,["address","label"]),e.article.subject?(t(),o(b,{key:0,label:e.__("Subject")},{default:c(()=>[_("div",null,r(e.article.subject),1)]),_:1},8,["label"])):n("",!0),e.article.detectedLanguage?(t(),o(b,{key:1,label:e.__("Detected language")},{default:c(()=>[T.value?(t(),o(J,{key:0,attribute:T.value,object:e.article},null,8,["attribute","object"])):(t(),m("div",pe,r(e.article.detectedLanguage),1))]),_:1},8,["label"])):n("",!0),(w=e.article.type)!=null&&w.name?(t(),o(b,{key:2,label:e.__("Channel")},{default:c(()=>[_("span",be,[h.value?(t(),o(d,{key:0,name:h.value,size:"tiny",class:"inline"},null,8,["name"])):n("",!0),g(" "+r(e.$t(e.article.type.name)),1)]),_("div",_e,[(t(!0),m(B,null,N(y.value,({url:p,api:M,label:j,target:C})=>(t(),o(I,{key:p,link:p,"rest-api":M,target:C,class:"text-sm text-white/75 after:inline after:content-['|'] last:after:hidden ltr:mr-1 ltr:after:ml-1 rtl:ml-1 rtl:after:mr-1"},{default:c(()=>[g(r(e.$t(j)),1)]),_:2},1032,["link","rest-api","target"]))),128))])]),_:1},8,["label"])):n("",!0),a(s)?(t(),o(b,{key:3,label:e.__("Message Status")},{default:c(()=>[i(d,{name:a(s).icon,size:"tiny",class:"inline"},null,8,["name"]),g(" "+r(e.$t(a(s).message)),1)]),_:1},8,["label"])):n("",!0),i(b,{label:e.__("Created")},{default:c(()=>[i($,{"date-time":e.article.createdAt,type:"absolute"},null,8,["date-time"])]),_:1},8,["label"]),a(F)?(t(),o(b,{key:4,label:e.__("Security")},{default:c(()=>{var p;return[_("div",fe,[(p=e.article.securityState)!=null&&p.type?(t(),m("span",ye,r(a(K)(e.article.securityState.type)),1)):n("",!0),a(O)?(t(),m("span",ge,[i(d,{class:"mb-1 inline",size:"tiny",name:a(R)},null,8,["name"]),g(" "+r(e.$t(a(q)))+" ",1),a(L)?(t(),m("div",he,r(e.$t(a(L))),1)):n("",!0)])):n("",!0),a(V)?(t(),m("span",ke,[i(d,{class:"mb-1 inline",size:"tiny",name:a(k)},null,8,["name"]),g(" "+r(e.$t(a(W)))+" ",1),a(v)?(t(),m("div",ve,r(e.$t(a(v))),1)):n("",!0)])):n("",!0)])]}),_:1},8,["label"])):n("",!0)]}),_:1})]),_:1},8,["label","name"])}}});export{Xe as default};
//# sourceMappingURL=ArticleMetadataDialog-v5r0ZZhO.js.map
