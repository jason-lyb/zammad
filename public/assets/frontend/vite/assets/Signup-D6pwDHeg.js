import{f as M,ap as B,r as v,c as U,a1 as S,m as n,D as a,y as t,q as m,Q as i,M as o,u as c,I as z,E as F,p as P}from"./vue-oicRkvo0.js";import{e as $,M as k,N as b,c as j}from"./apollo-Cj5TVUDk.js";import{_ as q}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as I}from"./useForm-CUKec4n5.js";import{e as h,T as A,i as Y}from"./routes-CgLO9M4y.js";import{c as d}from"./desktop-l0eJ1dZN.js";import{_ as G}from"./CommonPublicLinks.vue_vue_type_script_setup_true_lang-DcbvsgxJ.js";import{_ as H}from"./LayoutPublicPage.vue_vue_type_script_setup_true_lang-C_6Ob6yy.js";import{u as J}from"./useSignupForm-BkEm3_Qx.js";import{n as w}from"./vendor-C11O1Xx8.js";import{X as C}from"./overviewAttributes.api-C09LSZ8O.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./vite-FJshFMF2.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./commonjsHelpers-BosuxZz1.js";import"./usePublicLinks-CDMBq4UM.js";import"./CommonLogo.vue_vue_type_script_setup_true_lang-xQq9wMEL.js";import"./useLogoUrl-8sIhej5J.js";import"./LayoutPublicPageBoxActions-BFjF_v1c.js";const Q=w`
    mutation userSignup($input: UserSignupInput!) {
  userSignup(input: $input) {
    success
    errors {
      ...errors
    }
  }
}
    ${C}`;function X(r={}){return $(Q,r)}const K=w`
    mutation userSignupResend($email: String!) {
  userSignupResend(email: $email) {
    success
    errors {
      ...errors
    }
  }
}
    ${C}`;function O(r={}){return $(K,r)}const W={key:1,class:"flex flex-col items-center gap-2.5"},Z={class:"inline-flex flex-wrap items-center justify-center p-2 text-sm"},Ve=M({beforeRouteEnter(r){return h().config.user_create_account?!0:r.redirectedFrom?!1:"/"},__name:"Signup",setup(r){const g=h(),E=B(),{signupSchema:x}=J(),{form:N,isDisabled:_}=I(),u=v(!1),l=v(""),R=U(()=>u.value?__("Registration successful!"):Y.t("Join %s",g.config.product_name)),T=async e=>new k(X()).send({input:{firstname:e.firstname,lastname:e.lastname,email:e.email,password:e.password}}).then(()=>{u.value=!0,l.value=e.email}),{notify:y}=j(),V=()=>{new k(O({variables:{email:l.value}}),{errorShowNotification:!1}).send().then(()=>{y({id:"resend-verify-email",type:b.Success,message:__('Email sent to "%s". Please verify your email account.'),messagePlaceholder:[l.value]})}).catch(()=>{y({id:"resend-verify-email-error",type:b.Error,message:__("The verification email could not be resent.")})})},D=()=>{E.replace("login")};return(e,s)=>{const p=S("CommonLabel"),L=S("CommonLink");return n(),a(H,{"box-size":"medium","show-logo":!1,title:R.value},{boxActions:t(()=>[m(d,{variant:"secondary",size:"medium",disabled:c(_),onClick:s[1]||(s[1]=f=>D())},{default:t(()=>[i(o(e.$t("Cancel & Go Back")),1)]),_:1},8,["disabled"]),u.value?(n(),a(d,{key:1,variant:"submit",size:"medium",onClick:s[2]||(s[2]=f=>V())},{default:t(()=>[i(o(e.$t("Resend verification email")),1)]),_:1})):(n(),a(d,{key:0,variant:"submit",type:"submit",size:"medium",form:"signup",disabled:c(_)},{default:t(()=>[i(o(e.$t("Create my account")),1)]),_:1},8,["disabled"]))]),bottomContent:t(()=>[z("div",Z,[m(p,{class:"text-center text-stone-200 dark:text-neutral-500"},{default:t(()=>[i(o(e.$t("You're already registered with your email address if you've been in touch with our Support team.")),1)]),_:1}),e.$c.user_lost_password?(n(),a(L,{key:0,link:"/reset-password"},{default:t(()=>[i(o(e.$t("You can request your password here.")),1)]),_:1})):F("",!0)]),m(G,{screen:c(A).Signup},null,8,["screen"])]),default:t(()=>[u.value?(n(),P("div",W,[m(p,{class:"py-5 text-center"},{default:t(()=>[i(o(e.$t('Thanks for joining. Email sent to "%s".',l.value)),1)]),_:1}),m(p,{class:"py-5 text-center"},{default:t(()=>[i(o(e.$t("Please click on the link in the verification email. If you don't see the email, check other places it might be, like your junk, spam, social, or other folders.")),1)]),_:1})])):(n(),a(q,{key:0,id:"signup",ref_key:"form",ref:N,"form-class":"mb-2.5",schema:c(x),onSubmit:s[0]||(s[0]=f=>T(f))},null,8,["schema"]))]),_:1},8,["title"])}}});export{Ve as default};
//# sourceMappingURL=Signup-D6pwDHeg.js.map
