import{f as v,ap as P,r as C,a1 as R,m as a,D as u,y as r,q as c,Q as i,M as n,u as l,p as E}from"./vue-oicRkvo0.js";import{e as h,M as T,U as q,N as D,c as F}from"./apollo-Cj5TVUDk.js";import{_ as M}from"./Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js";import{u as N}from"./useForm-CUKec4n5.js";import{e as U,T as z}from"./routes-CgLO9M4y.js";import{c as p}from"./desktop-l0eJ1dZN.js";import{_ as B}from"./CommonPublicLinks.vue_vue_type_script_setup_true_lang-DcbvsgxJ.js";import{_ as L}from"./LayoutPublicPage.vue_vue_type_script_setup_true_lang-C_6Ob6yy.js";import{n as x}from"./vendor-C11O1Xx8.js";import{X as A}from"./overviewAttributes.api-C09LSZ8O.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import"./vite-FJshFMF2.js";import"./useCopyToClipboard-CjkPg__g.js";import"./theme-Bv2ClBzZ.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";import"./autocompleteTags.api-CG5-cm_A.js";import"./autocompleteSearchTicket.api-DfOQWGlO.js";import"./ticketUpdates.api-BhGIG_Ti.js";import"./ticketAttributes.api-rqx5ITab.js";import"./useTicketCreateArticleType-D7iVcJ_6.js";import"./types-Cu-Nkl7K.js";import"./useTicketCreateView-HCH46SPv.js";import"./commonjsHelpers-BosuxZz1.js";import"./usePublicLinks-CDMBq4UM.js";import"./CommonLogo.vue_vue_type_script_setup_true_lang-xQq9wMEL.js";import"./useLogoUrl-8sIhej5J.js";import"./LayoutPublicPageBoxActions-BFjF_v1c.js";const H=x`
    mutation userPasswordResetSend($username: String!) {
  userPasswordResetSend(username: $username) {
    success
    errors {
      ...errors
    }
  }
}
    ${A}`;function V(m={}){return h(H,m)}const j={key:1},ke=v({beforeRouteEnter(m){return U().config.user_lost_password?!0:m.redirectedFrom?!1:"/"},__name:"PasswordReset",setup(m){const d=P(),w=[{type:"text",label:__("Username / Email"),name:"login",required:!0}],{form:y,isDisabled:f}=N(),o=C(!1),b=new T(V()),{notify:g}=F(),k=async e=>{var t;try{const s=await b.send({username:e.login});(t=s==null?void 0:s.userPasswordResetSend)!=null&&t.success&&(o.value=!0)}catch(s){s instanceof q&&g({id:"password-reset",type:D.Error,message:s.generalErrors[0]})}},S=()=>{o.value=!1},$=()=>{d.replace("/login")};return(e,t)=>{const s=R("CommonLabel");return a(),u(L,{"box-size":"small",title:o.value?e.__("The password reset request was successful."):e.__("Forgot your password?")},{boxActions:r(()=>[c(p,{variant:"secondary",size:"medium",disabled:l(f),onClick:t[1]||(t[1]=_=>$())},{default:r(()=>[i(n(e.$t("Cancel & Go Back")),1)]),_:1},8,["disabled"]),o.value?(a(),u(p,{key:1,variant:"submit",size:"medium",onClick:S},{default:r(()=>[i(n(e.$t("Try again")),1)]),_:1})):(a(),u(p,{key:0,type:"submit",variant:"submit",size:"medium",form:"password-reset",disabled:l(f)},{default:r(()=>[i(n(e.$t("Submit")),1)]),_:1},8,["disabled"]))]),bottomContent:r(()=>[c(B,{screen:l(z).PasswordReset},null,8,["screen"])]),default:r(()=>[o.value?(a(),E("section",j,[c(s,{class:"mb-5 text-center"},{default:r(()=>[i(n(e.$t("Password reset instructions were sent to your email address.")),1)]),_:1}),c(s,{class:"text-center"},{default:r(()=>[i(n(e.$t("If you don't receive instructions within a minute or two, check your email's spam and junk filters, or try resending your request.")),1)]),_:1})])):(a(),u(M,{key:0,id:"password-reset",ref_key:"form",ref:y,"form-class":"mb-2.5",schema:w,onSubmit:t[0]||(t[0]=_=>k(_))},null,512))]),_:1},8,["title"])}}});export{ke as default};
//# sourceMappingURL=PasswordReset-Crd4Q103.js.map
