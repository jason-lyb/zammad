{"version":3,"file":"useAttachments-0IU6Vvzp.js","sources":["../../../../../app/frontend/shared/composables/useAttachments.ts"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { computed, type ComputedRef, type Ref } from 'vue'\n\nimport { getAttachmentLinks } from '#shared/composables/getAttachmentLinks.ts'\nimport type { Attachment } from '#shared/entities/attachment/types.ts'\nimport { useApplicationStore } from '#shared/stores/application.ts'\n\ninterface AttachmentsOptions {\n  attachments: ComputedRef<Attachment[]> | Ref<Attachment[]>\n}\n\nexport interface AttachmentWithUrls extends Attachment {\n  preview: string\n  inline: string\n  canDownload: boolean\n  downloadUrl: string\n}\n\nexport const useAttachments = (options: AttachmentsOptions) => {\n  const application = useApplicationStore()\n\n  const attachments = computed<AttachmentWithUrls[]>(() => {\n    return options.attachments.value.map((attachment) => {\n      const { previewUrl, inlineUrl, canDownload, downloadUrl } =\n        getAttachmentLinks(\n          {\n            internalId: attachment.internalId,\n            type: attachment.type,\n          },\n          application.config.api_path,\n        )\n\n      return {\n        ...attachment,\n        preview: previewUrl,\n        inline: inlineUrl,\n        canDownload,\n        downloadUrl,\n      }\n    })\n  })\n\n  return {\n    attachments,\n  }\n}\n"],"names":["useAttachments","options","application","useApplicationStore","computed","attachment","previewUrl","inlineUrl","canDownload","downloadUrl","getAttachmentLinks"],"mappings":"+HAmBa,MAAAA,EAAkBC,GAAgC,CAC7D,MAAMC,EAAcC,IAuBb,MAAA,CACL,YAtBkBC,EAA+B,IAC1CH,EAAQ,YAAY,MAAM,IAAKI,GAAe,CACnD,KAAM,CAAE,WAAAC,EAAY,UAAAC,EAAW,YAAAC,EAAa,YAAAC,CAC1C,EAAAC,EACE,CACE,WAAYL,EAAW,WACvB,KAAMA,EAAW,IACnB,EACAH,EAAY,OAAO,QAAA,EAGhB,MAAA,CACL,GAAGG,EACH,QAASC,EACT,OAAQC,EACR,YAAAC,EACA,YAAAC,CAAA,CACF,CACD,CACF,CAGC,CAEJ"}