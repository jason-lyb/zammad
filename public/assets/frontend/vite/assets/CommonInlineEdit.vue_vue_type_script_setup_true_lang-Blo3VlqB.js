const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CommonButton-Cx61Rl7b.js","assets/desktop-l0eJ1dZN.js","assets/vue-oicRkvo0.js","assets/vendor-C11O1Xx8.js","assets/commonjsHelpers-BosuxZz1.js","assets/overviewAttributes.api-C09LSZ8O.js","assets/routes-CgLO9M4y.js","assets/vite-FJshFMF2.js","assets/apollo-Cj5TVUDk.js","assets/lodash-pFOI14f-.js","assets/formkit-5nol1GBe.js","assets/overviewAttributes-r_4zXopK.css","assets/Form.vue_vue_type_script_setup_true_lang-B6L-6HzY.js","assets/FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js","assets/Form-BSACsGR2.css","assets/useForm-CUKec4n5.js","assets/useCopyToClipboard-CjkPg__g.js","assets/theme-Bv2ClBzZ.js","assets/datepicker-BBNcWeHz.js","assets/date-B2UyDZN7.js","assets/autocompleteTags.api-CG5-cm_A.js","assets/autocompleteSearchTicket.api-DfOQWGlO.js","assets/ticketUpdates.api-BhGIG_Ti.js","assets/ticketAttributes.api-rqx5ITab.js","assets/useTicketCreateArticleType-D7iVcJ_6.js","assets/types-Cu-Nkl7K.js","assets/useTicketCreateView-HCH46SPv.js","assets/desktop-BAkSnNV9.css"])))=>i.map(i=>d[i]);
import{_ as ee}from"./vite-FJshFMF2.js";import{f as ae,aa as $,a7 as H,r as w,ab as te,c as o,af as le,w as S,k as oe,n as A,a8 as se,m as y,p as C,U as v,H as p,q as L,C as ie,I as x,ad as ne,W as u,L as E,u as D,as as re}from"./vue-oicRkvo0.js";import{u as ue,aK as de,aL as fe}from"./overviewAttributes.api-C09LSZ8O.js";import{u as ce}from"./useHtmlLinks-53b5zJaG.js";import{i as I}from"./routes-CgLO9M4y.js";const be=["role","aria-disabled","tabindex"],ve={class:"relative z-10 w-full ltr:pr-14 rtl:pl-14"},pe=["disabled","placeholder","onKeydown"],ge={class:"absolute z-10 flex gap-1 ltr:right-0 rtl:left-0 rtl:-order-1"},Ce=ae({__name:"CommonInlineEdit",props:$({value:{},initialEditValue:{},id:{},disabled:{type:Boolean},required:{type:Boolean},placeholder:{},size:{default:"medium"},alternativeBackground:{type:Boolean},submitLabel:{},cancelLabel:{},detectLinks:{type:Boolean},loading:{type:Boolean},labelAttrs:{},label:{},block:{type:Boolean},classes:{},onSubmitEdit:{}},{editing:{type:Boolean,default:!1},editingModifiers:{}}),emits:$(["cancel-edit"],["update:editing"]),setup(B,{expose:O,emit:P}){const z=re(()=>ee(()=>import("./CommonButton-Cx61Rl7b.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27]))),a=B,q=P,g=H("target"),d=w(!1),n=w(!1),f=H("label"),s=w(a.value),l=te(B,"editing"),M=o(()=>!a.disabled&&l.value),N=o(()=>{if(!a.disabled)return d.value?I.t("Open link"):a.label||I.t("Start Editing")}),m=e=>(a.required?n.value=e.length>=1:n.value=!0,n.value),r=o({get:()=>s.value,set:e=>{s.value=e,n.value=m(s.value)}}),i=(e=!0)=>{l.value=!1,e&&q("cancel-edit"),s.value.length||(s.value=a.initialEditValue??a.value)},k=e=>{var t;a.detectLinks&&((t=e==null?void 0:e.target)!=null&&t.closest("a"))||l.value||a.disabled||(l.value=!0)},c=()=>{if(!a.onSubmitEdit)return;if(a.value===s.value)return i(!1);if(!m(r.value))return;const e=a.onSubmitEdit(r.value);if(e instanceof Promise)return e.then(t=>{t==null||t(),i(!1)}).catch(()=>{});e==null||e(),i(!1)},U=e=>{if(a.detectLinks){if(e.target.closest("a")){d.value=!0;return}d.value=!1}},F=()=>{a.detectLinks&&(d.value=!1)};le(g,()=>{if(l.value)return c();i()});const{setupLinksHandlers:T}=ce("/desktop"),R=e=>{e.preventDefault(),c()},W=o(()=>a.detectLinks?fe(a.value):a.value);ue(g),S(()=>a.value,()=>{var e,t;a.detectLinks&&((e=f.value)!=null&&e.$el)&&T((t=f.value)==null?void 0:t.$el)},{flush:"post"}),oe(()=>{A(()=>{var e,t;a.detectLinks&&((e=f.value)!=null&&e.$el)&&T((t=f.value)==null?void 0:t.$el)})}),S(l,()=>{s.value=a.initialEditValue??a.value});const j=e=>{m(r.value),A(()=>{setTimeout(()=>{e.focus()},0)})},G=o(()=>{let e="group-focus-within:before:absolute group-focus-within:before:-left-[5px] group-focus-within:before:top-1/2 group-focus-within:before:z-0 group-focus-within:before:h-[calc(100%+10px)] group-focus-within:before:w-[calc(100%+10px)] group-focus-within:before:-translate-y-1/2 group-focus-within:before:rounded-md";return a.alternativeBackground?e+=" group-focus-within:before:bg-neutral-50 group-focus-within:before:dark:bg-gray-500":e+=" group-focus-within:before:bg-blue-200 group-focus-within:before:dark:bg-gray-700",e}),J=o(()=>({[G.value]:!l.value&&!a.disabled})),Q=o(()=>({"cursor-text":a.disabled})),X={xs:"text-[10px] leading-[10px]",small:"text-xs leading-snug",medium:"text-sm leading-snug",large:"text-base leading-snug",xl:"text-xl leading-snug"},Y={xs:"min-h-2",small:"min-h-3",medium:"min-h-4",large:"min-h-5",xl:"min-h-6"},Z=o(()=>a.alternativeBackground?"before:bg-neutral-50 dark:before:bg-gray-500":"before:bg-blue-200 dark:before:bg-gray-700"),_=o(()=>{let e="before:absolute before:-left-[5px] before:top-1/2 before:-translate-y-1/2 before:-z-10 before:h-[calc(100%+10px)] before:w-[calc(100%+10px)] before:rounded-md";return a.alternativeBackground?e+=" hover:before:bg-neutral-50 dark:hover:before:bg-gray-500":e+=" hover:before:bg-blue-200 dark:hover:before:bg-gray-700",a.disabled?"":e});return O({activateEditing:k,isEditing:l}),(e,t)=>{var V,K;const h=se("tooltip");return y(),C("div",{ref_key:"target",ref:g,role:M.value||e.disabled?void 0:"button",class:p(["group relative flex w-fit items-center gap-1 focus:outline-hidden",[Q.value,{"w-full":e.block}]]),"aria-disabled":e.disabled,tabindex:M.value||e.disabled?void 0:0,onClickCapture:k,onKeydownCapture:u(k,["enter"]),onMouseover:U,onMouseleave:F,onKeydown:t[3]||(t[3]=u(b=>i(),["esc"]))},[l.value?(y(),C("div",{key:1,class:p(["flex max-w-full items-center gap-2 before:absolute before:top-1/2 before:-left-[5px] before:z-0 before:h-[calc(100%+10px)] before:w-[calc(100%+10px)] before:-translate-y-1/2 before:rounded-md",[{"w-full":e.block},Z.value,X[e.size]]])},[x("div",ve,[v(x("input",{key:"editable-content-key","onUpdate:modelValue":t[0]||(t[0]=b=>r.value=b),class:p(["block w-full flex-shrink-0 bg-transparent text-gray-100 outline-hidden dark:text-neutral-400",[{grow:e.block},((K=e.classes)==null?void 0:K.input)||""]]),disabled:e.disabled||e.loading,placeholder:e.placeholder,onKeydown:u(E(R,["stop"]),["enter"])},null,42,pe),[[ne,r.value,void 0,{trim:!0}],[j]])]),x("div",ge,[v(L(D(z),{icon:"x-lg",variant:"danger",onClick:t[1]||(t[1]=b=>i()),onKeydown:t[2]||(t[2]=u(E(b=>i(),["stop"]),["enter"]))},null,512),[[h,e.cancelLabel||e.$t("Cancel")]]),v(L(D(z),{class:"rtl:-order-1",icon:"check2",disabled:!n.value,variant:"submit",onClick:c,onKeydown:u(E(c,["stop"]),["enter"])},null,8,["disabled","onKeydown"]),[[h,e.submitLabel||e.$t("Save changes")]])])],2)):v((y(),C("div",{key:0,class:p(["Content relative z-0 flex grow items-center",[{grow:e.block,"invisible opacity-0":l.value},J.value,_.value]])},[L(de,ie({id:e.id,ref:"label",class:"z-10 break-words",style:{"word-break":"break-word"}},e.labelAttrs,{size:e.size,class:[(V=e.classes)==null?void 0:V.label,Y[e.size]],innerHTML:W.value}),null,16,["id","size","class","innerHTML"])],2)),[[h,N.value]])],42,be)}}});export{Ce as _};
//# sourceMappingURL=CommonInlineEdit.vue_vue_type_script_setup_true_lang-Blo3VlqB.js.map
