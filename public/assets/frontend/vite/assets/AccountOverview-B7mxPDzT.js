import{n as q,u as R}from"./vendor-C11O1Xx8.js";import{f as U,ap as Z,c as C,r as F,a1 as P,m as r,p as x,u as e,I as u,q as a,M as o,E as c,y as s,D as d,Q as n,b as j}from"./vue-oicRkvo0.js";import{_ as E,bi as $}from"./overviewAttributes.api-C09LSZ8O.js";import{_ as K}from"./FormGroup.vue_vue_type_script_setup_true_lang-DIx-HUKU.js";import{u as Y,a as b,b as w,c as G,C as J}from"./mobile-Bk4bKGxF.js";import{u as X}from"./useLocaleUpdate-BuNp3bsA.js";import{u as ee,Q as te}from"./apollo-Cj5TVUDk.js";import{a as se,ae as oe,af as ae,i as ne}from"./routes-CgLO9M4y.js";import{u as ie,i as L}from"./pwa-THoW_3xc.js";import{u as le}from"./useHeader-B3UlgUtw.js";import"./commonjsHelpers-BosuxZz1.js";import"./lodash-pFOI14f-.js";import"./formkit-5nol1GBe.js";import"./vite-FJshFMF2.js";import"./add.api-CxwFhgGn.js";import"./datepicker-BBNcWeHz.js";import"./date-B2UyDZN7.js";const re=q`
    query productAbout {
  productAbout
}
    `;function ue(k={}){return ee(re,{},k)}const ce={class:"px-4"},me={key:0,class:"flex flex-col items-center justify-center py-6"},pe={class:"mt-2 text-xl font-bold"},de={class:"mb-4"},fe={class:"inline-flex min-h-[54px] items-center p-3"},_e=["innerHTML"],Me=U({__name:"AccountOverview",setup(k){var y,A;const V=Z(),I=()=>{V.push("/logout")};le({title:__("Account"),backUrl:"/",backAvoidHomeButton:!0});const m=se(),{user:p}=R(m),{modelCurrentLocale:f,localeOptions:T,isSavingLocale:H,translation:M}=X(),h=m.hasPermission("admin"),Q=new te(ue({enabled:h,fetchPolicy:"cache-first"}),{errorNotificationMessage:__("The product version could not be fetched.")}).result(),g=((y=oe.name)==null?void 0:y.includes("Safari"))&&((A=ae.name)==null?void 0:A.includes("iOS")),{canInstallPWA:v,installPWA:z}=ie(),B=C(()=>!L()&&(v.value||g)),_=F(!1),D=C(()=>{const t=$({class:"inline-flex text-blue",decorative:!0,size:"small",name:"ios-share"}),i=$({class:"inline-flex",decorative:!0,size:"small",name:"add-square"});return ne.t(__('To install %s as an app, press the %s "Share" button and then the %s "Add to Home Screen" button.'),__("Zammad"),t,i)}),N=()=>{if(!L()){if(v.value){z();return}g&&(_.value=!0)}},{forceDesktop:O}=Y();return(t,i)=>{const S=P("FormKit"),W=P("CommonLink");return r(),x("div",ce,[e(p)?(r(),x("div",me,[u("div",null,[a(E,{entity:e(p),size:"xl",personal:""},null,8,["entity"])]),u("div",pe,o(e(p).firstname)+" "+o(e(p).lastname),1)])):c("",!0),a(w,null,{default:s(()=>[e(m).hasPermission("user_preferences.avatar")?(r(),d(b,{key:0,icon:{name:"person",size:"base"},"icon-bg":"bg-pink",link:"/account/avatar"},{default:s(()=>[n(o(t.$t("Avatar")),1)]),_:1})):c("",!0),B.value?(r(),d(b,{key:1,icon:{name:"install",size:"small"},"icon-bg":"bg-blue",onClick:N},{default:s(()=>[n(o(t.$t("Install App")),1)]),_:1})):c("",!0),a(b,{link:"/","link-external":"",icon:{name:"desktop",size:"base"},"icon-bg":"bg-orange",onClick:e(O)},{default:s(()=>[n(o(t.$t("Continue to desktop")),1)]),_:1},8,["onClick"])]),_:1}),e(m).hasPermission("user_preferences.language")?(r(),d(K,{key:1},{help:s(()=>[n(o(t.$t("Did you know?"))+" ",1),a(W,{class:"text-blue",target:"_blank",link:e(M).link},{default:s(()=>[n(o(t.$t("You can help translating Zammad.")),1)]),_:1},8,["link"])]),default:s(()=>[a(S,{modelValue:e(f),"onUpdate:modelValue":i[0]||(i[0]=l=>j(f)?f.value=l:null),type:"treeselect",label:t.__("Language"),options:e(T),disabled:e(H),"no-options-label-translation":!0,sorting:"label"},null,8,["modelValue","label","options","disabled"])]),_:1})):c("",!0),e(h)?(r(),d(w,{key:2},{default:s(()=>[a(G,{label:t.__("Version")},{default:s(()=>{var l;return[n(o(t.$t("This is Zammad version %s",(l=e(Q))==null?void 0:l.productAbout)),1)]}),_:1},8,["label"])]),_:1})):c("",!0),u("div",de,[a(S,{variant:"danger","wrapper-class":"mt-4 text-base flex grow justify-center items-center","input-class":"py-2 px-4 w-full h-14 rounded-xl select-none",type:"submit",name:"signout",onClick:I},{default:s(()=>[n(o(t.$t("Sign out")),1)]),_:1})]),a(J,{state:_.value,"onUpdate:state":i[1]||(i[1]=l=>_.value=l),messages:[]},{header:s(()=>[u("section",fe,[u("span",{innerHTML:D.value},null,8,_e)])]),_:1},8,["state"])])}}});export{Me as default};
//# sourceMappingURL=AccountOverview-B7mxPDzT.js.map
