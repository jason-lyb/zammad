import{az as r,aY as v}from"./overviewAttributes.api-C09LSZ8O.js";import{a as w}from"./routes-CgLO9M4y.js";const C=()=>{const p=(t,l,o)=>!(!l.fields.organization_id||t===r.FieldChange&&(!o||o.name!=="customer_id")),g=(t,l,o)=>{const{formNode:c,values:z,initialEntityObject:s,changedField:e}=o,{schemaData:F,changeFields:f,updateSchemaDataField:h}=l;if(!p(t,F,e))return;const m=w(),d={show:!1,required:!1},O=()=>{var u,i;if(m.hasPermission("ticket.agent")){if(e!=null&&e.newValue){const n=(i=(u=c==null?void 0:c.find("customer_id","name"))==null?void 0:u.context)==null?void 0:i.optionValueLookup;return n[e.newValue].object||n[e.newValue].user}return t===r.FieldChange||!z.customer_id||!s?void 0:s.customer}return m.user},_=(u,i)=>{if(!i)return;d.show=!0,d.required=!0;const n=v(i);h({name:"organization_id",props:{defaultFilter:"*",alwaysApplyDefaultFilter:!0,options:[n],additionalQueryParams:{customerId:u}},value:n.value})},a=O();a!=null&&a.hasSecondaryOrganizations&&_(a.id,t===r.Initial&&s?s.organization:a.organization),f.value.organization_id={...f.value.organization_id||{},...d}};return{execution:[r.Initial,r.FieldChange],callback:g}};export{C as u};
//# sourceMappingURL=useTicketFormOrganizationHandler-DLoRMaF_.js.map
