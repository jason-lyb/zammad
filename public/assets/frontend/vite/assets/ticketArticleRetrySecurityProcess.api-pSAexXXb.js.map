{"version":3,"file":"ticketArticleRetrySecurityProcess.api-pSAexXXb.js","sources":["../../../../../app/frontend/shared/entities/ticket/composables/useTicketArticleReplyAction.ts","../../../../../app/frontend/shared/entities/ticket/graphql/fragments/ticketArticleAttributes.api.ts","../../../../../app/frontend/shared/entities/ticket/graphql/queries/ticket/articles.api.ts","../../../../../app/frontend/shared/entities/ticket/graphql/subscriptions/ticketArticlesUpdates.api.ts","../../../../../app/frontend/shared/entities/ticket-article/composables/useArticleDataHandler.ts","../../../../../app/frontend/shared/entities/ticket/composables/useTicketChannel.ts","../../../../../app/frontend/shared/utils/selection.ts","../../../../../app/frontend/shared/entities/ticket-article/composables/getArticleSelection.ts","../../../../../app/frontend/shared/composables/useArticleToggleMore.ts","../../../../../app/frontend/shared/composables/useHtmlInlineImages.ts","../../../../../app/frontend/shared/entities/ticket-article/graphql/mutations/ticketArticleRetryMediaDownload.api.ts","../../../../../app/frontend/shared/entities/ticket-article/composables/useTicketArticleRetryMediaDownload.ts","../../../../../app/frontend/shared/entities/ticket-article/graphql/fragments/securityState.api.ts","../../../../../app/frontend/shared/entities/ticket-article/graphql/mutations/ticketArticleRetrySecurityProcess.api.ts"],"sourcesContent":["// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { nextTick } from 'vue'\n\nimport type {\n  EditorContentType,\n  FieldEditorContext,\n} from '#shared/components/Form/fields/FieldEditor/types.ts'\nimport type { FormRefParameter } from '#shared/components/Form/types.ts'\nimport type { TicketArticlePerformOptions } from '#shared/entities/ticket-article/action/plugins/types.ts'\n\nimport type { FormKitNode } from '@formkit/core'\n\nexport const useTicketArticleReplyAction = (\n  form: FormRefParameter,\n  showArticleReply: () => void | Promise<void>,\n) => {\n  const openReplyForm: TicketArticlePerformOptions['openReplyForm'] = async (\n    values = {},\n  ) => {\n    const formNode = form.value?.formNode as FormKitNode\n\n    await showArticleReply()\n\n    const { articleType, ...otherOptions } = values\n\n    const typeNode = formNode.find('articleType', 'name')\n    if (formNode.context) {\n      Object.assign(formNode.context, { _open: true })\n    }\n\n    typeNode?.input(articleType, false)\n\n    // Trigger new fields that depend on the articleType.\n    await nextTick()\n\n    for (const [key, value] of Object.entries(otherOptions)) {\n      const node = formNode.find(key, 'name')\n      node?.input(value, false)\n      // TODO: make handling more generic(?)\n      if (node && (key === 'to' || key === 'cc')) {\n        const options = Array.isArray(value)\n          ? value.map((v) => ({ value: v, label: v }))\n          : [{ value, label: value }]\n        node.emit('prop:options', options)\n      }\n    }\n\n    formNode.emit('article-reply-open', articleType)\n\n    const context = formNode.find('body', 'name')?.context as\n      | FieldEditorContext\n      | undefined\n\n    context?.focus()\n\n    nextTick(() => {\n      if (formNode.context) {\n        Object.assign(formNode.context, { _open: false })\n      }\n    })\n  }\n\n  const getNewArticleBody = (type: EditorContentType): string => {\n    const bodyElement = form.value?.getNodeByName('body')\n    if (!bodyElement) return ''\n    const getEditorValue = bodyElement.context?.getEditorValue\n    return typeof getEditorValue === 'function' ? getEditorValue(type) : ''\n  }\n\n  return {\n    openReplyForm,\n    getNewArticleBody,\n  }\n}\n","import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nexport const TicketArticleAttributesFragmentDoc = gql`\n    fragment ticketArticleAttributes on TicketArticle {\n  id\n  internalId\n  from {\n    raw\n    parsed {\n      name\n      emailAddress\n      isSystemAddress\n    }\n  }\n  messageId\n  to {\n    raw\n    parsed {\n      name\n      emailAddress\n      isSystemAddress\n    }\n  }\n  cc {\n    raw\n    parsed {\n      name\n      emailAddress\n      isSystemAddress\n    }\n  }\n  subject\n  replyTo {\n    raw\n    parsed {\n      name\n      emailAddress\n      isSystemAddress\n    }\n  }\n  messageId\n  messageIdMd5\n  inReplyTo\n  contentType\n  attachmentsWithoutInline {\n    id\n    internalId\n    name\n    size\n    type\n    preferences\n  }\n  preferences\n  bodyWithUrls\n  internal\n  createdAt\n  author {\n    id\n    fullname\n    firstname\n    lastname\n    email\n    active\n    image\n    vip\n    outOfOffice\n    outOfOfficeStartAt\n    outOfOfficeEndAt\n    authorizations {\n      provider\n      uid\n      username\n    }\n  }\n  type {\n    name\n    communication\n  }\n  sender {\n    name\n  }\n  securityState {\n    encryptionMessage\n    encryptionSuccess\n    signingMessage\n    signingSuccess\n    type\n  }\n  mediaErrorState {\n    error\n  }\n  detectedLanguage\n}\n    `;","import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nimport { TicketArticleAttributesFragmentDoc } from '../../fragments/ticketArticleAttributes.api';\nimport * as VueApolloComposable from '@vue/apollo-composable';\nimport * as VueCompositionApi from 'vue';\nexport type ReactiveFunction<TParam> = () => TParam;\n\nexport const TicketArticlesDocument = gql`\n    query ticketArticles($ticketId: ID, $ticketInternalId: Int, $ticketNumber: String, $beforeCursor: String, $afterCursor: String, $pageSize: Int, $loadFirstArticles: Boolean = true, $firstArticlesCount: Int = 1) {\n  firstArticles: ticketArticles(\n    ticket: {ticketId: $ticketId, ticketInternalId: $ticketInternalId, ticketNumber: $ticketNumber}\n    first: $firstArticlesCount\n  ) @include(if: $loadFirstArticles) {\n    edges {\n      node {\n        ...ticketArticleAttributes\n      }\n    }\n  }\n  articles: ticketArticles(\n    ticket: {ticketId: $ticketId, ticketInternalId: $ticketInternalId, ticketNumber: $ticketNumber}\n    before: $beforeCursor\n    after: $afterCursor\n    last: $pageSize\n  ) {\n    totalCount\n    edges {\n      node {\n        ...ticketArticleAttributes\n      }\n      cursor\n    }\n    pageInfo {\n      endCursor\n      startCursor\n      hasPreviousPage\n    }\n  }\n}\n    ${TicketArticleAttributesFragmentDoc}`;\nexport function useTicketArticlesQuery(variables: Types.TicketArticlesQueryVariables | VueCompositionApi.Ref<Types.TicketArticlesQueryVariables> | ReactiveFunction<Types.TicketArticlesQueryVariables> = {}, options: VueApolloComposable.UseQueryOptions<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables> | VueCompositionApi.Ref<VueApolloComposable.UseQueryOptions<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>> | ReactiveFunction<VueApolloComposable.UseQueryOptions<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>> = {}) {\n  return VueApolloComposable.useQuery<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>(TicketArticlesDocument, variables, options);\n}\nexport function useTicketArticlesLazyQuery(variables: Types.TicketArticlesQueryVariables | VueCompositionApi.Ref<Types.TicketArticlesQueryVariables> | ReactiveFunction<Types.TicketArticlesQueryVariables> = {}, options: VueApolloComposable.UseQueryOptions<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables> | VueCompositionApi.Ref<VueApolloComposable.UseQueryOptions<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>> | ReactiveFunction<VueApolloComposable.UseQueryOptions<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>> = {}) {\n  return VueApolloComposable.useLazyQuery<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>(TicketArticlesDocument, variables, options);\n}\nexport type TicketArticlesQueryCompositionFunctionResult = VueApolloComposable.UseQueryReturn<Types.TicketArticlesQuery, Types.TicketArticlesQueryVariables>;","import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nimport { TicketArticleAttributesFragmentDoc } from '../fragments/ticketArticleAttributes.api';\nimport * as VueApolloComposable from '@vue/apollo-composable';\nimport * as VueCompositionApi from 'vue';\nexport type ReactiveFunction<TParam> = () => TParam;\n\nexport const TicketArticleUpdatesDocument = gql`\n    subscription ticketArticleUpdates($ticketId: ID!) {\n  ticketArticleUpdates(ticketId: $ticketId) {\n    addArticle {\n      id\n      createdAt\n    }\n    updateArticle {\n      ...ticketArticleAttributes\n    }\n    removeArticleId\n  }\n}\n    ${TicketArticleAttributesFragmentDoc}`;\nexport function useTicketArticleUpdatesSubscription(variables: Types.TicketArticleUpdatesSubscriptionVariables | VueCompositionApi.Ref<Types.TicketArticleUpdatesSubscriptionVariables> | ReactiveFunction<Types.TicketArticleUpdatesSubscriptionVariables>, options: VueApolloComposable.UseSubscriptionOptions<Types.TicketArticleUpdatesSubscription, Types.TicketArticleUpdatesSubscriptionVariables> | VueCompositionApi.Ref<VueApolloComposable.UseSubscriptionOptions<Types.TicketArticleUpdatesSubscription, Types.TicketArticleUpdatesSubscriptionVariables>> | ReactiveFunction<VueApolloComposable.UseSubscriptionOptions<Types.TicketArticleUpdatesSubscription, Types.TicketArticleUpdatesSubscriptionVariables>> = {}) {\n  return VueApolloComposable.useSubscription<Types.TicketArticleUpdatesSubscription, Types.TicketArticleUpdatesSubscriptionVariables>(TicketArticleUpdatesDocument, variables, options);\n}\nexport type TicketArticleUpdatesSubscriptionCompositionFunctionResult = VueApolloComposable.UseSubscriptionReturn<Types.TicketArticleUpdatesSubscription, Types.TicketArticleUpdatesSubscriptionVariables>;","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { noop } from 'lodash-es'\nimport { computed, type ComputedRef, nextTick, type Ref } from 'vue'\n\nimport { useTicketArticlesQuery } from '#shared/entities/ticket/graphql/queries/ticket/articles.api.ts'\nimport { TicketArticleUpdatesDocument } from '#shared/entities/ticket/graphql/subscriptions/ticketArticlesUpdates.api.ts'\nimport type {\n  PageInfo,\n  TicketArticlesQuery,\n  TicketArticleUpdatesSubscription,\n  TicketArticleUpdatesSubscriptionVariables,\n} from '#shared/graphql/types.ts'\nimport { getApolloClient } from '#shared/server/apollo/client.ts'\nimport { QueryHandler } from '#shared/server/apollo/handler/index.ts'\n\nexport interface AddArticleCallbackArgs {\n  updates: TicketArticleUpdatesSubscription['ticketArticleUpdates']\n  previousArticlesEdges: TicketArticlesQuery['articles']['edges']\n  previousArticlesEdgesCount: number\n  articlesQuery: unknown // :TODO type this query sustainable\n  result: Ref<TicketArticlesQuery | undefined>\n  allArticleLoaded: ComputedRef<boolean>\n  refetchArticlesQuery: (pageSize: Maybe<number>) => void\n}\n\nexport const useArticleDataHandler = (\n  ticketId: Ref<string>,\n  options: {\n    pageSize: number\n    firstArticlesCount?: Ref<number>\n    onAddArticleCallback?: (args: AddArticleCallbackArgs) => void\n  } = {\n    pageSize: 20,\n  },\n) => {\n  const firstArticlesCount = computed(\n    () => options.firstArticlesCount?.value || 5,\n  )\n\n  const articlesQuery = new QueryHandler(\n    useTicketArticlesQuery(\n      () => ({\n        ticketId: ticketId.value,\n        pageSize: options.pageSize || 20,\n        firstArticlesCount: firstArticlesCount.value,\n      }),\n      {\n        context: {\n          batch: {\n            active: false,\n          },\n        },\n      },\n    ),\n  )\n\n  const articleResult = articlesQuery.result()\n\n  const articleData = computed(() => articleResult.value)\n\n  const allArticleLoaded = computed(() => {\n    if (!articleResult.value?.articles.totalCount) return false\n    return (\n      articleResult.value?.articles.edges.length <\n      articleResult.value?.articles.totalCount\n    )\n  })\n\n  const refetchArticlesQuery = (pageSize: Maybe<number>) => {\n    articlesQuery.refetch({\n      ticketId: ticketId.value,\n      pageSize,\n    })\n  }\n\n  const articleLoading = articlesQuery.loading()\n\n  const isLoadingArticles = computed(() => {\n    // Return already true when a article result already exists from the cache, also\n    // when maybe a loading is in progress(because of cache + network).\n    if (articleData.value !== undefined) return false\n\n    return articleLoading.value\n  })\n\n  const adjustPageInfoAfterDeletion = (nextEndCursorEdge?: Maybe<string>) => {\n    const newPageInfo: Pick<PageInfo, 'startCursor' | 'endCursor'> = {}\n\n    if (nextEndCursorEdge) {\n      newPageInfo.endCursor = nextEndCursorEdge\n    } else {\n      newPageInfo.startCursor = null\n      newPageInfo.endCursor = null\n    }\n\n    return newPageInfo\n  }\n\n  articlesQuery.subscribeToMore<\n    TicketArticleUpdatesSubscriptionVariables,\n    TicketArticleUpdatesSubscription\n  >(() => ({\n    document: TicketArticleUpdatesDocument,\n    variables: {\n      ticketId: ticketId.value,\n    },\n    onError: noop,\n    updateQuery(previous, { subscriptionData }) {\n      const updates = subscriptionData.data.ticketArticleUpdates\n\n      if (!previous.articles || updates.updateArticle) return previous\n\n      const previousArticlesEdges = previous.articles.edges\n      const previousArticlesEdgesCount = previousArticlesEdges.length\n\n      if (updates.removeArticleId) {\n        const edges = previousArticlesEdges.filter(\n          (edge) => edge.node.id !== updates.removeArticleId,\n        )\n\n        const removedArticleVisible =\n          edges.length !== previousArticlesEdgesCount\n\n        if (removedArticleVisible && !allArticleLoaded.value) {\n          refetchArticlesQuery(firstArticlesCount.value)\n\n          return previous\n        }\n\n        const result = {\n          ...previous,\n          articles: {\n            ...previous.articles,\n            edges,\n            totalCount: previous.articles.totalCount - 1,\n          },\n        }\n\n        if (removedArticleVisible) {\n          const nextEndCursorEdge =\n            previousArticlesEdges[previousArticlesEdgesCount - 2]\n\n          result.articles.pageInfo = {\n            ...previous.articles.pageInfo,\n            ...adjustPageInfoAfterDeletion(nextEndCursorEdge.cursor),\n          }\n        }\n\n        // Trigger cache garbage collection after the returned article deletion subscription\n        //  updated the article list.\n        nextTick(() => {\n          getApolloClient().cache.gc()\n        })\n\n        return result\n      }\n\n      if (updates.addArticle) {\n        options?.onAddArticleCallback?.({\n          updates,\n          previousArticlesEdges,\n          previousArticlesEdgesCount,\n          articlesQuery,\n          result: articleResult,\n          allArticleLoaded,\n          refetchArticlesQuery,\n        })\n      }\n\n      return previous\n    },\n  }))\n  return {\n    articlesQuery,\n    articleResult,\n    articleData,\n    allArticleLoaded,\n    isLoadingArticles,\n    refetchArticlesQuery,\n  }\n}\n","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { computed, type Ref } from 'vue'\n\nimport { type TicketById } from '#shared/entities/ticket/types.ts'\n\nimport { getTicketChannelPlugin } from '../channel/plugins/index.ts'\n\nexport const useTicketChannel = (ticket: Ref<TicketById | undefined>) => {\n  const channelPlugin = computed(() =>\n    getTicketChannelPlugin(ticket.value?.initialChannel),\n  )\n\n  const channelAlert = computed(() => {\n    if (!ticket.value) return null\n\n    return channelPlugin.value?.channelAlert(ticket.value)\n  })\n\n  const hasChannelAlert = computed(\n    () => Boolean(channelAlert.value) && Boolean(channelAlert.value?.text),\n  )\n\n  return { channelPlugin, channelAlert, hasChannelAlert }\n}\n","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nexport interface SelectionData {\n  text: string\n  html: string\n  selection: Selection | null\n}\n\nexport const getCurrentSelectionData = (): SelectionData => {\n  let text = ''\n  let html = ''\n  let sel: Selection | null = null\n  if (window.getSelection) {\n    sel = window.getSelection()\n    text = sel?.toString() || ''\n  } else if (document.getSelection) {\n    sel = document.getSelection()\n    text = sel?.toString() || ''\n  }\n\n  if (sel && sel.rangeCount) {\n    const container = document.createElement('div')\n    for (let i = 1; i <= sel.rangeCount; i += 1) {\n      container.appendChild(sel.getRangeAt(i - 1).cloneContents())\n    }\n    html = container.innerHTML\n  }\n\n  return {\n    text: text.toString().trim() || '',\n    html,\n    selection: sel,\n  }\n}\n","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\n// import { textToHtml } from '#shared/utils/helpers.ts'\nimport { getCurrentSelectionData } from '#shared/utils/selection.ts'\n\nconst closest = (node: Node, selector: string) => {\n  while (node.parentNode) {\n    if ('matches' in node && (node as Element).matches(selector)) return node\n    node = node.parentNode\n  }\n  return null\n}\n\nconst isInsideSelectionBoundary = (node: Element, articleId: number) => {\n  // node can be textNode, it doesn't have \"closest\" method\n  return !!closest(node, `#article-${articleId} .Content`)\n}\n\nconst containsNode = (selection: Selection, node: Element) => {\n  return !!selection.containsNode(node, false)\n}\n\nexport const getArticleSelection = (articleId: number) => {\n  const selection = window.getSelection()\n  if (!selection || selection.rangeCount <= 0) return undefined\n  const range = selection.getRangeAt(0)\n  const articleContent = document.querySelector(\n    `#article-${articleId} .Content`,\n  ) as HTMLDivElement | null\n  if (!articleContent) return undefined\n  const startInsideArticle = isInsideSelectionBoundary(\n    range.startContainer as Element,\n    articleId,\n  )\n  const endInsideArticle = isInsideSelectionBoundary(\n    range.endContainer as Element,\n    articleId,\n  )\n  const contains = containsNode(selection, articleContent)\n  const canQuote = startInsideArticle || endInsideArticle || contains\n\n  if (!canQuote) return undefined\n\n  // Fixes Issue #3539 - When replying quote article content only\n  if (!startInsideArticle && endInsideArticle) {\n    range.setStart(articleContent, 0)\n  } else if (startInsideArticle && !endInsideArticle) {\n    range.setEnd(articleContent, articleContent.childNodes.length)\n  } else if (contains) {\n    range.setStart(articleContent, 0)\n    range.setEnd(articleContent, articleContent.childNodes.length)\n  }\n\n  return getCurrentSelectionData()\n}\n","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { onMounted, ref } from 'vue'\n\nimport { waitForImagesToLoad } from '#shared/utils/dom.ts'\nimport { waitForAnimationFrame } from '#shared/utils/helpers.ts'\n\nexport const useArticleToggleMore = () => {\n  const MIN_HEIGHT = 60\n  const MAX_HEIGHT = 320\n  let heightActual = 0\n  let heightHidden = 0\n\n  const bubbleElement = ref<HTMLDivElement>()\n  const hasShowMore = ref(true)\n  const shownMore = ref(false)\n\n  const getSignatureMarker = (element: HTMLElement): HTMLElement | null => {\n    const marker = element.querySelector('.js-signatureMarker') as HTMLElement\n    if (marker) return marker\n\n    return element.querySelector('div [data-signature=true]')\n  }\n\n  const setHeight = async () => {\n    if (!bubbleElement.value) return\n\n    const styles = bubbleElement.value.style\n    styles.height = ''\n\n    await waitForAnimationFrame()\n\n    // it's possible it was remounted somehow\n    if (!bubbleElement.value) return\n\n    const height = bubbleElement.value.clientHeight\n\n    heightActual = height\n\n    const signatureMarker = getSignatureMarker(bubbleElement.value)\n\n    const offsetTop = signatureMarker?.offsetTop || 0\n\n    if (offsetTop > 0 && offsetTop < MAX_HEIGHT) {\n      heightHidden = offsetTop < MIN_HEIGHT ? MIN_HEIGHT : offsetTop\n      hasShowMore.value = true\n    } else if (height > MAX_HEIGHT) {\n      heightHidden = MAX_HEIGHT\n      hasShowMore.value = true\n    } else {\n      hasShowMore.value = false\n      heightHidden = 0\n    }\n\n    if (heightHidden) {\n      styles.height = `${heightHidden}px`\n    }\n  }\n\n  onMounted(async () => {\n    if (!bubbleElement.value) return\n\n    // Wait for inline images to load before calculating height\n    // Resolved immediately if no images are present\n    await waitForImagesToLoad(bubbleElement)\n\n    await setHeight()\n  })\n\n  const toggleShowMore = () => {\n    if (!bubbleElement.value) return\n\n    shownMore.value = !shownMore.value\n\n    const styles = bubbleElement.value.style\n\n    styles.transition = 'height 0.3s ease-in-out'\n    styles.height = shownMore.value\n      ? `${heightActual + 10}px`\n      : `${heightHidden}px`\n\n    const ontransitionend = () => {\n      styles.transition = ''\n      bubbleElement.value?.removeEventListener('transitionend', ontransitionend)\n    }\n\n    bubbleElement.value?.addEventListener('transitionend', ontransitionend)\n  }\n\n  return {\n    toggleShowMore,\n    hasShowMore,\n    shownMore,\n    bubbleElement,\n  }\n}\n","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport type { ImageViewerFile } from '#shared/composables/useImageViewer.ts'\n\nimport type { Ref } from 'vue'\n\nconst useHtmlInlineImages = (\n  inlineImages: Ref<ImageViewerFile[]>,\n  onClick: (int: number) => void,\n) => {\n  const populateInlineImages = (element: HTMLDivElement) => {\n    inlineImages.value.splice(0)\n\n    element.querySelectorAll('img').forEach((image) => {\n      const mime = (image.alt || image.src)?.match(/\\.(jpe?g)$/i)\n        ? 'image/jpeg'\n        : 'image/png'\n\n      const preview: ImageViewerFile = {\n        name: image.alt,\n        inline: image.src,\n        type: mime,\n      }\n\n      image.classList.add('cursor-pointer')\n      const index = inlineImages.value.push(preview) - 1\n      image.onclick = (event) => {\n        event.preventDefault()\n        event.stopPropagation()\n        onClick(index)\n      }\n    })\n  }\n\n  return {\n    populateInlineImages,\n  }\n}\n\nexport { useHtmlInlineImages }\n","import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nimport { ErrorsFragmentDoc } from '../../../../graphql/fragments/errors.api';\nimport * as VueApolloComposable from '@vue/apollo-composable';\nimport * as VueCompositionApi from 'vue';\nexport type ReactiveFunction<TParam> = () => TParam;\n\nexport const TicketArticleRetryMediaDownloadDocument = gql`\n    mutation ticketArticleRetryMediaDownload($articleId: ID!) {\n  ticketArticleRetryMediaDownload(articleId: $articleId) {\n    success\n    errors {\n      ...errors\n    }\n  }\n}\n    ${ErrorsFragmentDoc}`;\nexport function useTicketArticleRetryMediaDownloadMutation(options: VueApolloComposable.UseMutationOptions<Types.TicketArticleRetryMediaDownloadMutation, Types.TicketArticleRetryMediaDownloadMutationVariables> | ReactiveFunction<VueApolloComposable.UseMutationOptions<Types.TicketArticleRetryMediaDownloadMutation, Types.TicketArticleRetryMediaDownloadMutationVariables>> = {}) {\n  return VueApolloComposable.useMutation<Types.TicketArticleRetryMediaDownloadMutation, Types.TicketArticleRetryMediaDownloadMutationVariables>(TicketArticleRetryMediaDownloadDocument, options);\n}\nexport type TicketArticleRetryMediaDownloadMutationCompositionFunctionResult = VueApolloComposable.UseMutationReturn<Types.TicketArticleRetryMediaDownloadMutation, Types.TicketArticleRetryMediaDownloadMutationVariables>;","// Copyright (C) 2012-2025 Zammad Foundation, https://zammad-foundation.org/\n\nimport { ref, type Ref } from 'vue'\n\nimport { NotificationTypes } from '#shared/components/CommonNotifications/types.ts'\nimport { useNotifications } from '#shared/components/CommonNotifications/useNotifications.ts'\nimport { MutationHandler } from '#shared/server/apollo/handler/index.ts'\n\nimport { useTicketArticleRetryMediaDownloadMutation } from '../graphql/mutations/ticketArticleRetryMediaDownload.api.ts'\n\nexport const useTicketArticleRetryMediaDownload = (articleId: Ref<string>) => {\n  const retryMutation = new MutationHandler(\n    useTicketArticleRetryMediaDownloadMutation(() => ({\n      variables: {\n        articleId: articleId.value,\n      },\n    })),\n  )\n\n  const { notify } = useNotifications()\n\n  const loading = ref(false)\n\n  const tryAgain = async () => {\n    loading.value = true\n\n    try {\n      const result = await retryMutation.send()\n\n      if (!result?.ticketArticleRetryMediaDownload?.success) throw new Error()\n\n      notify({\n        id: 'media-download-success',\n        type: NotificationTypes.Success,\n        message: __('Media download was successful.'),\n      })\n\n      return Promise.resolve()\n    } catch (error) {\n      notify({\n        id: 'media-download-failed',\n        type: NotificationTypes.Error,\n        message: __('Media download failed. Please try again later.'),\n      })\n\n      return Promise.reject(error)\n    } finally {\n      loading.value = false\n    }\n  }\n\n  return {\n    loading,\n    tryAgain,\n  }\n}\n","import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nexport const SecurityStateFragmentDoc = gql`\n    fragment securityState on TicketArticleSecurityState {\n  type\n  signingSuccess\n  signingMessage\n  encryptionSuccess\n  encryptionMessage\n}\n    `;","import * as Types from '#shared/graphql/types.ts';\n\nimport gql from 'graphql-tag';\nimport { SecurityStateFragmentDoc } from '../fragments/securityState.api';\nimport { ErrorsFragmentDoc } from '../../../../graphql/fragments/errors.api';\nimport * as VueApolloComposable from '@vue/apollo-composable';\nimport * as VueCompositionApi from 'vue';\nexport type ReactiveFunction<TParam> = () => TParam;\n\nexport const TicketArticleRetrySecurityProcessDocument = gql`\n    mutation ticketArticleRetrySecurityProcess($articleId: ID!) {\n  ticketArticleRetrySecurityProcess(articleId: $articleId) {\n    retryResult {\n      ...securityState\n    }\n    article {\n      id\n      securityState {\n        ...securityState\n      }\n    }\n    errors {\n      ...errors\n    }\n  }\n}\n    ${SecurityStateFragmentDoc}\n${ErrorsFragmentDoc}`;\nexport function useTicketArticleRetrySecurityProcessMutation(options: VueApolloComposable.UseMutationOptions<Types.TicketArticleRetrySecurityProcessMutation, Types.TicketArticleRetrySecurityProcessMutationVariables> | ReactiveFunction<VueApolloComposable.UseMutationOptions<Types.TicketArticleRetrySecurityProcessMutation, Types.TicketArticleRetrySecurityProcessMutationVariables>> = {}) {\n  return VueApolloComposable.useMutation<Types.TicketArticleRetrySecurityProcessMutation, Types.TicketArticleRetrySecurityProcessMutationVariables>(TicketArticleRetrySecurityProcessDocument, options);\n}\nexport type TicketArticleRetrySecurityProcessMutationCompositionFunctionResult = VueApolloComposable.UseMutationReturn<Types.TicketArticleRetrySecurityProcessMutation, Types.TicketArticleRetrySecurityProcessMutationVariables>;"],"names":["useTicketArticleReplyAction","form","showArticleReply","values","formNode","_a","articleType","otherOptions","typeNode","nextTick","key","value","node","options","v","context","_b","type","bodyElement","getEditorValue","TicketArticleAttributesFragmentDoc","gql","TicketArticlesDocument","useTicketArticlesQuery","variables","VueApolloComposable.useQuery","TicketArticleUpdatesDocument","useArticleDataHandler","ticketId","firstArticlesCount","computed","articlesQuery","QueryHandler","articleResult","articleData","allArticleLoaded","_c","refetchArticlesQuery","pageSize","articleLoading","isLoadingArticles","adjustPageInfoAfterDeletion","nextEndCursorEdge","newPageInfo","noop","previous","subscriptionData","updates","previousArticlesEdges","previousArticlesEdgesCount","edges","edge","removedArticleVisible","result","getApolloClient","useTicketChannel","ticket","channelPlugin","getTicketChannelPlugin","channelAlert","hasChannelAlert","getCurrentSelectionData","text","html","sel","container","i","closest","selector","isInsideSelectionBoundary","articleId","containsNode","selection","getArticleSelection","range","articleContent","startInsideArticle","endInsideArticle","contains","useArticleToggleMore","heightActual","heightHidden","bubbleElement","ref","hasShowMore","shownMore","getSignatureMarker","element","marker","setHeight","styles","waitForAnimationFrame","height","signatureMarker","offsetTop","onMounted","waitForImagesToLoad","ontransitionend","useHtmlInlineImages","inlineImages","onClick","image","mime","preview","index","event","TicketArticleRetryMediaDownloadDocument","ErrorsFragmentDoc","useTicketArticleRetryMediaDownloadMutation","VueApolloComposable.useMutation","useTicketArticleRetryMediaDownload","retryMutation","MutationHandler","notify","useNotifications","loading","NotificationTypes","error","SecurityStateFragmentDoc","TicketArticleRetrySecurityProcessDocument","useTicketArticleRetrySecurityProcessMutation"],"mappings":"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"}