window.Zammad={},function(){function e(){}e.generateIcon=function(e,t){return t?'<i data-font="'+t+'">&#x'+e+"</i>":'<svg class="icon icon-'+e+'"><use xlink:href="/'+document.documentElement.dataset.iconsUrl+"#icon-"+e+'"></use></svg>'},Zammad.Util=e}(),function(){function e(e){e.stopPropagation(),e.preventDefault();var n=e.target.closest("div").querySelector(".dropdown-menu"),i=n.classList.toggle("is-open");n.setAttribute&&n.setAttribute("aria-expanded",i?"true":"false"),i?window.addEventListener("click",t):window.removeEventListener("click",t)}function t(e){e.stopPropagation(),e.preventDefault(),e.target.querySelectorAll(".dropdown-menu.is-open").forEach((function(e){e.classList.remove("is-open"),e.setAttribute("aria-expanded","false")})),window.removeEventListener("click",t)}document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll('[data-toggle="dropdown"]').forEach((function(t){t.addEventListener("click",e)})),document.querySelectorAll(".dropdown-menu").forEach((function(e){e.addEventListener("click",(function(e){e.stopPropagation()}))}))}))}(),function(){function e(e){this.el=document.createElement("div"),this.render=function(){this.el.innerHTML=this.constructor.template,this.el.querySelector("a").href=this.itemPath()||this.kbPath(),this.el.querySelector(".close").addEventListener("click",this.close.bind(this))},this.kbPath=function(){return document.documentElement.dataset.basePath.replace(encodeURIComponent("{locale}"),e)},this.close=function(){this.el.remove()},this.itemPath=function(){var n=document.querySelector("main");if(!n)return null;var i=n.dataset.basePath,a=n.dataset.availableLocales;return i&&a?(a=a.split(","),t.includes(a,e)?i=i.replace(encodeURIComponent("{locale}"),e):null):null},this.render()}function t(){}e.template='<div class="language-banner">'+Zammad.Util.generateIcon("mood-supergood")+'  <p class="language-banner-text">    The Knowledge Base is available in your language <a class="button button--small">activate</a>  </p>  <div class="spacer"></div>  <div class="close">'+Zammad.Util.generateIcon("diagonal-cross")+"  </div></div>",t.html=function(){return document.documentElement},t.document_languages=function(){return this.html().dataset.availableLocales.split(",")},t.user_languages=function(){var e=navigator.userLanguage||navigator.languages||navigator.language;return Array.isArray(e)?e:e?[e]:[]},t.is_current=function(e){return this.extract_language(this.html().lang)===this.extract_language(e)},t.includes=function(e,t){return t=this.extract_language(t),void 0!==e.filter((function(e){return this.extract_language(e)===t}),this)[0]},t.offer_language=function(){return this.includes(this.user_languages(),this.html().lang)?null:this.document_languages().filter((function(e){return this.includes(this.user_languages(),e)}),this)[0]},t.extract_language=function(e){return e.split("-")[0]},t.checkIfBetterLanguageAvailable=function(){var e=this.offer_language();e&&this.show(e)},t.show=function(t){var n=new e(t);document.querySelector(".js-wrapper").prepend(n.el)},t.checkIfBetterLanguageAvailable()}(),function(){function e(){}function t(e){this.el=document.createElement("li"),this.render=function(){this.el.classList.add("result"),this.el.innerHTML=this.constructor.template,this.setTitle(e.title,e.tags),this.setSubtitle(e.subtitle),this.setPreview(e.body),this.setURL(e.url),this.setIcon(e.icon,e.type)},this.setTitle=function(e){var t=e||"";this.el.querySelector(".result-title").innerHTML=t},this.setSubtitle=function(e){this.el.querySelector(".result-category").innerHTML=e||""},this.setPreview=function(e){this.el.querySelector(".result-preview").innerHTML=e||""},this.setURL=function(e){this.el.querySelector("a").href=e||"#"},this.setIcon=function(e,t){this.el.querySelector(".result-icon").innerHTML=this.generateIcon(e,t)},this.generateIcon=function(e,t){return"KnowledgeBase::Category::Translation"===t?(iconset=document.documentElement.dataset.iconset,Zammad.Util.generateIcon(e,iconset)):Zammad.Util.generateIcon(e)},this.render()}function n(e){this.el=document.createElement("li"),this.el.classList.add("search-message"),this.el.textContent=e.text}document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".js-search-input");e.bindEvent(t)})),e.lookup=function(e){this.timeoutIdentifier&&clearTimeout(this.timeoutIdentifier),this.clearContainer();var t=this;this.timeoutIdentifier=setTimeout((function(){t.lookupAction(e)}),300)},e.lookupAction=function(e){var i={knowledge_base_id:document.documentElement.dataset.id,locale:document.documentElement.lang,query:e,flavor:"public"};if(""!==e){var a=this;fetch("/api/v1/knowledge_bases/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){return e.json()})).then((function(e){(0===e.details.length?[new n({text:a.container().dataset.emptyPlaceholder})]:e.details.map((function(e){return new t(e)}))).forEach((function(e){a.container().appendChild(e.el)}))})).catch((function(e){var t=new n({text:e.message});a.container().appendChild(t.el)}))}},e.container=function(){return document.querySelector(".js-search-results")},e.clearContainer=function(){for(var e=this.container();null!==e.firstChild;)e.removeChild(e.firstChild)},e.bindEvent=function(t){t.addEventListener("input",(function(){e.lookup(t.value)}))},t.template='<a>  <span class="result-icon"></span>  <h3 class="result-title"></h3>  <div class="result-subtitle">    <span class="result-category"></span>    <span class="result-preview"></span> </div></a>'}();